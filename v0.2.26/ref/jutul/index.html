<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Jutul functions · JutulDarcy.jl</title><meta name="title" content="Jutul functions · JutulDarcy.jl"/><meta property="og:title" content="Jutul functions · JutulDarcy.jl"/><meta property="twitter:title" content="Jutul functions · JutulDarcy.jl"/><meta name="description" content="Documentation for JutulDarcy.jl."/><meta property="og:description" content="Documentation for JutulDarcy.jl."/><meta property="twitter:description" content="Documentation for JutulDarcy.jl."/><meta property="og:url" content="https://sintefmath.github.io/JutulDarcy.jl/ref/jutul/"/><meta property="twitter:url" content="https://sintefmath.github.io/JutulDarcy.jl/ref/jutul/"/><link rel="canonical" href="https://sintefmath.github.io/JutulDarcy.jl/ref/jutul/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/citations.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="JutulDarcy.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">JutulDarcy.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><span class="tocitem">Introduction</span><ul><li><a class="tocitem" href="../../">JutulDarcy.jl</a></li><li><a class="tocitem" href="../../man/intro/">Getting started</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/two_phase_gravity_segregation/">Gravity segregation</a></li><li><a class="tocitem" href="../../examples/two_phase_buckley_leverett/">Two-phase Buckley-Leverett</a></li><li><a class="tocitem" href="../../examples/two_phase_unstable_gravity/">Gravity circulation with CPR preconditioner</a></li><li><a class="tocitem" href="../../examples/wells_intro/">Intro to wells</a></li><li><a class="tocitem" href="../../examples/co2_sloped/">CO2 injection in saline aquifer</a></li><li><a class="tocitem" href="../../examples/data_input_file/">Simulating Eclipse/DATA input files</a></li><li><a class="tocitem" href="../../examples/five_spot_ensemble/">Quarter-five-spot with variation</a></li><li><a class="tocitem" href="../../examples/co2_brine_2d_vertical/">Intro to compositional flow</a></li><li><a class="tocitem" href="../../examples/compositional_5components/">Compositional with five components</a></li><li><a class="tocitem" href="../../examples/optimize_simple_bl/">Parameter optimization of Buckley-Leverett</a></li><li><a class="tocitem" href="../../examples/validation_spe1/">Validation: SPE1</a></li><li><a class="tocitem" href="../../examples/validation_spe9/">Validation: SPE9</a></li><li><a class="tocitem" href="../../examples/validation_egg/">Validation: Egg</a></li><li><a class="tocitem" href="../../examples/validation_olympus_1/">Validation: OLYMPUS 1</a></li><li><a class="tocitem" href="../../examples/validation_norne_nohyst/">Validation: Norne</a></li><li><a class="tocitem" href="../../examples/validation_mrst/">Validation: MRST input files</a></li></ul></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../../man/highlevel/">High-level API</a></li><li><a class="tocitem" href="../../man/basics/input_files/">Input formats</a></li><li><a class="tocitem" href="../../man/basics/forces/">Driving forces</a></li><li><a class="tocitem" href="../../man/basics/systems/">Supported physical systems</a></li><li><a class="tocitem" href="../../man/basics/wells/">Wells and controls</a></li><li><a class="tocitem" href="../../man/basics/solution/">Solving the equations</a></li><li><a class="tocitem" href="../../man/basics/primary/">Primary variables</a></li><li><a class="tocitem" href="../../man/basics/secondary/">Secondary variables (properties)</a></li><li><a class="tocitem" href="../../man/basics/parameters/">Parameters</a></li><li><a class="tocitem" href="../../man/basics/plotting/">Plotting and visualization</a></li></ul></li><li><span class="tocitem">Advanced usage</span><ul><li><a class="tocitem" href="../../man/advanced/mpi/">Multi-threading and MPI support</a></li><li><a class="tocitem" href="../../man/advanced/compiled/">Standalone reservoir simulator</a></li></ul></li><li><span class="tocitem">Reference</span><ul><li class="is-active"><a class="tocitem" href>Jutul functions</a></li></ul></li><li><span class="tocitem">Additional information </span><ul><li><a class="tocitem" href="../../extras/refs/">References</a></li><li><a class="tocitem" href="../../extras/faq/">FAQ</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Reference</a></li><li class="is-active"><a href>Jutul functions</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Jutul functions</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/sintefmath/JutulDarcy.jl/blob/main/docs/src/ref/jutul.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Documentation-from-Jutul.jl"><a class="docs-heading-anchor" href="#Documentation-from-Jutul.jl">Documentation from Jutul.jl</a><a id="Documentation-from-Jutul.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Documentation-from-Jutul.jl" title="Permalink"></a></h1><p>JutulDarcy.jl builds upon Jutul.jl. You can use JutulDarcy.jl without knowing the inner workings of Jutul.jl, but if you want to dive under the hood these docstrings may be helpful.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.AMGPreconditioner" href="#Jutul.AMGPreconditioner"><code>Jutul.AMGPreconditioner</code></a> — <span class="docstring-category">Type</span></header><section><div><p>AMG on CPU (Julia native)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/linsolve/precond/amg.jl#L2-L4">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.BlockMajorLayout" href="#Jutul.BlockMajorLayout"><code>Jutul.BlockMajorLayout</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Same as <a href="#Jutul.EntityMajorLayout"><code>EntityMajorLayout</code></a>, but the system is a sparse matrix where each entry is a small dense matrix.</p><p>For a test system with primary variables P, S and equations E1, E2 and two cells this will give a diagonal of length 2: [(∂E1/∂p)₁ (∂E1/∂S)₁ ; (∂E2/∂p)₁ (∂E2/∂S)₁] [(∂E1/∂p)₂ (∂E1/∂S)₂ ; (∂E2/∂p)₂ (∂E2/∂S)₂]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/core_types.jl#L131-L139">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.BoundaryFaces" href="#Jutul.BoundaryFaces"><code>Jutul.BoundaryFaces</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Entity for faces on the boundary (faces that are only connected to a single <a href="#Jutul.Cells"><code>Cells</code></a>)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/core_types.jl#L463-L465">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.Cells" href="#Jutul.Cells"><code>Jutul.Cells</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Entity for Cells (closed volumes with averaged properties for a finite-volume solver)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/core_types.jl#L453-L455">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.CoarseMesh-Tuple{Any, Any}" href="#Jutul.CoarseMesh-Tuple{Any, Any}"><code>Jutul.CoarseMesh</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">CoarseMesh(G::JutulMesh, p)</code></pre><p>Construct a coarse mesh from a given <code>JutulMesh</code> that can be converted to an <code>UnstructuredMesh</code> instance. The second argument <code>p</code> should be a partition Vector with one entry per cell in the original grid that assigns that cell to a coarse block. Should be one-indexed and the numbering should be sequential and contain at least one fine cell for each coarse index. This is tested by the function.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/meshes/coarse.jl#L14-L23">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.CompactAutoDiffCache" href="#Jutul.CompactAutoDiffCache"><code>Jutul.CompactAutoDiffCache</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Cache that holds an AD vector/matrix together with their positions.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/core_types.jl#L637-L639">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.DataDomain-Tuple{JutulDomain}" href="#Jutul.DataDomain-Tuple{JutulDomain}"><code>Jutul.DataDomain</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">DataDomain(domain::JutulDomain; property1 = p1, property2 = p2, ...)</code></pre><p>A wrapper around a domain that allows for storing of entity-associated data.</p><p>Example:</p><pre><code class="language-julia hljs"># Grid with 6 cells and 7 interior faces
g = CartesianMesh((2, 3))
d = DataDomain(g)
d[:cell_vec] = rand(6) #ok, same as:
d[:cell_vec, Cells()] = rand(6) #ok
d[:cell_vec, Faces()] = rand(6) #not ok!
d[:face_vec, Faces()] = rand(7) #ok!
# Can also add general arrays if last dimension == entity dimension
d[:cell_vec, Cells()] = rand(10, 3, 6) #ok
# Can add general data too, but needs to be specified
d[:not_on_face_or_cell, nothing] = rand(3) # also ok</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/domains.jl#L115-L134">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.DefaultContext" href="#Jutul.DefaultContext"><code>Jutul.DefaultContext</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Default context</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/contexts/default.jl#L2">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.DiscretizedDomain" href="#Jutul.DiscretizedDomain"><code>Jutul.DiscretizedDomain</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">DiscretizedDomain(domain, disc = nothing)</code></pre><p>A type for a discretized domain of some other domain or mesh. May contain one or more discretizations as-needed to write equations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/domains.jl#L40-L45">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.EntityMajorLayout" href="#Jutul.EntityMajorLayout"><code>Jutul.EntityMajorLayout</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Equations are grouped by entity, listing all equations and derivatives for entity 1 before proceeding to entity 2 etc.</p><p>For a test system with primary variables P, S and equations E1, E2 and two cells this will give the following ordering on the diagonal: (∂E1/∂p)₁, (∂E2/∂S)₁, (∂E1/∂p)₂, (∂E2/∂S)₂</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/core_types.jl#L115-L122">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.EquationMajorLayout" href="#Jutul.EquationMajorLayout"><code>Jutul.EquationMajorLayout</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Equations are stored sequentially in rows, derivatives of same type in columns:</p><p>For a test system with primary variables P, S and equations E1, E2 and two cells this will give the following ordering on the diagonal: (∂E1/∂p)₁, (∂E1/∂p)₂, (∂E2/∂S)₁, (∂E2/∂S)₂</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/core_types.jl#L102-L108">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.EquationSet" href="#Jutul.EquationSet"><code>Jutul.EquationSet</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Set of a variable where equations are defined</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/dd/dd.jl#L9">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.FaceMap" href="#Jutul.FaceMap"><code>Jutul.FaceMap</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Struct that contains mappings for a set of faces that are made up of nodes and are part of cells.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/meshes/unstructured/types.jl#L1-L4">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.Faces" href="#Jutul.Faces"><code>Jutul.Faces</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Entity for Faces (intersection between pairs of <a href="#Jutul.Cells"><code>Cells</code></a>)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/core_types.jl#L458-L460">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.FlowDiscretization" href="#Jutul.FlowDiscretization"><code>Jutul.FlowDiscretization</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Discretization of kgradp + upwind</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/core_types.jl#L734">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.FractionVariables" href="#Jutul.FractionVariables"><code>Jutul.FractionVariables</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Abstract type for fraction variables (vector variables that sum up to unity over each entity).</p><p>By default, these are limited to the [0, 1] range through <a href="#Jutul.maximum_value-Tuple{JutulVariables}"><code>maximum_value</code></a> and <a href="#Jutul.minimum_value-Tuple{JutulVariables}"><code>minimum_value</code></a> default implementations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/core_types.jl#L69-L75">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.GlobalSet" href="#Jutul.GlobalSet"><code>Jutul.GlobalSet</code></a> — <span class="docstring-category">Type</span></header><section><div><p>The global set of variables</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/dd/dd.jl#L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.GroupWisePreconditioner" href="#Jutul.GroupWisePreconditioner"><code>Jutul.GroupWisePreconditioner</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Multi-model preconditioners</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/linsolve/precond/various.jl#L48-L50">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.HalfFaces" href="#Jutul.HalfFaces"><code>Jutul.HalfFaces</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Entity for half-faces (face associated with a single <a href="#Jutul.Cells"><code>Cells</code></a>)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/core_types.jl#L468-L470">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.HelperSimulator-Union{Tuple{E}, Tuple{M}, Tuple{M, Any}} where {M, E}" href="#Jutul.HelperSimulator-Union{Tuple{E}, Tuple{M}, Tuple{M, Any}} where {M, E}"><code>Jutul.HelperSimulator</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">HelperSimulator(model::M, T = Float64; state0 = setup_state(model), executor::E = Jutul.default_executor()) where {M, E}</code></pre><p>Construct a helper simulator that can be used to compute the residuals and/or accumulation terms for a given type T. Useful for coupling Jutul to other solvers and types of automatic differentiation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/simulator/helper.jl#L9-L15">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.ILUZeroPreconditioner" href="#Jutul.ILUZeroPreconditioner"><code>Jutul.ILUZeroPreconditioner</code></a> — <span class="docstring-category">Type</span></header><section><div><p>ILU(0) preconditioner on CPU</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/linsolve/precond/ilu.jl#L2-L4">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.IndirectionMap" href="#Jutul.IndirectionMap"><code>Jutul.IndirectionMap</code></a> — <span class="docstring-category">Type</span></header><section><div><p>IndirectionMap(vals::Vector{V}, pos::Vector{Int}) where V</p><p>Create a indirection map that encodes a variable length dense vector.</p><p><code>pos</code> is assumed to be a Vector{Int} of length n+1 where n is the number of dense vectors that is encoded. The <code>vals</code> array holds the entries for vector i in the range <code>pos[i]:(pos[i+1]-1)</code> for fast lookup. Indexing into the indirection map with index <code>k</code> will give a view into the values for vector <code>k</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/core_types.jl#L991-L1000">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.JacobiPreconditioner" href="#Jutul.JacobiPreconditioner"><code>Jutul.JacobiPreconditioner</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Damped Jacobi preconditioner on CPU</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/linsolve/precond/jacobi.jl#L2-L4">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.JutulAutoDiffCache" href="#Jutul.JutulAutoDiffCache"><code>Jutul.JutulAutoDiffCache</code></a> — <span class="docstring-category">Type</span></header><section><div><p>An AutoDiffCache is a type that holds both a set of AD values and a map into some global Jacobian.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/core_types.jl#L632-L635">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.JutulCase" href="#Jutul.JutulCase"><code>Jutul.JutulCase</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">JutulCase(model, dt = [1.0], forces = setup_forces(model); state0 = nothing, parameters = nothing, kwarg...)</code></pre><p>Set up a structure that holds the complete specification of a simulation case.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/core_types.jl#L812-L816">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.JutulConfig" href="#Jutul.JutulConfig"><code>Jutul.JutulConfig</code></a> — <span class="docstring-category">Type</span></header><section><div><p>JutulConfig(name = nothing)</p><p>A configuration object that acts like a <code>Dict{Symbol,Any}</code> but contains additional data to limit the valid keys and values to those added by <a href="#Jutul.add_option!"><code>add_option!</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/simulator/types.jl#L117-L122">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.JutulContext" href="#Jutul.JutulContext"><code>Jutul.JutulContext</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Abstract type for the context Jutul should execute in (matrix formats, memory allocation, etc.)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/core_types.jl#L83-L85">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.JutulDiscretization" href="#Jutul.JutulDiscretization"><code>Jutul.JutulDiscretization</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">d = disc(i, Cells())</code></pre><p>Ask discretization for entry <code>i</code> when discretizing some equation on the  chosen entity (e.g. <a href="#Jutul.Cells"><code>Cells</code></a>)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/core_types.jl#L26-L31">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.JutulDiscretization" href="#Jutul.JutulDiscretization"><code>Jutul.JutulDiscretization</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Abstract type for a Jutul discretization</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/core_types.jl#L21-L23">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.JutulDomain" href="#Jutul.JutulDomain"><code>Jutul.JutulDomain</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Abstract type for domains where equations can be defined</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/domains.jl#L1-L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.JutulEntity" href="#Jutul.JutulEntity"><code>Jutul.JutulEntity</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Super-type for all entities where <a href="#Jutul.JutulVariables"><code>JutulVariables</code></a> can be defined.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/core_types.jl#L448-L450">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.JutulEquation" href="#Jutul.JutulEquation"><code>Jutul.JutulEquation</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Abstract type for all residual equations</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/core_types.jl#L229-L231">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.JutulForce" href="#Jutul.JutulForce"><code>Jutul.JutulForce</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Abstract type for driving forces</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/core_types.jl#L78-L80">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.JutulMatrixLayout" href="#Jutul.JutulMatrixLayout"><code>Jutul.JutulMatrixLayout</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Abstract type for matrix layouts. A layout determines how primary variables and equations are ordered in a sparse matrix representation. Note that this is different from the matrix format itself as it concerns the ordering itself: For example, if all equations for a single cell come in sequence, or if a single equation is given for all entities before the next equation is written.</p><p>Different layouts does not change the solution of the system, but different linear solvers support different layouts.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/core_types.jl#L91-L100">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.JutulMesh" href="#Jutul.JutulMesh"><code>Jutul.JutulMesh</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A mesh is a type of domain that has been discretized. Abstract subtype.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/core_types.jl#L442-L444">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.JutulSystem" href="#Jutul.JutulSystem"><code>Jutul.JutulSystem</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Abstract type for the physical system to be solved.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/core_types.jl#L16-L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.JutulVariables" href="#Jutul.JutulVariables"><code>Jutul.JutulVariables</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Abstract type for all variables in Jutul.</p><p>A variable is associated with a <a href="#Jutul.JutulEntity"><code>JutulEntity</code></a> through the <a href="#Jutul.associated_entity-Tuple{JutulEquation}"><code>associated_entity</code></a> function. A variable is local to that entity, and cannot depend on other entities. Variables are used by models to define:</p><ul><li>primary variables: Sometimes referred to as degrees of freedom, primary unknowns or solution variables</li><li>parameters: Static quantities that impact the solution</li><li>secondary variables: Can be computed from a combination of other primary and secondary variables and parameters.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/core_types.jl#L45-L56">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.LUPreconditioner" href="#Jutul.LUPreconditioner"><code>Jutul.LUPreconditioner</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Full LU factorization as preconditioner (intended for smaller subsystems)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/linsolve/precond/various.jl#L8-L10">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.LUSolver" href="#Jutul.LUSolver"><code>Jutul.LUSolver</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">LUSolver(; reuse_memory = true, check = true, max_size = 50000)</code></pre><p>Direct solver that calls <code>lu</code> directly. Direct solvers are highly accurate, but are costly in terms of memory usage and execution speed for larger systems.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/linsolve/scalar_cpu.jl#L2-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.MRSTWrapMesh" href="#Jutul.MRSTWrapMesh"><code>Jutul.MRSTWrapMesh</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">MRSTWrapMesh(G, N = nothing)</code></pre><p>Mesh that adapts an exported MRST mesh to the Jutul interface. <code>G</code> is assumed to be read directly from file using <code>MAT.matread</code>. The raw exported grid can be found under the <code>data</code> field.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/meshes/mrst.jl#L9-L15">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.MultiModel" href="#Jutul.MultiModel"><code>Jutul.MultiModel</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">MultiModel(models)</code></pre><p>A model variant that is made up of many named submodels, each a fully realized <a href="#Jutul.SimulationModel-Tuple{Any, Any}"><code>SimulationModel</code></a>.</p><p><code>models</code> should be a <code>NamedTuple</code> or <code>Dict{Symbol, JutulModel}</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/core_types.jl#L915-L921">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.NoEntity" href="#Jutul.NoEntity"><code>Jutul.NoEntity</code></a> — <span class="docstring-category">Type</span></header><section><div><p>An entity for something that isn&#39;t associated with an entity</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/core_types.jl#L478-L480">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.Nodes" href="#Jutul.Nodes"><code>Jutul.Nodes</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Entity for Nodes (intersection between multiple <a href="#Jutul.Faces"><code>Faces</code></a>)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/core_types.jl#L473-L475">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.ParallelCSRContext" href="#Jutul.ParallelCSRContext"><code>Jutul.ParallelCSRContext</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A context that uses a CSR sparse matrix format together with threads. Experimental.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/contexts/csr.jl#L2">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.SPAI0Preconditioner" href="#Jutul.SPAI0Preconditioner"><code>Jutul.SPAI0Preconditioner</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Sparse Approximate Inverse preconditioner of lowest order – SPAI(0)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/linsolve/precond/spai.jl#L1-L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.SPU" href="#Jutul.SPU"><code>Jutul.SPU</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Single-point upwinding.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/conservation/flux.jl#L21-L23">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.ScalarVariable" href="#Jutul.ScalarVariable"><code>Jutul.ScalarVariable</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Abstract type for scalar variables (one entry per entity, e.g. pressure or temperature in each cell of a model)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/core_types.jl#L59-L62">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.SimulationModel-Tuple{Any, Any}" href="#Jutul.SimulationModel-Tuple{Any, Any}"><code>Jutul.SimulationModel</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">SimulationModel(domain, system; &lt;kwarg&gt;)</code></pre><p>Instantiate a model for a given <code>system</code> discretized on the <code>domain</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/core_types.jl#L259-L263">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.SimulationModel-Tuple{JutulMesh, Any}" href="#Jutul.SimulationModel-Tuple{JutulMesh, Any}"><code>Jutul.SimulationModel</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">SimulationModel(g::JutulMesh, system; discretization = nothing, kwarg...)</code></pre><p>Type that defines a simulation model - everything needed to solve the discrete equations.</p><p>The minimal setup requires a <a href="#Jutul.JutulMesh"><code>JutulMesh</code></a> that defines topology together with a <a href="#Jutul.JutulSystem"><code>JutulSystem</code></a> that imposes physical laws.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/core_types.jl#L486-L494">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.Simulator-Tuple{Any}" href="#Jutul.Simulator-Tuple{Any}"><code>Jutul.Simulator</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">Simulator(model; &lt;kwarg&gt;)</code></pre><p>Set up a simulator object for a <code>model</code> that can be used by <a href="#Jutul.simulate!-Tuple{JutulSimulator, AbstractVector}"><code>simulate!</code></a>. To avoid manually instantiating the simulator, the non-mutating <a href="#Jutul.simulate-Tuple{Any, JutulModel, AbstractVector}"><code>simulate</code></a> interface can be used instead.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/simulator/types.jl#L19-L25">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.SparsityTracingWrapper-Union{Tuple{AbstractArray{T, N}}, Tuple{N}, Tuple{T}} where {T, N}" href="#Jutul.SparsityTracingWrapper-Union{Tuple{AbstractArray{T, N}}, Tuple{N}, Tuple{T}} where {T, N}"><code>Jutul.SparsityTracingWrapper</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">SparsityTracingWrapper(x::AbstractArray{T, N}) where {T, N}</code></pre><p>Create a sparsity tracing wrapper for a numeric array. This wrapped array produces outputs that have the same value as the wrapped type, but contains a SparsityTracing seeded value with seed equal to the column index (if matrix) or linear index (if vector).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/ad/sparsity.jl#L22-L29">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.TPFA" href="#Jutul.TPFA"><code>Jutul.TPFA</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Two-point flux approximation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/conservation/flux.jl#L12-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.TwoPointFiniteVolumeGeometry" href="#Jutul.TwoPointFiniteVolumeGeometry"><code>Jutul.TwoPointFiniteVolumeGeometry</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">TwoPointFiniteVolumeGeometry(neighbors, areas, volumes, normals, cell_centers, face_centers)</code></pre><p>Store two-point geometry information for a given list of <code>neighbors</code> specified as a <code>2</code> by <code>n</code> matrix where <code>n</code> is the number of faces such that face <code>i</code> connectes cells <code>N[1, i]</code> and <code>N[2, i]</code>.</p><p>The two-point finite-volume geometry contains the minimal set of geometry information required to compute standard finite-volume discretizations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/meshes/meshes.jl#L19-L27">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.UnstructuredMesh-Tuple{CartesianMesh}" href="#Jutul.UnstructuredMesh-Tuple{CartesianMesh}"><code>Jutul.UnstructuredMesh</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">UnstructuredMesh(g::CartesianMesh)</code></pre><p>Convert <code>CartesianMesh</code> instance to unstructured grid (3D only)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/meshes/unstructured/types.jl#L284-L288">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.VariableSet" href="#Jutul.VariableSet"><code>Jutul.VariableSet</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Set of a variable where variables are defined</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/dd/dd.jl#L6">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.VectorVariables" href="#Jutul.VectorVariables"><code>Jutul.VectorVariables</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Abstract type for vector variables (more than one entry per entity, for example saturations or displacements)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/core_types.jl#L64-L67">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.absolute_increment_limit-Tuple{JutulVariables}" href="#Jutul.absolute_increment_limit-Tuple{JutulVariables}"><code>Jutul.absolute_increment_limit</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Absolute allowable change for variable during a nonlinear update.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/variables/utils.jl#L86-L88">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.add_option!" href="#Jutul.add_option!"><code>Jutul.add_option!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">add_option!(opts::JutulConfig, :my_cool_option, 3, &quot;My option has this brief description&quot;)</code></pre><p>Add an option to existing <a href="#Jutul.JutulConfig"><code>JutulConfig</code></a> structure. Additional currently undocumented keyword arguments can be used to restrict valid types and values.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/config.jl#L3-L8">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.align_to_jacobian!-NTuple{4, Any}" href="#Jutul.align_to_jacobian!-NTuple{4, Any}"><code>Jutul.align_to_jacobian!</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Update an equation so that it knows where to store its derivatives in the Jacobian representation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/equations.jl#L423-L426">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.align_to_jacobian!-Tuple{ConservationLawTPFAStorage, ConservationLaw, Any, Any, Cells}" href="#Jutul.align_to_jacobian!-Tuple{ConservationLawTPFAStorage, ConservationLaw, Any, Any, Cells}"><code>Jutul.align_to_jacobian!</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Update positions of law&#39;s derivatives in global Jacobian</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/conservation/conservation.jl#L78">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.allocate_array_ad-Tuple{AbstractMatrix}" href="#Jutul.allocate_array_ad-Tuple{AbstractMatrix}"><code>Jutul.allocate_array_ad</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">allocate_array_ad(v::AbstractMatrix, ...)</code></pre><p>Convert matrix to AD matrix.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/ad/ad.jl#L341-L344">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.allocate_array_ad-Tuple{AbstractVector}" href="#Jutul.allocate_array_ad-Tuple{AbstractVector}"><code>Jutul.allocate_array_ad</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">allocate_array_ad(v::AbstractVector, ...)</code></pre><p>Convert vector to AD vector.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/ad/ad.jl#L331-L334">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.allocate_array_ad-Union{Tuple{Vararg{R}}, Tuple{R}} where R&lt;:Integer" href="#Jutul.allocate_array_ad-Union{Tuple{Vararg{R}}, Tuple{R}} where R&lt;:Integer"><code>Jutul.allocate_array_ad</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">allocate_array_ad(n[, m]; &lt;keyword arguments&gt;)</code></pre><p>Allocate vector or matrix as AD with optionally provided context and a specified non-zero on the diagonal.</p><p><strong>Arguments</strong></p><ul><li><code>n::Integer</code>: number of entries in vector, or number of rows if <code>m</code> is given.</li><li><code>m::Integer</code>: number of rows (optional)</li></ul><p><strong>Keyword arguments</strong></p><ul><li><code>npartials = 1</code>: Number of partials derivatives to allocate for each element</li><li><code>diag_pos = nothing</code>: Indices of where to put entities on the diagonal (if any)</li></ul><p>Other keyword arguments are passed onto <code>get_ad_entity_scalar</code>.</p><p><strong>Examples:</strong></p><p>Allocate a vector with a single partial:</p><pre><code class="language-julia-repl hljs">julia&gt; allocate_array_ad(2)
2-element Vector{ForwardDiff.Dual{nothing, Float64, 1}}:
 Dual{nothing}(0.0,0.0)
 Dual{nothing}(0.0,0.0)</code></pre><p>Allocate a vector with two partials, and set the first to one:</p><pre><code class="language-julia-repl hljs">julia&gt; allocate_array_ad(2, diag_pos = 1, npartials = 2)
2-element Vector{ForwardDiff.Dual{nothing, Float64, 2}}:
 Dual{nothing}(0.0,1.0,0.0)
 Dual{nothing}(0.0,1.0,0.0)</code></pre><p>Set up a matrix with two partials, where the first column has partials [1, 0] and the second [0, 1]:</p><pre><code class="language-julia-repl hljs">julia&gt; allocate_array_ad(2, 2, diag_pos = [1, 2], npartials = 2)
2×2 Matrix{ForwardDiff.Dual{nothing, Float64, 2}}:
 Dual{nothing}(0.0,1.0,0.0)  Dual{nothing}(0.0,1.0,0.0)
 Dual{nothing}(0.0,0.0,1.0)  Dual{nothing}(0.0,0.0,1.0)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/ad/ad.jl#L273-L311">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.apply_forces!-NTuple{4, Any}" href="#Jutul.apply_forces!-NTuple{4, Any}"><code>Jutul.apply_forces!</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Apply a set of forces to all equations. Equations that don&#39;t support a given force will just ignore them, thanks to the power of multiple dispatch.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/models.jl#L846-L849">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.apply_forces_to_equation!-NTuple{7, Any}" href="#Jutul.apply_forces_to_equation!-NTuple{7, Any}"><code>Jutul.apply_forces_to_equation!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">apply_forces_to_equation!(diag_part, storage, model, eq, eq_s, force, time)</code></pre><p>Update an equation with the effect of a force. The default behavior for any force we do not know about is to assume that the force does not impact this particular equation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/equations.jl#L570-L576">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.as_value-Tuple{AbstractArray}" href="#Jutul.as_value-Tuple{AbstractArray}"><code>Jutul.as_value</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Create a mapped array that produces only the values when indexed.</p><p>Only useful for AD arrays, otherwise it does nothing.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/ad/ad.jl#L416-L420">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.associated_entity-Tuple{JutulEquation}" href="#Jutul.associated_entity-Tuple{JutulEquation}"><code>Jutul.associated_entity</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Return the domain entity the equation is associated with</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/equations.jl#L255-L257">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.associated_entity-Tuple{JutulVariables}" href="#Jutul.associated_entity-Tuple{JutulVariables}"><code>Jutul.associated_entity</code></a> — <span class="docstring-category">Method</span></header><section><div><p>The entity a variable is associated with, and can hold partial derivatives with respect to.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/variables/utils.jl#L9-L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.cell_dims-Tuple{Any, Any}" href="#Jutul.cell_dims-Tuple{Any, Any}"><code>Jutul.cell_dims</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">cell_dims(g, pos)::Tuple</code></pre><p>Get physical cell dimensions of cell with index <code>pos</code> for grid <code>g</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/meshes/cart.jl#L121-L125">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.cell_index-Tuple{Any, Tuple}" href="#Jutul.cell_index-Tuple{Any, Tuple}"><code>Jutul.cell_index</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">cell_index(g, pos)</code></pre><p>Get linear (scalar) index of mesh cell from provided IJK tuple <code>pos</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/meshes/cart.jl#L99-L103">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.check_amgcl_availability-Tuple{}" href="#Jutul.check_amgcl_availability-Tuple{}"><code>Jutul.check_amgcl_availability</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">check_amgcl_availability(; throw = true)</code></pre><p>Check if AMGCLWrap extension is available. If <code>throw=true</code> this wil be an error, otherwise a Boolean indicating if the extension is available will be returned.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/ext/amgclwrap_ext.jl#L20-L25">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.compress_timesteps" href="#Jutul.compress_timesteps"><code>Jutul.compress_timesteps</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">compress_timesteps(timesteps, forces = nothing; max_step = Inf)</code></pre><p>Compress a set of timesteps and forces to the largest possible steps that still covers the same interval and changes forces at exactly the same points in time, while being limited to a maximum size of <code>max_step</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/timesteps.jl#L201-L207">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.compress_timesteps-Tuple{JutulCase}" href="#Jutul.compress_timesteps-Tuple{JutulCase}"><code>Jutul.compress_timesteps</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">compress_timesteps(case::JutulCase; max_step = Inf)</code></pre><p>Compress time steps for a Jutul case. See <a href="#Jutul.compress_timesteps"><code>compress_timesteps</code></a> for the general case.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/timesteps.jl#L258-L263">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.compute_boundary_trans-Tuple{DataDomain, Any}" href="#Jutul.compute_boundary_trans-Tuple{DataDomain, Any}"><code>Jutul.compute_boundary_trans</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">compute_boundary_trans(d::DataDomain, perm)</code></pre><p>Compute the boundary half face transmissibilities for perm. The input <code>perm</code> can either be the symbol of some data defined on <code>Cells()</code>, a vector of numbers for each cell or a matrix with number of columns equal to the number of cells.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/discretization/finite-volume.jl#L230-L237">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.compute_face_trans-Tuple{DataDomain, Vararg{Any}}" href="#Jutul.compute_face_trans-Tuple{DataDomain, Vararg{Any}}"><code>Jutul.compute_face_trans</code></a> — <span class="docstring-category">Method</span></header><section><div><p>compute<em>face</em>trans(g::DataDomain, perm)</p><p>Compute face trans for the interior faces. The input <code>perm</code> can either be the symbol of some data defined on <code>Cells()</code>, a vector of numbers for each cell or a matrix with number of columns equal to the number of cells.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/discretization/finite-volume.jl#L213-L219">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.compute_half_face_trans-Tuple{DataDomain, Any}" href="#Jutul.compute_half_face_trans-Tuple{DataDomain, Any}"><code>Jutul.compute_half_face_trans</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">compute_half_face_trans(g::DataDomain, perm)</code></pre><p>Compute half-face trans for the interior faces. The input <code>perm</code> can either be the symbol of some data defined on <code>Cells()</code>, a vector of numbers for each cell or a matrix with number of columns equal to the number of cells.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/discretization/finite-volume.jl#L8-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.convergence_criterion-Tuple{Any, Any, JutulEquation, Any, Any}" href="#Jutul.convergence_criterion-Tuple{Any, Any, JutulEquation, Any, Any}"><code>Jutul.convergence_criterion</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">convergence_criterion(model, storage, eq, eq_s, r; dt = 1)</code></pre><p>Get the convergence criterion values for a given equation. Can be checked against the corresponding tolerances.</p><p><strong>Arguments</strong></p><ul><li><code>model</code>: model that generated the current equation.</li><li><code>storage</code>: global simulator storage.</li><li><code>eq::JutulEquation</code>: equation implementation currently being checked</li><li><code>eq_s</code>: storage for <code>eq</code> where values are contained.</li><li><code>r</code>: the local residual part corresponding to this model, as a matrix with column index equaling entity index</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/equations.jl#L581-L592">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.convert_from_si-Tuple{Any, String}" href="#Jutul.convert_from_si-Tuple{Any, String}"><code>Jutul.convert_from_si</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">convert_from_si(value, unit_name::Union{Symbol, String})</code></pre><p>Convert <code>value</code> from SI representation to the unit in <code>unit_symbol</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; convert_from_si(3600.0, :hour) # Get 3600 s represented as hours
1.0</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/units/interface.jl#L29-L39">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.convert_state_ad" href="#Jutul.convert_state_ad"><code>Jutul.convert_state_ad</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Convert a state containing variables as arrays of doubles to a state where those arrays contain the same value as Dual types. The dual type is currently taken from ForwardDiff.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/ad/ad.jl#L212-L216">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.convert_to_si-Tuple{Any, String}" href="#Jutul.convert_to_si-Tuple{Any, String}"><code>Jutul.convert_to_si</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">convert_to_si(value, unit_name::String)</code></pre><p>Convert <code>value</code> to SI representation from value in the unit given by <code>unit_symbol</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; convert_to_si(1.0, :hour) # Get 1 hour represented as seconds
3600.0</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/units/interface.jl#L1-L12">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.coord_offset-Tuple{Any, AbstractFloat}" href="#Jutul.coord_offset-Tuple{Any, AbstractFloat}"><code>Jutul.coord_offset</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Lower corner for one dimension, without any transforms applied</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/meshes/cart.jl#L93-L95">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.data_domain_to_parameters_gradient-Tuple{Any, Any}" href="#Jutul.data_domain_to_parameters_gradient-Tuple{Any, Any}"><code>Jutul.data_domain_to_parameters_gradient</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">data_domain_to_parameters_gradient(model, parameter_gradient; dp_dd = missing, config = nothing)</code></pre><p>Make a data<em>domain copy that contains the gradient of some objective with respect to the fields in the data</em>domain, assuming that the parameters were initialized directly from the data<em>domain via (`setup</em>parameters`)[@ref].</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/variables/vectorization.jl#L202-L208">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.declare_pattern-Tuple{Any, Any, Any, Any, Vararg{Any}}" href="#Jutul.declare_pattern-Tuple{Any, Any, Any, Any, Vararg{Any}}"><code>Jutul.declare_pattern</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Give out source, target arrays of equal length for a given equation attached to the given model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/equations.jl#L389-L392">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.declare_sparsity" href="#Jutul.declare_sparsity"><code>Jutul.declare_sparsity</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Give out I, J arrays of equal length for a given equation attached to the given model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/equations.jl#L302-L305">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.degrees_of_freedom_per_entity-Tuple{Any, ScalarVariable}" href="#Jutul.degrees_of_freedom_per_entity-Tuple{Any, ScalarVariable}"><code>Jutul.degrees_of_freedom_per_entity</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Number of independent primary variables / degrees of freedom per computational entity.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/variables/utils.jl#L73-L75">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.descalarize_primary_variable!-Tuple{Any, Any, Any, ScalarVariable, Any}" href="#Jutul.descalarize_primary_variable!-Tuple{Any, Any, Any, ScalarVariable, Any}"><code>Jutul.descalarize_primary_variable!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">descalarize_primary_variable!(dest_array, model, V, var::Jutul.ScalarVariable, index)</code></pre><p>Descalarize a primary variable, overwriting dest<em>array at entity <code>index</code>. The AD status of entries in `dest</em>array` will be retained.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/variables/scalarization.jl#L49-L54">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.descalarize_primary_variables!" href="#Jutul.descalarize_primary_variables!"><code>Jutul.descalarize_primary_variables!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">descalarize_primary_variables!(state, model, V, pvars::NamedTuple = (; pairs(model.primary_variables)...), ind = eachindex(V))</code></pre><p>Replace valeus in <code>state</code> by the scalarized values found in V.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/variables/scalarization.jl#L130-L134">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.dim-Tuple{JutulMesh}" href="#Jutul.dim-Tuple{JutulMesh}"><code>Jutul.dim</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">dim(g)::Integer</code></pre><p>Get the dimension of a mesh.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/meshes/meshes.jl#L136-L140">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.expand_to_ministeps-Tuple{Any, Any}" href="#Jutul.expand_to_ministeps-Tuple{Any, Any}"><code>Jutul.expand_to_ministeps</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">substates, dt, report_index = expand_to_ministeps(states, reports)</code></pre><p>Get states and timesteps at the finest stored resolution. Output lengths depend on if <code>output_substates</code> option to simulator was enabled.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/utils.jl#L748-L753">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.expand_to_ministeps-Tuple{Jutul.SimResult}" href="#Jutul.expand_to_ministeps-Tuple{Jutul.SimResult}"><code>Jutul.expand_to_ministeps</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">substates, dt, report_index = expand_to_ministeps(result::SimResult)</code></pre><p>Get states and timesteps at the finest stored resolution. Output lengths depend on if <code>output_substates</code> option to simulator was enabled.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/utils.jl#L737-L742">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.extra_debug_output!-NTuple{6, Any}" href="#Jutul.extra_debug_output!-NTuple{6, Any}"><code>Jutul.extra_debug_output!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">extra_debug_output!(report, storage, model, config, iteration, dt)</code></pre><p>Add extra debug output to report during a nonlinear iteration.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/simulator/simulator.jl#L728-L732">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.extract_submesh-Tuple{UnstructuredMesh, Any}" href="#Jutul.extract_submesh-Tuple{UnstructuredMesh, Any}"><code>Jutul.extract_submesh</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">extract_submesh(g::UnstructuredMesh, cells)</code></pre><p>Extract a subgrid for a given mesh and a iterable of <code>cells</code> to keep.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/meshes/unstructured/utils.jl#L27-L31">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.full_cell-Tuple{Any, Any}" href="#Jutul.full_cell-Tuple{Any, Any}"><code>Jutul.full_cell</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Inner cell to local cell (full set)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/dd/trivial_map.jl#L35">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.get_1d_interpolator-Tuple{Any, Any}" href="#Jutul.get_1d_interpolator-Tuple{Any, Any}"><code>Jutul.get_1d_interpolator</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_1d_interpolator(xs, ys; &lt;keyword arguments&gt;)</code></pre><p>Get a 1D interpolator <code>F(x) ≈ y</code> for a table <code>xs, ys</code> that by default does constant extrapolation</p><p><strong>Arguments</strong></p><ul><li><code>xs</code>: sorted list of parameter points.</li><li><code>ys</code>: list of function values with equal length to <code>xs</code></li><li><code>method=LinearInterpolant</code>: constructor for the interpolation. Defaults to <code>LinearInterpolant</code> which does simple linear interpolation.</li><li><code>cap_endpoints = true</code>: Add values so that the endpoints are capped (constant extrapolation). Otherwise, the extrapolation will match the method.</li><li><code>cap_start = cap_endpoints</code>: Fine-grained version of cap_endpoints for the start of the interval only (extrapolation for <code>x &lt; xs[1]</code>)</li><li><code>cap_end = cap_endpoints</code>:Fine-grained version of cap_endpoints for the end of the interval only (extrapolation for <code>x &gt; xs[end]</code>)</li></ul><p>Additional keyword arguments are passed onto the interpolator constructor.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/interpolation.jl#L96-L111">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.get_2d_interpolator-Tuple{Any, Any, Any}" href="#Jutul.get_2d_interpolator-Tuple{Any, Any, Any}"><code>Jutul.get_2d_interpolator</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_2d_interpolator(xs, ys, fs; method = BilinearInterpolant, cap_endpoints = true)</code></pre><p>For <code>xs</code> of length <code>nx</code> and <code>ys</code> of length <code>ny</code> generate a 2D interpolation for values given as a <code>nx</code> by <code>ny</code> matrix. By default <code>cap_endpoints=true</code>, and constant extrapolation is used. Fine-grined control over extrapolation can be achieved by setting the keywords arguments <code>cap_x = (cap_low_x, cap_high_x)</code> and analogously for <code>cap_y</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/interpolation.jl#L201-L209">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.get_ad_entity_scalar-Union{Tuple{T}, Tuple{T, Any}, Tuple{T, Any, Any}} where T&lt;:Real" href="#Jutul.get_ad_entity_scalar-Union{Tuple{T}, Tuple{T, Any}, Tuple{T, Any, Any}} where T&lt;:Real"><code>Jutul.get_ad_entity_scalar</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_ad_entity_scalar(v::Real, npartials, diag_pos = nothing; &lt;keyword_arguments&gt;)</code></pre><p>Get scalar with partial derivatives as AD instance.</p><p><strong>Arguments</strong></p><ul><li><code>v::Real</code>: Value of AD variable.</li><li><code>npartials</code>: Number of partial derivatives each AD instance holds.</li><li><code>diag_pos</code> = nothing: Position(s) of where to set 1 as the partial derivative instead of zero.</li></ul><p><strong>Keyword arguments</strong></p><ul><li><code>tag = nothing</code>: Tag for AD instance. Two AD values of the different tag cannot interoperate to avoid perturbation confusion (see ForwardDiff documentation).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/ad/ad.jl#L351-L363">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.get_dependencies-Tuple{Any, Any}" href="#Jutul.get_dependencies-Tuple{Any, Any}"><code>Jutul.get_dependencies</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Get dependencies of variable when viewed as a secondary variable. Normally autogenerated with @jutul_secondary</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/variable_evaluation.jl#L195-L197">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.get_diagonal_entries-Tuple{JutulEquation, Any}" href="#Jutul.get_diagonal_entries-Tuple{JutulEquation, Any}"><code>Jutul.get_diagonal_entries</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_diagonal_entries(eq::JutulEquation, eq_s)</code></pre><p>Get the diagonal entries of a cache, i.e. the entries where entity type and index equals that of the governing equation.</p><p>Note: Be very careful about modifications to this array, as this is a view into the internal AD buffers and it is very easy to create inconsistent Jacobians.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/equations.jl#L609-L616">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.get_entity_tag-Tuple{Any, Any}" href="#Jutul.get_entity_tag-Tuple{Any, Any}"><code>Jutul.get_entity_tag</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_entity_tag(basetag, entity)</code></pre><p>Combine a base tag (which can be nothing) with a entity to get a tag that captures base tag + entity tag for use with AD initialization.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/ad/ad.jl#L433-L438">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.get_entries-Tuple{CompactAutoDiffCache}" href="#Jutul.get_entries-Tuple{CompactAutoDiffCache}"><code>Jutul.get_entries</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Get entries of autodiff cache. Entries are AD vectors that hold values and derivatives.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/ad/compact.jl#L1-L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.get_entries-Tuple{JutulEquation}" href="#Jutul.get_entries-Tuple{JutulEquation}"><code>Jutul.get_entries</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Get the entries of the main autodiff cache for an equation.</p><p>Note: This only gets the .equation field&#39;s entries.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/ad/ad.jl#L19-L23">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.get_mesh_entity_tag-Tuple{JutulMesh, Vararg{Any}}" href="#Jutul.get_mesh_entity_tag-Tuple{JutulMesh, Vararg{Any}}"><code>Jutul.get_mesh_entity_tag</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_mesh_entity_tag(met::JutulMesh, entity::JutulEntity, tag_group::Symbol, tag_value = missing; throw = true)</code></pre><p>Get the indices tagged for <code>entity</code> in group <code>tag_group</code>, optionally for the specific <code>tag_value</code>. If <code>ismissing(tag_value)</code>, the Dict containing the tag group will be returned.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/core_types.jl#L1168-L1174">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.get_parameters-Tuple{SimulationModel}" href="#Jutul.get_parameters-Tuple{SimulationModel}"><code>Jutul.get_parameters</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_parameters(model::SimulationModel)</code></pre><p>Get the parameter definitions (as <code>OrderedDict</code>) for a given <code>model</code>.</p><p>Parameters are defined as static values in a forward simulation that combine with the primary variables to compute secondary variables and model equations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/models.jl#L42-L49">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.get_primary_variable_ordered_entities-Tuple{SimulationModel}" href="#Jutul.get_primary_variable_ordered_entities-Tuple{SimulationModel}"><code>Jutul.get_primary_variable_ordered_entities</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_primary_variable_ordered_entities(model::SimulationModel)</code></pre><p>Get only the entities where primary variables are present, sorted by their order in the primary variables.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/models.jl#L180-L184">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.get_primary_variables-Tuple{SimulationModel}" href="#Jutul.get_primary_variables-Tuple{SimulationModel}"><code>Jutul.get_primary_variables</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_primary_variables(model::SimulationModel)</code></pre><p>Get the primary variable definitions (as <code>OrderedDict</code>) for a given <code>model</code>.</p><p>Primary variables are sometimes referred to as solution variables or primary unknowns. The set of primary variables completely determines the state of the system together with the <code>parameters</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/models.jl#L5-L13">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.get_secondary_variables-Tuple{SimulationModel}" href="#Jutul.get_secondary_variables-Tuple{SimulationModel}"><code>Jutul.get_secondary_variables</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_secondary_variables(model::SimulationModel)</code></pre><p>Get the secondary variable definitions (as <code>OrderedDict</code>) for a given <code>model</code>.</p><p>Secondary variables are variables that can be computed from the primary variables together with the parameters.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/models.jl#L18-L25">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.get_sparse_arguments-Tuple{Any, Any}" href="#Jutul.get_sparse_arguments-Tuple{Any, Any}"><code>Jutul.get_sparse_arguments</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_sparse_arguments(storage, model)</code></pre><p>Get the [<code>SparsePattern</code>]@ref for the Jacobian matrix of a given simulator storage and corresponding model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/models.jl#L547-L551">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.get_tstr" href="#Jutul.get_tstr"><code>Jutul.get_tstr</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_tstr(dT, lim = 3)</code></pre><p>Get formatted time string of <code>dT</code> given in seconds, limited to <code>lim</code> number of units.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/simulator/utils.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.get_variable-Tuple{SimulationModel, Symbol}" href="#Jutul.get_variable-Tuple{SimulationModel, Symbol}"><code>Jutul.get_variable</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_variable(model::SimulationModel, name::Symbol)</code></pre><p>Get implementation of variable or parameter with name <code>name</code> for the model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/models.jl#L69-L73">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.get_variables-Tuple{SimulationModel}" href="#Jutul.get_variables-Tuple{SimulationModel}"><code>Jutul.get_variables</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_variables(model::SimulationModel)</code></pre><p>Get all variable definitions (as <code>OrderedDict</code>) for a given <code>model</code>.</p><p>This is the union of <a href="#Jutul.get_secondary_variables-Tuple{SimulationModel}"><code>get_secondary_variables</code></a> and <a href="#Jutul.get_primary_variables-Tuple{SimulationModel}"><code>get_primary_variables</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/models.jl#L31-L37">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.global_cell-Tuple{Any, Any}" href="#Jutul.global_cell-Tuple{Any, Any}"><code>Jutul.global_cell</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Local cell -&gt; global cell (full set)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/dd/trivial_map.jl#L23">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.global_face-Tuple{Any, Any}" href="#Jutul.global_face-Tuple{Any, Any}"><code>Jutul.global_face</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Local face -&gt; global face (full set)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/dd/trivial_map.jl#L21">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.initialize_context!-NTuple{4, Any}" href="#Jutul.initialize_context!-NTuple{4, Any}"><code>Jutul.initialize_context!</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Initialize context when setting up a model</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/context.jl#L62-L64">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.initialize_extra_state_fields!-Tuple{Any, JutulModel}" href="#Jutul.initialize_extra_state_fields!-Tuple{Any, JutulModel}"><code>Jutul.initialize_extra_state_fields!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">initialize_extra_state_fields!(state, model::JutulModel)</code></pre><p>Add model-dependent changing variables that need to be in state, but are never AD variables themselves (for example status flags).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/models.jl#L263-L268">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.initialize_storage!-Tuple{Any, JutulModel}" href="#Jutul.initialize_storage!-Tuple{Any, JutulModel}"><code>Jutul.initialize_storage!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">initialize_storage!(storage, model::JutulModel; initialize_state0 = true)</code></pre><p>Initialize the already allocated storage at the beginning of a simulation. Use this to e.g. set up extra stuff in state0 needed for initializing the simulation loop.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/models.jl#L383-L388">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.initialize_variable_value-Tuple{Any, VectorVariables, AbstractVector}" href="#Jutul.initialize_variable_value-Tuple{Any, VectorVariables, AbstractVector}"><code>Jutul.initialize_variable_value</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Initializer for the value of non-scalar primary variables</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/variables/utils.jl#L320-L322">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.interior_cell-Tuple{Any, Any}" href="#Jutul.interior_cell-Tuple{Any, Any}"><code>Jutul.interior_cell</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Local cell in full set -&gt; inner cell (or zero)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/dd/trivial_map.jl#L32">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.interpolation_constant_lookup" href="#Jutul.interpolation_constant_lookup"><code>Jutul.interpolation_constant_lookup</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">interpolation_constant_lookup(X, constant_dx = missing)</code></pre><p>Generate a lookup table for linear interpolation when dx is evenly spaced.</p><p>Note: Setting <code>constant_dx=true</code> can lead to incorrect interpolations if the data is not evenly spaced.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/interpolation.jl#L43-L50">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.jutul_output_path" href="#Jutul.jutul_output_path"><code>Jutul.jutul_output_path</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">pth = jutul_output_path(name = missing; subfolder = &quot;jutul&quot;, basedir = missing, create = true)</code></pre><p>Get path for output. The final path will be found in /basedir/&lt;subfolder/name. If <code>subfolder=missing</code>, the path will be set to /basedir/name instead. <code>name</code> will be autogenerated if not provided.</p><p>Pass the optional input <code>create = false</code> to avoid making the directory. To globally set the default output dir, set <code>ENV[&quot;JUTUL_OUTPUT_PATH&quot;]</code><code>to your desired</code>basedir``.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/utils.jl#L931-L940">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.linear_timestep_selection" href="#Jutul.linear_timestep_selection"><code>Jutul.linear_timestep_selection</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">linear_timestep_selection(x, x0, x1, dt0, dt1)</code></pre><p>Produce linear estimate of timestep <code>dt</code> for some value <code>x</code> from observed observations. If the observations have the same <code>x</code> or <code>dt</code> values, a simple scaling based on the <code>x1</code> value is used.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/timesteps.jl#L179-L185">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.load_balanced_endpoint-Tuple{Any, Any, Any}" href="#Jutul.load_balanced_endpoint-Tuple{Any, Any, Any}"><code>Jutul.load_balanced_endpoint</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">load_balanced_endpoint(block_index, nvals, nblocks)</code></pre><p>Endpoint for interval <code>block_index</code> that subdivides <code>nvals</code> into <code>nblocks</code> in a load balanced manner. This is done by adding one element to the first set of blocks whenever possible.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/partitioning.jl#L209-L215">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.load_balanced_interval-Tuple{Any, Any, Any}" href="#Jutul.load_balanced_interval-Tuple{Any, Any, Any}"><code>Jutul.load_balanced_interval</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">load_balanced_interval(b, n, m)</code></pre><p>Create UnitRange for block b ∈ [1, m] for interval of total length n</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/partitioning.jl#L226-L230">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.local_ad-Tuple{Any, Any, Any}" href="#Jutul.local_ad-Tuple{Any, Any, Any}"><code>Jutul.local_ad</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">local_ad(state::T, index::I, ad_tag::∂T) where {T, I&lt;:Integer, ∂T}</code></pre><p>Create local<em>ad for state for index I of AD tag of type ad</em>tag</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/ad/local_ad.jl#L157-L161">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.local_cell-Tuple{Any, Any}" href="#Jutul.local_cell-Tuple{Any, Any}"><code>Jutul.local_cell</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Global cell -&gt; local cell (full set)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/dd/trivial_map.jl#L26">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.local_face-Tuple{Any, Any}" href="#Jutul.local_face-Tuple{Any, Any}"><code>Jutul.local_face</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Global face -&gt; local face (full set)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/dd/trivial_map.jl#L30">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.local_residual_view-NTuple{4, Any}" href="#Jutul.local_residual_view-NTuple{4, Any}"><code>Jutul.local_residual_view</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">local_residual_view(r_buf, model, eq, equation_offset)</code></pre><p>Get a matrix view of the residual so that, independent of ordering, the column index corresponds to the entity index for the given equation <code>eq</code> starting at <code>equation_offset</code> in the global residual buffer <code>r_buf</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/models.jl#L746-L752">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.maximum_value-Tuple{JutulVariables}" href="#Jutul.maximum_value-Tuple{JutulVariables}"><code>Jutul.maximum_value</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Upper (inclusive) limit for variable.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/variables/utils.jl#L98-L100">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.merge_step_report_errors-Tuple{Any}" href="#Jutul.merge_step_report_errors-Tuple{Any}"><code>Jutul.merge_step_report_errors</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">merge_step_report_errors(data; fn = max)</code></pre><p>Merge step reports errors of the same type using a pair wise reduction (default: max)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/utils.jl#L1001-L1005">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.minimum_value-Tuple{JutulVariables}" href="#Jutul.minimum_value-Tuple{JutulVariables}"><code>Jutul.minimum_value</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Lower (inclusive) limit for variable.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/variables/utils.jl#L103-L105">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.model_accumulation!" href="#Jutul.model_accumulation!"><code>Jutul.model_accumulation!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">model_accumulation!(acc, sim::HelperSimulator, x, dt = 1.0;
    forces = setup_forces(sim.model),
    update_secondary = true,
    kwarg...
)</code></pre><p>Compute the accumulation term into Vector acc.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/simulator/helper.jl#L106-L114">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.model_residual!" href="#Jutul.model_residual!"><code>Jutul.model_residual!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">model_residual!(r, sim, x, x0 = missing, dt = 1.0;
    forces = setup_forces(sim.model),
    include_accumulation = true,
    kwarg...
)</code></pre><p>Fill in the model residual into Vector r.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/simulator/helper.jl#L60-L68">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.model_residual-Union{Tuple{T}, Tuple{HelperSimulator{&lt;:Any, &lt;:Any, &lt;:Any, T}, Any, Vararg{Any}}} where T" href="#Jutul.model_residual-Union{Tuple{T}, Tuple{HelperSimulator{&lt;:Any, &lt;:Any, &lt;:Any, T}, Any, Vararg{Any}}} where T"><code>Jutul.model_residual</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">model_residual(sim::HelperSimulator, x, y = missing; kwarg...)</code></pre><p>Out of place version of <code>model_residual!</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/simulator/helper.jl#L47-L51">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.number_of_cells-Tuple{JutulMesh}" href="#Jutul.number_of_cells-Tuple{JutulMesh}"><code>Jutul.number_of_cells</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">number_of_cells(g)::Integer</code></pre><p>Get the number of cells in a mesh.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/meshes/meshes.jl#L143-L147">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.number_of_degrees_of_freedom-Tuple{JutulModel}" href="#Jutul.number_of_degrees_of_freedom-Tuple{JutulModel}"><code>Jutul.number_of_degrees_of_freedom</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Total number of degrees of freedom for a model, over all primary variables and all entities.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/variables/utils.jl#L14-L16">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.number_of_entities-Tuple{Any, JutulEquation}" href="#Jutul.number_of_entities-Tuple{Any, JutulEquation}"><code>Jutul.number_of_entities</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Get the number of entities (e.g. the number of cells) that the equation is defined on.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/equations.jl#L280-L282">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.number_of_entities-Tuple{Any, JutulVariables}" href="#Jutul.number_of_entities-Tuple{Any, JutulVariables}"><code>Jutul.number_of_entities</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Number of entities (e.g. Cells, Faces) a variable is defined on. By default, each primary variable exists on all cells of a discretized domain</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/variables/utils.jl#L2-L6">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.number_of_entities-Tuple{JutulAutoDiffCache}" href="#Jutul.number_of_entities-Tuple{JutulAutoDiffCache}"><code>Jutul.number_of_entities</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Get number of entities a cache is defined on.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/ad/ad.jl#L3-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.number_of_entities-Tuple{T} where T&lt;:(AbstractVector)" href="#Jutul.number_of_entities-Tuple{T} where T&lt;:(AbstractVector)"><code>Jutul.number_of_entities</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Number of entities for vector stored in state (just the number of elements)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/ad/ad.jl#L9-L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.number_of_entities-Tuple{T} where T&lt;:AbstractArray" href="#Jutul.number_of_entities-Tuple{T} where T&lt;:AbstractArray"><code>Jutul.number_of_entities</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Number of entities for matrix stored in state (convention is number of columns)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/ad/ad.jl#L14-L16">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.number_of_equations-Tuple{Any, JutulEquation}" href="#Jutul.number_of_equations-Tuple{Any, JutulEquation}"><code>Jutul.number_of_equations</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Get the total number of equations on the domain of model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/equations.jl#L287-L289">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.number_of_equations_per_entity-Tuple{JutulModel, JutulEquation}" href="#Jutul.number_of_equations_per_entity-Tuple{JutulModel, JutulEquation}"><code>Jutul.number_of_equations_per_entity</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Get the number of equations per entity. For example, mass balance of two components will have two equations per grid cell (= entity)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/equations.jl#L263-L266">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.number_of_faces-Tuple{Any}" href="#Jutul.number_of_faces-Tuple{Any}"><code>Jutul.number_of_faces</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">number_of_faces(g)::Integer</code></pre><p>Get the number of faces in a mesh.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/meshes/meshes.jl#L150-L154">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.number_of_partials_per_entity-Tuple{SimulationModel, JutulEntity}" href="#Jutul.number_of_partials_per_entity-Tuple{SimulationModel, JutulEntity}"><code>Jutul.number_of_partials_per_entity</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">number_of_partials_per_entity(model::SimulationModel, entity::JutulEntity)</code></pre><p>Get the number of local partial derivatives per entity in a <code>model</code> for a given <a href="#Jutul.JutulEntity"><code>JutulEntity</code></a>. This is the sum of <a href="#Jutul.degrees_of_freedom_per_entity-Tuple{Any, ScalarVariable}"><code>degrees_of_freedom_per_entity</code></a> for all primary variables defined on <code>entity</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/models.jl#L203-L208">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.number_of_values" href="#Jutul.number_of_values"><code>Jutul.number_of_values</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Total number of values for a model, for a given type of variables over all entities</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/variables/utils.jl#L34-L36">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.numerical_eltype-Union{Tuple{AbstractArray{T}}, Tuple{T}} where T" href="#Jutul.numerical_eltype-Union{Tuple{AbstractArray{T}}, Tuple{T}} where T"><code>Jutul.numerical_eltype</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">numerical_eltype(x::AbstractArray{T}) where T</code></pre><p>Get the numerical eltype (i.e. the inner type of the element type that could potentially be AD)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/ad/local_ad.jl#L105-L110">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.numerical_type-Tuple{T} where T&lt;:Real" href="#Jutul.numerical_type-Tuple{T} where T&lt;:Real"><code>Jutul.numerical_type</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">numerical_type(::T) where T</code></pre><p>Get the numerical eltype (i.e. the inner type of the element type that could potentially be AD). This function should be overloaded if you have a custom type that wraps a numeric/potentially AD type.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/ad/local_ad.jl#L119-L125">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.parameters_jacobian_wrt_data_domain-Tuple{Any}" href="#Jutul.parameters_jacobian_wrt_data_domain-Tuple{Any}"><code>Jutul.parameters_jacobian_wrt_data_domain</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">parameters_jacobian_wrt_data_domain(model; copy = true, config = nothing)</code></pre><p>Compute the (sparse) Jacobian of parameters with respect to data<em>domain values (i.e. floating point values). Optionally, <code>config</code> can be passed to allow `vectorize</em>variables` to only include a subset of the parameters.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/variables/vectorization.jl#L177-L183">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.partition" href="#Jutul.partition"><code>Jutul.partition</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">partition(N::AbstractMatrix, num_coarse, weights = ones(size(N, 2)); partitioner = MetisPartitioner(), groups = nothing, n = maximum(N), group_by_weights = false, buffer_group = true)</code></pre><p>Partition based on neighborship (with optional groups kept contigious after partitioning)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/partitioning.jl#L137-L142">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.partition_hypergraph" href="#Jutul.partition_hypergraph"><code>Jutul.partition_hypergraph</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">partition_hypergraph(g, n::Int, partitioner = MetisPartitioner(); expand = true)</code></pre><p>Partition a hypergraph from <a href="#Jutul.setup_partitioner_hypergraph-Tuple{Matrix{Int64}}"><code>setup_partitioner_hypergraph</code></a> using a given partitioner. If the optional <code>expand</code> parameter is set to true the result will be expanded to the full graph (i.e. where groups are not condensed).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/partitioning.jl#L331-L337">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.physical_representation-Tuple{Any}" href="#Jutul.physical_representation-Tuple{Any}"><code>Jutul.physical_representation</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">physical_representation(x)</code></pre><p>Get the physical representation of an object. The physical representation is usually some kind of mesh or domain that represents a physical domain.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/domains.jl#L7-L12">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.physical_representation-Tuple{DataDomain}" href="#Jutul.physical_representation-Tuple{DataDomain}"><code>Jutul.physical_representation</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">physical_representation(x::DataDomain)</code></pre><p>Get the underlying physical representation (domain or mesh) that is wrapped.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/domains.jl#L71-L75">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.physical_representation-Tuple{DiscretizedDomain}" href="#Jutul.physical_representation-Tuple{DiscretizedDomain}"><code>Jutul.physical_representation</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">physical_representation(x::DiscretizedDomain)</code></pre><p>Get the underlying physical representation (domain or mesh) that was discretized.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/domains.jl#L23-L27">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.physical_representation-Tuple{SimulationModel}" href="#Jutul.physical_representation-Tuple{SimulationModel}"><code>Jutul.physical_representation</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">physical_representation(m::SimulationModel)</code></pre><p>Get the underlying physical representation for the model (domain or mesh)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/core_types/core_types.jl#L319-L323">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.pick_next_timestep-Tuple{IterationTimestepSelector, Vararg{Any, 9}}" href="#Jutul.pick_next_timestep-Tuple{IterationTimestepSelector, Vararg{Any, 9}}"><code>Jutul.pick_next_timestep</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">pick_next_timestep(sel::IterationTimestepSelector, sim, config, dt_prev, dT, forces, reports, current_reports, step_index, new_step)</code></pre><p>Pick the next time-step for <code>IterationTimestepSelector</code>. This function uses the number of iterations from previous timesteps to estimate the relationship between the last and the new time step.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/timesteps.jl#L61-L67">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.prepare_step_storage-Tuple{Any, Any, Missing}" href="#Jutul.prepare_step_storage-Tuple{Any, Any, Missing}"><code>Jutul.prepare_step_storage</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">prepare_step_storage(storage, model, ::Missing)</code></pre><p>Initialize storage for prepare<em>step</em>handler.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/simulator/simulator.jl#L58-L62">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.read_results-Tuple{Any}" href="#Jutul.read_results-Tuple{Any}"><code>Jutul.read_results</code></a> — <span class="docstring-category">Method</span></header><section><div><p>states, reports = read<em>results(pth; read</em>states = true, read_reports = true)</p><p>Read results from a given <code>output_path</code> provded to <code>simulate</code> or <code>simulator_config</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/utils.jl#L608-L612">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.relative_increment_limit-Tuple{JutulVariables}" href="#Jutul.relative_increment_limit-Tuple{JutulVariables}"><code>Jutul.relative_increment_limit</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Relative allowable change for variable during a nonlinear update. A variable with value |x| and relative limit 0.2 cannot change more than |x|*0.2.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/variables/utils.jl#L91-L95">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.replace_variables!-Tuple{Any}" href="#Jutul.replace_variables!-Tuple{Any}"><code>Jutul.replace_variables!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">replace_variables!(model, throw = true, varname = vardef, varname2 = vardef2)</code></pre><p>Replace one or more variables that already exists (primary, secondary or parameters).</p><p><strong>Arguments</strong></p><ul><li><code>model</code>: instance where variables is to be replaced</li><li><code>varname=vardef::JutulVariables</code>: replace variable with <code>varname</code> by <code>vardef</code></li><li><code>throw=true</code>: throw an error if the named variable definition is not found in primary or secondary, otherwise silently return</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/models.jl#L133-L142">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.scalarize_primary_variable-Tuple{Any, Any, ScalarVariable, Any}" href="#Jutul.scalarize_primary_variable-Tuple{Any, Any, ScalarVariable, Any}"><code>Jutul.scalarize_primary_variable</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">scalarize_primary_variable(model, source_vec, var::Jutul.ScalarVariable, index)</code></pre><p>Scalarize a primary variable. For scalars, this means getting the value itself.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/variables/scalarization.jl#L40-L44">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.scalarize_primary_variables" href="#Jutul.scalarize_primary_variables"><code>Jutul.scalarize_primary_variables</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">scalarize_primary_variables(model, state, pvars = model.primary_variables)</code></pre><p>Create a vector where each entry corresponds to a tuple of values that minimally defines the given variables. All variables must belong to the same type of entity. This is checked by this function.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/variables/scalarization.jl#L91-L97">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.scalarize_primary_variables!-Union{Tuple{T}, Tuple{Array{Jutul.ScalarizedJutulVariables{T}, 1}, Any, Any, NamedTuple}} where T" href="#Jutul.scalarize_primary_variables!-Union{Tuple{T}, Tuple{Array{Jutul.ScalarizedJutulVariables{T}, 1}, Any, Any, NamedTuple}} where T"><code>Jutul.scalarize_primary_variables!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">scalarize_primary_variables!(V::Vector{T}, model, state, pvars::NamedTuple) where T</code></pre><p>Scalarize into array. See <a href="@ref">scalarize<em>primary</em>variables</a> for more details.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/variables/scalarization.jl#L115-L119">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.scalarized_primary_variable_type-Tuple{Any, ScalarVariable}" href="#Jutul.scalarized_primary_variable_type-Tuple{Any, ScalarVariable}"><code>Jutul.scalarized_primary_variable_type</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">scalarized_primary_variable_type(model, var::Jutul.ScalarVariable)</code></pre><p>Get the type of a scalarized numerical variable (=Float64 for variables that are already represented as scalars)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/variables/scalarization.jl#L17-L22">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.set_default_tolerances-Tuple{Any}" href="#Jutul.set_default_tolerances-Tuple{Any}"><code>Jutul.set_default_tolerances</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">set_default_tolerances(model)</code></pre><p>Set default tolerances for the nonlinear convergence check of the governing equations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/models.jl#L764-L768">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.set_parameters!-Tuple{Any}" href="#Jutul.set_parameters!-Tuple{Any}"><code>Jutul.set_parameters!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">set_parameters!(model, parname = pardef)</code></pre><p>Set a parameter with name <code>varname</code> to the definition <code>vardef</code> (adding if it does not exist)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/models.jl#L115-L119">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.set_primary_variables!-Tuple{Any}" href="#Jutul.set_primary_variables!-Tuple{Any}"><code>Jutul.set_primary_variables!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">set_primary_variables!(model, varname = vardef)
set_primary_variables!(model, varname1 = vardef1, varname2 = vardef2)</code></pre><p>Set a primary variable with name <code>varname</code> to the definition <code>vardef</code> (adding if it does not exist)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/models.jl#L92-L97">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.set_secondary_variables!-Tuple{Any}" href="#Jutul.set_secondary_variables!-Tuple{Any}"><code>Jutul.set_secondary_variables!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">set_secondary_variables!(model, varname = vardef)
set_secondary_variables!(model, varname1 = vardef1, varname2 = vardef2)</code></pre><p>Set a secondary variable with name <code>varname</code> to the definition <code>vardef</code> (adding if it does not exist)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/models.jl#L103-L109">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.setup_adjoint_storage-Tuple{Any}" href="#Jutul.setup_adjoint_storage-Tuple{Any}"><code>Jutul.setup_adjoint_storage</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">setup_adjoint_storage(model; state0 = setup_state(model), parameters = setup_parameters(model))</code></pre><p>Set up storage for use with <code>solve_adjoint_sensitivities!</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/ad/gradients.jl#L100-L104">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.setup_forces-Tuple{JutulModel}" href="#Jutul.setup_forces-Tuple{JutulModel}"><code>Jutul.setup_forces</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">setup_forces(model::JutulModel; force_name = force_value)</code></pre><p>Set up forces for a given model. Keyword arguments varies depending on what the model supports.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/models.jl#L869-L874">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.setup_parameter_optimization-Tuple{Any, Any, Any, Any, Any, Any, Vararg{Any}}" href="#Jutul.setup_parameter_optimization-Tuple{Any, Any, Any, Any, Any, Any, Vararg{Any}}"><code>Jutul.setup_parameter_optimization</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">setup_parameter_optimization(model, state0, param, dt, forces, G, opt_cfg = optimization_config(model, param);
                                                        grad_type = :adjoint,
                                                        config = nothing,
                                                        print = 1,
                                                        copy_case = true,
                                                        param_obj = false,
                                                        kwarg...)</code></pre><p>Set up function handles for optimizing the case defined by the inputs to <code>simulate</code> together with a per-timestep objective function <code>G</code>.</p><p>Generally calling either of the functions will mutate the data Dict. The options are: F<em>o(x) -&gt; evaluate objective dF</em>o(dFdx, x) -&gt; evaluate gradient of objective, mutating dFdx (may trigger evaluation of F<em>o) F</em>and_dF(F, dFdx, x) -&gt; evaluate F and/or dF. Value of nothing will mean that the corresponding entry is skipped.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/simulator/optimization.jl#L17-L34">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.setup_parameters-Tuple{DataDomain, JutulModel}" href="#Jutul.setup_parameters-Tuple{DataDomain, JutulModel}"><code>Jutul.setup_parameters</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">setup_parameters(model::JutulModel; name = value)</code></pre><p>Set up a parameter storage for a given model with values for the parameter defined in the model.</p><p><strong>Arguments</strong></p><ul><li><code>name=value</code>: The name of the parameter together with the value(s) of the parameter.</li></ul><p>A scalar (or short vector of the right size for <a href="#Jutul.VectorVariables"><code>VectorVariables</code></a>) will be repeated over the entire domain, while a vector (or matrix for <a href="#Jutul.VectorVariables"><code>VectorVariables</code></a>) with length (number of columns for <a href="#Jutul.VectorVariables"><code>VectorVariables</code></a>) equal to the entity count (for example, number of cells for a cell variable) will be used directly.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/models.jl#L286-L296">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.setup_partitioner_hypergraph-Tuple{Matrix{Int64}}" href="#Jutul.setup_partitioner_hypergraph-Tuple{Matrix{Int64}}"><code>Jutul.setup_partitioner_hypergraph</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">setup_partitioner_hypergraph(N::Matrix{Int};
    num_nodes::Int = maximum(N),
    num_edges::Int = size(N, 2),
    node_weights::Vector{Int} = ones(Int, num_nodes),
    edge_weights::Vector{Int} = ones(Int, num_edges),
    groups = [Int[]]
)</code></pre><p>Set up a hypergraph structure for a given neighborship matrix. <code>N</code> should be a matrix with two rows, with one pair of cells in each column. Optionally node and edge weights can be provided. If a list of groups are provided, these nodes will be accumulated together in the hypergraph.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/partitioning.jl#L237-L250">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.setup_state!" href="#Jutul.setup_state!"><code>Jutul.setup_state!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">setup_state!(state, model::JutulModel, init_values::AbstractDict = Dict())</code></pre><p>Initialize primary variables and other state fields, given initial values as a Dict</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/models.jl#L248-L252">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.setup_state-Tuple{JutulModel, Vararg{Any}}" href="#Jutul.setup_state-Tuple{JutulModel, Vararg{Any}}"><code>Jutul.setup_state</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">setup_state(model::JutulModel, name1 = value1, name2 = value2)</code></pre><p>Set up a state for a given model with values for the primary variables defined in the model. Normally all primary variables must be initialized in this way.</p><p><strong>Arguments</strong></p><ul><li><code>name=value</code>: The name of the primary variable together with the value(s) used to initialize the primary variable.</li></ul><p>A scalar (or short vector of the right size for <a href="#Jutul.VectorVariables"><code>VectorVariables</code></a>) will be repeated over the entire domain, while a vector (or matrix for <a href="#Jutul.VectorVariables"><code>VectorVariables</code></a>) with length (number of columns for <a href="#Jutul.VectorVariables"><code>VectorVariables</code></a>) equal to the entity count (for example, number of cells for a cell variable) will be used directly.</p><p>Note: You likely want to overload [<code>setup_state!</code>]@ref for a custom model instead of <code>setup_state</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/models.jl#L220-L233">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.setup_state_and_parameters-Tuple{DataDomain, JutulModel, AbstractDict}" href="#Jutul.setup_state_and_parameters-Tuple{DataDomain, JutulModel, AbstractDict}"><code>Jutul.setup_state_and_parameters</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">state, prm = setup_state_and_parameters(model, init)</code></pre><p>Simultaneously set up state and parameters from a single <code>init</code> file (typically a <code>Dict</code> containing values that might either be initial values or parameters)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/models.jl#L320-L325">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.setup_storage!-Tuple{Any, JutulModel}" href="#Jutul.setup_storage!-Tuple{Any, JutulModel}"><code>Jutul.setup_storage!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">setup_storage!(storage, model::JutulModel; setup_linearized_system = true,
                                                setup_equations = true,
                                                state0 = setup_state(model),
                                                parameters = setup_parameters(model),
                                                tag = nothing,
                                                state0_ad = false,
                                                state_ad = true,
                                                kwarg...)</code></pre><p>Allocate storage for a given model. The storage consists of all dynamic quantities used in the simulation. The default implementation allocates properties, equations and linearized system.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/models.jl#L400-L412">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.setup_storage-Tuple{JutulModel}" href="#Jutul.setup_storage-Tuple{JutulModel}"><code>Jutul.setup_storage</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">setup_storage(model::JutulModel; kwarg...)</code></pre><p>Allocate storage for the model. You should overload setup_storage! if you have a custom definition.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/models.jl#L371-L376">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.si_unit-Tuple{Symbol}" href="#Jutul.si_unit-Tuple{Symbol}"><code>Jutul.si_unit</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">si_unit(u::Union{String, Symbol})</code></pre><p>Get the multiplicative SI unit conversion factor for a single unit. The return value is given so that <code>x*si_unit(:name)</code> will convert <code>x</code> to the SI representation of the unit with the given name.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; si_unit(:day) # Get days represented as seconds
86400.0</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/units/interface.jl#L73-L85">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.si_units-Tuple" href="#Jutul.si_units-Tuple"><code>Jutul.si_units</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">si_units(u1, arg...)</code></pre><p>Get multiplicative SI unit conversion factors for multiple units simultaneously. The return value will be a <code>Tuple</code> of values, one for each input argument. Each input arguments can be either a <code>String</code> a <code>Symbol</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; meter, hour = si_units(:meter, :hour)
(1.0, 3600.0)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/units/interface.jl#L56-L68">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.simulate!-Tuple{JutulSimulator, AbstractVector}" href="#Jutul.simulate!-Tuple{JutulSimulator, AbstractVector}"><code>Jutul.simulate!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">simulate!(sim::JutulSimulator, timesteps::AbstractVector; forces = nothing,
                                                               config = nothing,
                                                               initialize = true,
                                                               restart = nothing,
                                                               state0 = nothing,
                                                               parameters = nothing,
                                                               kwarg...)</code></pre><p>Non-allocating (or perhaps less allocating) version of <a href="#Jutul.simulate!-Tuple{JutulSimulator, AbstractVector}"><code>simulate!</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>initialize=true</code>: Perform internal updates as if this is the first time </li></ul><p>See also <a href="#Jutul.simulate-Tuple{Any, JutulModel, AbstractVector}"><code>simulate</code></a> for additional supported input arguments.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/simulator/simulator.jl#L125-L140">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.simulate-Tuple{Any, JutulModel, AbstractVector}" href="#Jutul.simulate-Tuple{Any, JutulModel, AbstractVector}"><code>Jutul.simulate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">simulate(state0, model, timesteps, parameters = setup_parameters(model))
simulate(state0, model, timesteps, info_level = 3)
simulate(state0, model, timesteps; &lt;keyword arguments&gt;)</code></pre><p>Simulate a set of <code>timesteps</code> with <code>model</code> for the given initial <code>state0</code> and optionally specific parameters. Additional keyword arguments are passed onto <a href="#Jutul.simulator_config-Tuple{Any}"><code>simulator_config</code></a> and <a href="#Jutul.simulate!-Tuple{JutulSimulator, AbstractVector}"><code>simulate!</code></a>. This interface is primarily for convenience, as all storage for the simulator is allocated upon use and discared upon return. If you want to perform multiple simulations with the same model it is advised to instead instantiate <a href="#Jutul.Simulator-Tuple{Any}"><code>Simulator</code></a>  and combine it with <a href="#Jutul.simulate!-Tuple{JutulSimulator, AbstractVector}"><code>simulate!</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>state0::Dict</code>: initial state, typically created using <a href="#Jutul.setup_state-Tuple{JutulModel, Vararg{Any}}"><code>setup_state</code></a> for the <code>model</code> in use.</li><li><code>model::JutulModel</code>: model that describes the discretized system to solve, for example <a href="#Jutul.SimulationModel-Tuple{Any, Any}"><code>SimulationModel</code></a> or <a href="#Jutul.MultiModel"><code>MultiModel</code></a>.</li><li><code>timesteps::AbstractVector</code>: Vector of desired report steps. The simulator will perform time integration until <code>sum(timesteps)</code>  is reached, providing outputs at the end of each report step.</li><li><code>parameters=setup_parameters(model)</code>: Optional overrides the default parameters for the model.</li><li><code>forces=nothing</code>: Either <code>nothing</code> (for no forces), a single set of forces from <code>setup_forces(model)</code> or a <code>Vector</code> of such forces with equal length to <code>timesteps</code>.</li><li><code>restart=nothing</code>: If an integer is provided, the simulation will attempt to restart from that step. Requires that <code>output_path</code> is provided here or in the <code>config</code>.</li><li><code>config=simulator_config(model)</code>: Configuration <code>Dict</code> that holds many fine grained settings for output, linear solver, time-steps, outputs etc.</li></ul><p>Additional arguments are passed onto <a href="#Jutul.simulator_config-Tuple{Any}"><code>simulator_config</code></a>.</p><p>See also <a href="#Jutul.simulate!-Tuple{JutulSimulator, AbstractVector}"><code>simulate!</code></a>, <a href="#Jutul.Simulator-Tuple{Any}"><code>Simulator</code></a>, <a href="#Jutul.SimulationModel-Tuple{Any, Any}"><code>SimulationModel</code></a>, <a href="#Jutul.simulator_config-Tuple{Any}"><code>simulator_config</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/simulator/simulator.jl#L78-L103">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.simulate-Tuple{Any, JutulSimulator, AbstractVector}" href="#Jutul.simulate-Tuple{Any, JutulSimulator, AbstractVector}"><code>Jutul.simulate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">simulate(state0, sim::JutulSimulator, timesteps::AbstractVector; parameters = nothing, kwarg...)</code></pre><p>Simulate a set of <code>timesteps</code> with <code>simulator</code> for the given initial <code>state0</code> and optionally specific parameters.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/simulator/simulator.jl#L114-L118">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.simulator_config-Tuple{Any}" href="#Jutul.simulator_config-Tuple{Any}"><code>Jutul.simulator_config</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">simulator_config(sim; info_level = 3, linear_solver = GenericKrylov())</code></pre><p>Set up a simulator configuration object that can be passed onto <a href="#Jutul.simulate!-Tuple{JutulSimulator, AbstractVector}"><code>simulate!</code></a>.</p><p>There are many options available to configure a given simulator. The best way to get an overview of these possible configuration options is to instatiate the config without any arguments and inspecting the resulting table by calling <code>simulator_config(sim)</code> in the REPL.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/simulator/config.jl#L95-L105">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.solve_adjoint_sensitivities!-NTuple{6, Any}" href="#Jutul.solve_adjoint_sensitivities!-NTuple{6, Any}"><code>Jutul.solve_adjoint_sensitivities!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">solve_adjoint_sensitivities!(∇G, storage, states, state0, timesteps, G; forces = setup_forces(model))</code></pre><p>Non-allocating version of <code>solve_adjoint_sensitivities</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/ad/gradients.jl#L206-L210">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.solve_adjoint_sensitivities-NTuple{4, Any}" href="#Jutul.solve_adjoint_sensitivities-NTuple{4, Any}"><code>Jutul.solve_adjoint_sensitivities</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">solve_adjoint_sensitivities(model, states, reports_or_timesteps, G; extra_timing = false, state0 = setup_state(model), forces = setup_forces(model), raw_output = false, kwarg...)</code></pre><p>Compute sensitivities of <code>model</code> parameter with name <code>target</code> for objective function <code>G</code>.</p><p>The objective function is at the moment assumed to be a sum over all states on the form: <code>obj = Σₙ G(model, state, dt_n, n, forces_for_step_n)</code></p><p>Solves the adjoint equations: For model equations F the gradient with respect to parameters p is     ∇ₚG = Σₙ (∂Fₙ / ∂p)ᵀ λₙ where n ∈ [1, N]. Given Lagrange multipliers λₙ from the adjoint equations     (∂Fₙ / ∂xₙ)ᵀ λₙ = - (∂J / ∂xₙ)ᵀ - (∂Fₙ₊₁ / ∂xₙ)ᵀ λₙ₊₁ where the last term is omitted for step n = N and G is the objective function.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/ad/gradients.jl#L3-L16">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.solve_numerical_sensitivities-NTuple{5, Any}" href="#Jutul.solve_numerical_sensitivities-NTuple{5, Any}"><code>Jutul.solve_numerical_sensitivities</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">solve_numerical_sensitivities(model, states, reports, G, target;
                                            forces = setup_forces(model),
                                            state0 = setup_state(model),
                                            parameters = setup_parameters(model),
                                            epsilon = 1e-8)</code></pre><p>Compute sensitivities of <code>model</code> parameter with name <code>target</code> for objective function <code>G</code>.</p><p>This method uses numerical perturbation and is primarily intended for testing of <code>solve_adjoint_sensitivities</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/ad/gradients.jl#L572-L582">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.solve_timestep!-NTuple{5, Any}" href="#Jutul.solve_timestep!-NTuple{5, Any}"><code>Jutul.solve_timestep!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">solve_timestep!(sim, dT, forces, max_its, config; &lt;keyword arguments&gt;)</code></pre><p>Internal function for solving a single time-step with fixed driving forces.</p><p><strong>Arguments</strong></p><ul><li><code>sim</code>: <code>Simulator</code> instance.</li><li><code>dT</code>: time-step to be solved</li><li><code>forces</code>: Driving forces for the time-step</li><li><code>max_its</code>: Maximum number of steps/Newton iterations.</li><li><code>config</code>: Configuration for solver (typically output from <code>simulator_config</code>).</li></ul><p>Note: This function is exported for fine-grained simulation workflows. The general <a href="#Jutul.simulate-Tuple{Any, JutulModel, AbstractVector}"><code>simulate</code></a> interface is both easier to use and performs additional validation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/simulator/simulator.jl#L231-L245">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.subvariable-Tuple{Any, Any}" href="#Jutul.subvariable-Tuple{Any, Any}"><code>Jutul.subvariable</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">subvariable(var, map)</code></pre><p>Get subvariable of Jutul variable</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/dd/submodels.jl#L140-L144">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.successful_reports" href="#Jutul.successful_reports"><code>Jutul.successful_reports</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">successful_reports(old_reports, current_reports, step_index, n = 1)</code></pre><p>Get the <code>n</code> last successful solve reports from all previous reports (old_reports) and the current ministep set.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/timesteps.jl#L151-L156">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.synchronize-Tuple{JutulContext}" href="#Jutul.synchronize-Tuple{JutulContext}"><code>Jutul.synchronize</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Synchronize backend after allocations.</p><p>Some backends may require notification that storage has been allocated.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/context.jl#L66-L71">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.tpfv_geometry" href="#Jutul.tpfv_geometry"><code>Jutul.tpfv_geometry</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">tpfv_geometry(g)</code></pre><p>Generate two-point finite-volume geometry for a given grid, if supported.</p><p>See also <a href="#Jutul.TwoPointFiniteVolumeGeometry"><code>TwoPointFiniteVolumeGeometry</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/meshes/meshes.jl#L10-L16">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.transfer-Tuple{Any, Any}" href="#Jutul.transfer-Tuple{Any, Any}"><code>Jutul.transfer</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Transfer v to the representation expected by a given context.</p><p>For the defalt context, the transfer function does nothing. For other context such as the CUDA version, it may convert integers and floats to other types (e.g. Float32) and Arrays to CuArrays.</p><p>You will likely have to implement some transfer operators for your own types if you want to simulate with a non-default context.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/context.jl#L1-L10">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.two_point_potential_drop-NTuple{5, Real}" href="#Jutul.two_point_potential_drop-NTuple{5, Real}"><code>Jutul.two_point_potential_drop</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Two-point potential drop with gravity (generic)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/conservation/flux.jl#L248-L250">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.unsafe_reinterpret-Tuple{Any, Any, Any}" href="#Jutul.unsafe_reinterpret-Tuple{Any, Any, Any}"><code>Jutul.unsafe_reinterpret</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">unsafe_reinterpret(Vt, v, n)</code></pre><p>Unsafely reinterpret v as a n length vector of value type Vt</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/linsolve/utils.jl#L95-L99">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.update_before_step!-NTuple{4, Any}" href="#Jutul.update_before_step!-NTuple{4, Any}"><code>Jutul.update_before_step!</code></a> — <span class="docstring-category">Method</span></header><section><div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/models.jl#L923-L925">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.update_equation!-Tuple{Any, JutulEquation, Any, Any, Any}" href="#Jutul.update_equation!-Tuple{Any, JutulEquation, Any, Any, Any}"><code>Jutul.update_equation!</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Update equation based on currently stored properties</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/equations.jl#L512-L514">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.update_equations!" href="#Jutul.update_equations!"><code>Jutul.update_equations!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">update_equations!(storage, model, dt = nothing)</code></pre><p>Update the governing equations using the current set of primary variables, parameters and secondary variables. Does not fill linearized system.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/models.jl#L703-L707">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.update_equations_and_apply_forces!-NTuple{4, Any}" href="#Jutul.update_equations_and_apply_forces!-NTuple{4, Any}"><code>Jutul.update_equations_and_apply_forces!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">update_equations_and_apply_forces!(storage, model, dt, forces; time = NaN)</code></pre><p>Update the model equations and apply boundary conditions and forces. Does not fill linearized system.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/models.jl#L685-L689">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.update_linearized_system!" href="#Jutul.update_linearized_system!"><code>Jutul.update_linearized_system!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">update_linearized_system!(storage, model::JutulModel; &lt;keyword arguments&gt;)</code></pre><p>Update the linearized system with the current set of equations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/models.jl#L718-L722">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.update_linearized_system_equation!-Tuple{AbstractArray, Any, Any, JutulEquation, CompactAutoDiffCache}" href="#Jutul.update_linearized_system_equation!-Tuple{AbstractArray, Any, Any, JutulEquation, CompactAutoDiffCache}"><code>Jutul.update_linearized_system_equation!</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Update a linearized system based on the values and derivatives in the equation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/equations.jl#L490-L492">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.update_secondary_variable!-Tuple{Any, Any, Any, Any, Any, Vararg{Any}}" href="#Jutul.update_secondary_variable!-Tuple{Any, Any, Any, Any, Any, Vararg{Any}}"><code>Jutul.update_secondary_variable!</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Update a secondary variable. Normally autogenerated with @jutul_secondary</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/variable_evaluation.jl#L203-L205">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.update_state_dependents!-Tuple{Any, JutulModel, Any, Any}" href="#Jutul.update_state_dependents!-Tuple{Any, JutulModel, Any, Any}"><code>Jutul.update_state_dependents!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">update_state_dependents!(storage, model, dt, forces; time = NaN, update_secondary = true)</code></pre><p>Perform updates of everything that depends on the state: A full linearization for the current primary variables.</p><p>This includes properties, governing equations and the linearized system itself.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/models.jl#L670-L676">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.update_values!-Tuple{AbstractArray, AbstractArray}" href="#Jutul.update_values!-Tuple{AbstractArray, AbstractArray}"><code>Jutul.update_values!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">update_values!(x, dx)</code></pre><p>Replace values (for non-Real types, direct assignment)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/ad/ad.jl#L384-L388">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.update_values!-Tuple{AbstractArray{&lt;:Real}, AbstractArray{&lt;:Real}}" href="#Jutul.update_values!-Tuple{AbstractArray{&lt;:Real}, AbstractArray{&lt;:Real}}"><code>Jutul.update_values!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">update_values!(x, dx)</code></pre><p>Replace values of <code>x</code> in-place by <code>y</code>, leaving <code>x</code> with the values of y and the partials of <code>x</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/ad/ad.jl#L374-L378">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.value-Tuple{AbstractDict}" href="#Jutul.value-Tuple{AbstractDict}"><code>Jutul.value</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">value(d::Dict)</code></pre><p>Call value on all elements of some Dict.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/ad/ad.jl#L404-L407">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.value-Tuple{Any}" href="#Jutul.value-Tuple{Any}"><code>Jutul.value</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Take value of AD.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/ad/ad.jl#L393-L395">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.values_per_entity-Tuple{Any, JutulVariables}" href="#Jutul.values_per_entity-Tuple{Any, JutulVariables}"><code>Jutul.values_per_entity</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Number of values held by a primary variable. Normally this is equal to the number of degrees of freedom, but some special primary variables are most conveniently defined by having N values and N-1 independent variables.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/variables/utils.jl#L79-L82">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.variable_scale-Tuple{JutulVariables}" href="#Jutul.variable_scale-Tuple{JutulVariables}"><code>Jutul.variable_scale</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Define a &quot;typical&quot; numerical value for a variable to scale the linear system entries.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/variables/utils.jl#L188-L190">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.write_reports_to_mat_format" href="#Jutul.write_reports_to_mat_format"><code>Jutul.write_reports_to_mat_format</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">write_reports_to_mat_format(reports::Vector, path = jutul_output_path(); name = &quot;report&quot;, config = missing, verbose = false)</code></pre><p>Write the reports to MAT files named &quot;report<em>1&quot;, &quot;report</em>2&quot;, ... to the given path.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/utils.jl#L1090-L1094">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.@jutul_secondary-Tuple{Any}" href="#Jutul.@jutul_secondary-Tuple{Any}"><code>Jutul.@jutul_secondary</code></a> — <span class="docstring-category">Macro</span></header><section><div><p>Designate the function as updating a secondary variable.</p><p>A generic evaluator is then defined, together with a function for getting the dependencies of that function upon the state. This is most easily documented with an example. If we define the following function annotated with the macro when updating the array containing the values of <code>MyVarType</code> realized for some model:</p><pre><code class="language-julia hljs">@jutul_secondary function some_fn!(target, var::MyVarType, model, a, b, c, ix)
    for i in ix
        target[i] = a[i] + b[i] / c[i]
    end
end</code></pre><p>The purpose of the macro is to translate this into two functions. The first defines for the dependencies of the function with respect to the fields of the state (primary variables, secondary variables and parameters):</p><pre><code class="language-julia hljs">function get_dependencies(var::MyVarType, model)
   return (:a, :b, :c)
end</code></pre><p>The second function defines a generic version that takes in state, and automatically expands the set of dependencies into <code>getfield</code> calls.</p><pre><code class="language-julia hljs">function update_secondary_variable!(array_target, var::MyVarType, model, state, ix)
    some_fn!(array_target, var, model, state.a, state.b, state.c, ix)
end</code></pre><p>Note that the input names of arguments 4 to end-1 matter, as these will be fetched from state, exactly as written.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.34/src/variable_evaluation.jl#L4-L37">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../man/advanced/compiled/">« Standalone reservoir simulator</a><a class="docs-footer-nextpage" href="../../extras/refs/">References »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.5.0 on <span class="colophon-date" title="Thursday 27 June 2024 21:25">Thursday 27 June 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
