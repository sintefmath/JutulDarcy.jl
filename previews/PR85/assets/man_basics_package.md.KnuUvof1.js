import{_ as e,c as l,j as t,a as s,G as r,a5 as n,B as h,o as p}from"./chunks/framework.CGrcyYnv.js";const f=JSON.parse('{"title":"Package docstring","description":"","frontmatter":{},"headers":[],"relativePath":"man/basics/package.md","filePath":"man/basics/package.md","lastUpdated":null}'),o={name:"man/basics/package.md"},k={class:"jldocstring custom-block",open:""};function d(g,i,u,c,E,y){const a=h("Badge");return p(),l("div",null,[i[3]||(i[3]=t("h1",{id:"Package-docstring",tabindex:"-1"},[s("Package docstring "),t("a",{class:"header-anchor",href:"#Package-docstring","aria-label":'Permalink to "Package docstring {#Package-docstring}"'},"â€‹")],-1)),t("details",k,[t("summary",null,[i[0]||(i[0]=t("a",{id:"JutulDarcy",href:"#JutulDarcy"},[t("span",{class:"jlbinding"},"JutulDarcy")],-1)),i[1]||(i[1]=s()),r(a,{type:"info",class:"jlObjectType jlModule",text:"Module"})]),i[2]||(i[2]=n(`<p><a href="https://zenodo.org/badge/latestdoi/477727603" target="_blank" rel="noreferrer"><img src="https://zenodo.org/badge/477727603.svg" alt="Zenodo"></a> <a href="https://sintefmath.github.io/JutulDarcy.jl/dev/" target="_blank" rel="noreferrer"><img src="https://img.shields.io/badge/docs-dev-blue.svg" alt="Dev"></a> <a href="https://github.com/sintefmath/JutulDarcy.jl/actions/workflows/CI.yml?query=branch%3Amain" target="_blank" rel="noreferrer"><img src="https://github.com/sintefmath/JutulDarcy.jl/actions/workflows/CI.yml/badge.svg?branch=main" alt="Build Status"></a></p><p><a href="https://sintefmath.github.io/JutulDarcy.jl/dev/" target="_blank" rel="noreferrer"><img src="https://github.com/sintefmath/JutulDarcy.jl/raw/main/docs/src/assets/logo_wide.png" alt="Jutul Darcy logo"></a></p><div class="tip custom-block github-alert"><p class="custom-block-title">Visit the docs at https://sintefmath.github.io/JutulDarcy.jl/dev/</p><p></p></div><p><strong>Reservoir simulation in Julia</strong></p><p>JutulDarcy.jl: Darcy-scale and subsurface flow (CO2 sequestration, gas/H2 storage, oil/gas fields) using <a href="https://github.com/sintefmath/Jutul.jl" target="_blank" rel="noreferrer">Jutul.jl</a> developed by the <a href="https://www.sintef.no/en/digital/departments-new/applied-mathematics/applied-computational-sciences/" target="_blank" rel="noreferrer">Applied Computational Science group</a> at <a href="https://www.sintef.no/en/digital/" target="_blank" rel="noreferrer">SINTEF Digital</a>.</p><p><strong>Getting started</strong></p><p>Install <a href="https://julialang.org/" target="_blank" rel="noreferrer">Julia</a> and add the package to your environment of choice:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Pkg</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Pkg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;GLMakie&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Pkg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Jutul&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Pkg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;JutulDarcy&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>You can then run any of the examples in the <a href="https://github.com/sintefmath/JutulDarcy.jl/tree/main/examples" target="_blank" rel="noreferrer"><code>examples</code></a> directory by including them.</p><p>For a minimal example that runs a industry standard input file and produces interactive plots:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> JutulDarcy, GLMakie</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">spe9_dir </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> JutulDarcy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">GeoEnergyIO</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">test_input_file_path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;SPE9&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">file_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> joinpath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(spe9_dir, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;SPE9.DATA&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">case </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> setup_case_from_data_file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(file_path)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> simulate_reservoir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(case)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">plot_reservoir_simulation_result</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(case</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">model, result)</span></span></code></pre></div><p>Note that interactive plotting requires <code>GLMakie</code>, which may not work if you are running Julia over SSH.</p><p><strong>Key features</strong></p><p>JutulDarcy is a general purpose porous media simulator with high performance written in Julia. It is fully differentiable with respect to forces and discretization parameters.</p><p><strong>Physical systems</strong></p><ul><li><p>Immiscible multi-phase flow</p></li><li><p>Black-oil type models with support for both dissolved vapor (Rs) and vaporized liquid (Rv)</p></li><li><p>Equation-of-state compositional flow with up to three phases and any number of components</p></li><li><p>Geothermal systems</p></li></ul><p>All solvers can incorporate general multisegment wells with rigorous mass balance, friction pressure loss, complex well limits and time-dependent controls.</p><p><strong>Architecture</strong></p><ul><li><p>Written in pure Julia, with automatic differentiation and dynamic sparsity detection</p></li><li><p>Support for sensitivities with respect to any model parameters using the adjoint method</p></li><li><p>High performance assembly and linear solvers, with support for two-stage CPR BILU(0)-CPR Krylov solvers</p></li><li><p>MPI support with domain decomposition and BoomerAMG-CPR solver with automatic METIS partitioning</p></li><li><p>Support for consistent discretizations (AvgMPFA / NTPFA)</p></li></ul><p><strong>Input/output and workflow tools</strong></p><ul><li><p>Support for reading in and running .DATA files with corner point grids, with support for non-conformal faults and inactive cells.</p></li><li><p>Unstructured grids and complex cases input from <a href="https://www.mrst.no" target="_blank" rel="noreferrer">the Matlab Reservoir Simulation Toolbox (MRST)</a> using the <code>jutul</code> module</p></li><li><p>3D visualization of grids and wells by loading a <a href="https://docs.makie.org/stable/" target="_blank" rel="noreferrer">Makie.jl</a> backend (requires Julia 1.9, <code>GLMakie</code> for interactivity)</p></li><li><p>Interactive plotting of well curves</p></li></ul><p>The compositional simulator has been matched against commercial offerings, AD-GPRS and MRST. The blackoil simulator has been validated on the standard SPE benchmarks (SPE1, SPE9, ...).</p><p><strong>Example run times on benchmarks</strong></p><table tabindex="0"><thead><tr><th style="text-align:right;">Name</th><th style="text-align:right;">Cells</th><th style="text-align:right;">Report steps</th><th style="text-align:right;">Preconditioner</th><th style="text-align:right;">Time [s]</th></tr></thead><tbody><tr><td style="text-align:right;">SPE1CASE2</td><td style="text-align:right;">300</td><td style="text-align:right;">120</td><td style="text-align:right;">block-ILU(0)</td><td style="text-align:right;">0.30</td></tr><tr><td style="text-align:right;">SPE9</td><td style="text-align:right;">9000</td><td style="text-align:right;">35</td><td style="text-align:right;">block-ILU(0)</td><td style="text-align:right;">3.41</td></tr><tr><td style="text-align:right;">Egg</td><td style="text-align:right;">18553</td><td style="text-align:right;">123</td><td style="text-align:right;">CPR-block-ILU(0)</td><td style="text-align:right;">8.60</td></tr><tr><td style="text-align:right;">Norne</td><td style="text-align:right;">44417</td><td style="text-align:right;">247</td><td style="text-align:right;">CPR-block-ILU(0)</td><td style="text-align:right;">259.0</td></tr><tr><td style="text-align:right;">OLYMPUS1</td><td style="text-align:right;">192750</td><td style="text-align:right;">20</td><td style="text-align:right;">CPR-block-ILU(0)</td><td style="text-align:right;">162.5</td></tr></tbody></table><p>Cases with CPR used hypre as the AMG solver. OYMPUS1 refers to realization 1 from the <a href="https://link.springer.com/article/10.1007/s10596-020-10003-4" target="_blank" rel="noreferrer">OLYMPUS optimization benchmark challenge</a>.</p><p><strong>Paper and citing</strong></p><p>The main paper describing <code>JutulDarcy.jl</code> is <em>JutulDarcy.jl - a Fully Differentiable High-Performance Reservoir Simulator Based on Automatic Differentiation</em>:</p><div class="language-bibtex vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bibtex</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@article</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">jutuldarcy_ecmor_2024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   author</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">M{\\o}yner, O.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">JutulDarcy.jl - a Fully Differentiable High-Performance Reservoir Simulator Based on Automatic Differentiation</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   year</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">2024</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   volume</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">2024</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   pages</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">1-9</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   doi</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">https://doi.org/10.3997/2214-4609.202437111</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   publisher</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">European Association of Geoscientists \\&amp; Engineers</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   issn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">2214-4609</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><a href="https://doi.org/10.3997/2214-4609.202437111" target="_blank" rel="noreferrer">Paper is available from EAGE.</a> If you use JutulDarcy in your work, please cite this paper.</p><p><strong>A few of the packages used by Jutul and JutulDarcy</strong></p><p>Jutul builds upon many of the excellent packages in the Julia ecosystem. Here are a few of them, and what they are used for:</p><ul><li><p><a href="https://github.com/JuliaDiff/ForwardDiff.jl" target="_blank" rel="noreferrer">ForwardDiff.jl</a> implements the Dual number class used throughout the code</p></li><li><p><a href="https://github.com/PALEOtoolkit/SparsityTracing.jl/" target="_blank" rel="noreferrer">SparsityTracing.jl</a> provides sparsity detection inside Jutul</p></li><li><p><a href="https://github.com/JuliaSmoothOptimizers/Krylov.jl" target="_blank" rel="noreferrer">Krylov.jl</a> provides the iterative linear solvers</p></li><li><p><a href="https://github.com/mcovalt/ILUZero.jl/blob/master/src/ILUZero.jl" target="_blank" rel="noreferrer">ILUZero.jl</a> for ILU(0) preconditioners</p></li><li><p><a href="https://github.com/JuliaLinearAlgebra/AlgebraicMultigrid.jl" target="_blank" rel="noreferrer">AlgebraicMultigrid.jl</a> for AMG preconditioners</p></li><li><p><a href="https://github.com/fredrikekre/HYPRE.jl" target="_blank" rel="noreferrer">HYPRE.jl</a> for robust AMG preconditioners with MPI support</p></li><li><p><a href="https://github.com/fverdugo/PartitionedArrays.jl" target="_blank" rel="noreferrer">PartitionedArrays.jl</a> for MPI assembly and linear solve</p></li><li><p><a href="https://github.com/mcabbott/Tullio.jl" target="_blank" rel="noreferrer">Tullio.jl</a> for automatically optimized loops and <a href="https://github.com/JuliaSIMD/Polyester.jl" target="_blank" rel="noreferrer">Polyester.jl</a> for lightweight threads</p></li><li><p><a href="https://github.com/KristofferC/TimerOutputs.jl" target="_blank" rel="noreferrer">TimerOutputs.jl</a> and <a href="https://github.com/timholy/ProgressMeter.jl" target="_blank" rel="noreferrer">ProgressMeter.jl</a> gives nice output to terminal.</p></li><li><p><a href="https://makie.juliaplots.org/" target="_blank" rel="noreferrer">Makie.jl</a> is used for the visualization features</p></li><li><p><a href="https://github.com/moyner/MultiComponentFlash.jl" target="_blank" rel="noreferrer">MultiComponentFlash.jl</a> provides many of the compositional features</p></li></ul><p>...and many more, both directly in the Project.toml file and indirectly!</p><p><strong>Additional examples and further reading</strong></p><p>The <a href="https://sintefmath.github.io/JutulDarcy.jl/dev/" target="_blank" rel="noreferrer">documentation</a> is still work in progress, but contains a fair bit of useful information. In addition, see the <a href="https://github.com/sintefmath/JutulDarcy.jl/tree/main/examples" target="_blank" rel="noreferrer">examples</a> folder for more information. Some functionality is also demonstrated in the <a href="https://github.com/sintefmath/JutulDarcy.jl/tree/main/test" target="_blank" rel="noreferrer">tests</a>.</p><p><em>Internals and undocumented functions are subject to change at this time. However, the main interface for the reservoir simulator itself seen in the examples should be fairly stable.</em></p><p><a href="https://github.com/sintefmath/JutulDarcy.jl/blob/7122508ef72620409ee5022b41a7c3a35d78b836/src/JutulDarcy.jl#L1" target="_blank" rel="noreferrer">source</a></p>`,37))])])}const b=e(o,[["render",d]]);export{f as __pageData,b as default};
