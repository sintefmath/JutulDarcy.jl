import{_ as r,c as n,a5 as i,j as e,a,G as l,B as o,o as p}from"./chunks/framework.6qKTFhuU.js";const F=JSON.parse('{"title":"Input formats","description":"","frontmatter":{},"headers":[],"relativePath":"man/basics/input_files.md","filePath":"man/basics/input_files.md","lastUpdated":null}'),u={name:"man/basics/input_files.md"},d={class:"jldocstring custom-block",open:""},c={class:"jldocstring custom-block",open:""},h={class:"jldocstring custom-block",open:""},f={class:"jldocstring custom-block",open:""},m={class:"jldocstring custom-block",open:""},k={class:"jldocstring custom-block",open:""},y={class:"jldocstring custom-block",open:""};function g(b,s,_,E,v,j){const t=o("Badge");return p(),n("div",null,[s[21]||(s[21]=i('<h1 id="Input-formats" tabindex="-1">Input formats <a class="header-anchor" href="#Input-formats" aria-label="Permalink to &quot;Input formats {#Input-formats}&quot;">​</a></h1><p>It is also possible to read cases that have been set up in MRST (see <a href="/JutulDarcy.jl/previews/PR71/man/basics/input_files#JutulDarcy.setup_case_from_mrst"><code>setup_case_from_mrst</code></a> and <a href="/JutulDarcy.jl/previews/PR71/man/basics/input_files#JutulDarcy.simulate_mrst_case"><code>simulate_mrst_case</code></a>) or from .DATA files (see <a href="/JutulDarcy.jl/previews/PR71/man/basics/input_files#JutulDarcy.setup_case_from_data_file"><code>setup_case_from_data_file</code></a> and <a href="/JutulDarcy.jl/previews/PR71/man/basics/input_files#JutulDarcy.simulate_data_file"><code>simulate_data_file</code></a>)</p><h2 id="MAT-files-from-the-Matlab-Reservoir-Simulation-Toolbox-(MRST)" tabindex="-1">MAT-files from the Matlab Reservoir Simulation Toolbox (MRST) <a class="header-anchor" href="#MAT-files-from-the-Matlab-Reservoir-Simulation-Toolbox-(MRST)" aria-label="Permalink to &quot;MAT-files from the Matlab Reservoir Simulation Toolbox (MRST) {#MAT-files-from-the-Matlab-Reservoir-Simulation-Toolbox-(MRST)}&quot;">​</a></h2><h3 id="Simulation-of-.MAT-files" tabindex="-1">Simulation of .MAT files <a class="header-anchor" href="#Simulation-of-.MAT-files" aria-label="Permalink to &quot;Simulation of .MAT files {#Simulation-of-.MAT-files}&quot;">​</a></h3>',4)),e("details",d,[e("summary",null,[s[0]||(s[0]=e("a",{id:"JutulDarcy.setup_case_from_mrst",href:"#JutulDarcy.setup_case_from_mrst"},[e("span",{class:"jlbinding"},"JutulDarcy.setup_case_from_mrst")],-1)),s[1]||(s[1]=a()),l(t,{type:"info",class:"jlObjectType jlFunction",text:"Function"})]),s[2]||(s[2]=i('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setup_case_from_mrst</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;filename.mat&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; kwarg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Set up a <a href="/JutulDarcy.jl/previews/PR71/ref/jutul#Jutul.JutulCase"><code>Jutul.JutulCase</code></a> from a MRST-exported .mat file.</p><p><a href="https://github.com/sintefmath/JutulDarcy.jl/blob/d9f8bc9d96a40cc91eebab3ee548644ca10f6854/src/input_simulation/mrst_input.jl#L1088-L1092" target="_blank" rel="noreferrer">source</a></p>',3))]),e("details",c,[e("summary",null,[s[3]||(s[3]=e("a",{id:"JutulDarcy.simulate_mrst_case",href:"#JutulDarcy.simulate_mrst_case"},[e("span",{class:"jlbinding"},"JutulDarcy.simulate_mrst_case")],-1)),s[4]||(s[4]=a()),l(t,{type:"info",class:"jlObjectType jlFunction",text:"Function"})]),s[5]||(s[5]=i(`<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ws, states </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> simulate_mrst_case</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(file_name)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">simulate_mrst_case</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(file_name; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">keyword arguments</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Simulate a MRST case from <code>file_name</code> as exported by <code>writeJutulInput</code> in MRST.</p><p><strong>Arguments</strong></p><ul><li><code>file_name::String</code>: The path to a <code>.mat</code> or <code>.data</code> file that is to be simulated.</li></ul><p><strong>Keyword arguments</strong></p><ul><li><p><code>extra_outputs::Vector{Symbol} = [:Saturations]</code>: Additional variables to output from the simulation.</p></li><li><p><code>write_output::Bool = true</code>: Write output (in the default JLD2 format)</p></li><li><p><code>output_path = nothing</code>: Directory for output files. Files will be written under this directory. Defaults to the folder of <code>file_name</code>.</p></li><li><p><code>write_mrst = true</code>: Write MRST compatible output after completed simulation that can be read by <code>readJutulOutput</code> in MRST.</p></li><li><p><code>backend=:csc</code>: choice of backend for linear systems. <code>:csc</code> for default Julia sparse, <code>:csr</code> for experimental parallel CSR.</p></li><li><p><code>verbose=true</code>: print some extra information specific to this routine upon calling</p></li><li><p><code>nthreads=Threads.nthreads()</code>: number of threads to use</p></li><li><p><code>linear_solver=:bicgstab</code>: name of Krylov.jl solver to use, or :direct (for small cases only)</p></li><li><p><code>info_level=0</code>: standard Jutul info_level. 0 for minimal printing, -1 for no printing, 1-5 for various levels of verbosity</p></li></ul><p>Additional input arguments are passed onto, <a href="/JutulDarcy.jl/previews/PR71/man/basics/input_files#JutulDarcy.setup_case_from_mrst"><code>setup_case_from_mrst</code></a>, <a href="/JutulDarcy.jl/previews/PR71/man/highlevel#JutulDarcy.setup_reservoir_simulator"><code>setup_reservoir_simulator</code></a> and <a href="/JutulDarcy.jl/previews/PR71/ref/jutul#Jutul.simulator_config-Tuple{Any}"><code>simulator_config</code></a> if applicable.</p><p><a href="https://github.com/sintefmath/JutulDarcy.jl/blob/d9f8bc9d96a40cc91eebab3ee548644ca10f6854/src/input_simulation/mrst_input.jl#L1478-L1509" target="_blank" rel="noreferrer">source</a></p>`,8))]),s[22]||(s[22]=e("h3",{id:"MRST-specific-types",tabindex:"-1"},[a("MRST-specific types "),e("a",{class:"header-anchor",href:"#MRST-specific-types","aria-label":'Permalink to "MRST-specific types {#MRST-specific-types}"'},"​")],-1)),e("details",h,[e("summary",null,[s[6]||(s[6]=e("a",{id:"Jutul.MRSTWrapMesh",href:"#Jutul.MRSTWrapMesh"},[e("span",{class:"jlbinding"},"Jutul.MRSTWrapMesh")],-1)),s[7]||(s[7]=a()),l(t,{type:"info",class:"jlObjectType jlType",text:"Type"})]),s[8]||(s[8]=i('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MRSTWrapMesh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(G, N </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Mesh that adapts an exported MRST mesh to the Jutul interface. <code>G</code> is assumed to be read directly from file using <code>MAT.matread</code>. The raw exported grid can be found under the <code>data</code> field.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.40/src/meshes/mrst.jl#L9-L15" target="_blank" rel="noreferrer">source</a></p>',3))]),s[23]||(s[23]=e("h2",{id:"DATA-files-from-commercial-reservoir-modelling-software",tabindex:"-1"},[a("DATA-files from commercial reservoir modelling software "),e("a",{class:"header-anchor",href:"#DATA-files-from-commercial-reservoir-modelling-software","aria-label":'Permalink to "DATA-files from commercial reservoir modelling software {#DATA-files-from-commercial-reservoir-modelling-software}"'},"​")],-1)),s[24]||(s[24]=e("p",null,[a("JutulDarcy can set up cases from Eclipse-type input files by making use of the "),e("a",{href:"https://github.com/sintefmath/GeoEnergyIO.jl",target:"_blank",rel:"noreferrer"},"GeoEnergyIO.jl"),a(" package for parsing. This package is a direct dependency of JutulDarcy and these cases can be simulated directly. If you want to parse the input files and possibly modify them in your Julia session before the case is simulated, we refer you to the "),e("a",{href:"https://sintefmath.github.io/GeoEnergyIO.jl/dev/",target:"_blank",rel:"noreferrer"},"GeoEnergyIO Documentation"),a(".")],-1)),s[25]||(s[25]=e("p",null,"If you want to directly simulate a file from disk, you can sue the high level functions that automatically parse the files for you:",-1)),e("details",f,[e("summary",null,[s[9]||(s[9]=e("a",{id:"JutulDarcy.simulate_data_file",href:"#JutulDarcy.simulate_data_file"},[e("span",{class:"jlbinding"},"JutulDarcy.simulate_data_file")],-1)),s[10]||(s[10]=a()),l(t,{type:"info",class:"jlObjectType jlFunction",text:"Function"})]),s[11]||(s[11]=i('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">simulate_data_file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(inp; parse_arg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), kwarg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Simulate standard input file (with extension .DATA). <code>inp</code> can either be the output from the GeoEnergyIO function <code>parse_data_file</code> or a <code>String</code> for the path of an input file with the .DATA extension.</p><p>Additional arguments are passed onto <a href="/JutulDarcy.jl/previews/PR71/man/highlevel#JutulDarcy.simulate_reservoir"><code>simulate_reservoir</code></a>. Extra inputs to the parser can be sent as a <code>setup_arg</code> <code>NamedTuple</code>.</p><p><a href="https://github.com/sintefmath/JutulDarcy.jl/blob/d9f8bc9d96a40cc91eebab3ee548644ca10f6854/src/input_simulation/data_input.jl#L1-L10" target="_blank" rel="noreferrer">source</a></p>',4))]),e("details",m,[e("summary",null,[s[12]||(s[12]=e("a",{id:"JutulDarcy.setup_case_from_data_file",href:"#JutulDarcy.setup_case_from_data_file"},[e("span",{class:"jlbinding"},"JutulDarcy.setup_case_from_data_file")],-1)),s[13]||(s[13]=a()),l(t,{type:"info",class:"jlObjectType jlFunction",text:"Function"})]),s[14]||(s[14]=i(`<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">case </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> setup_case_from_data_file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    filename;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    parse_arg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    kwarg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">case, data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> setup_case_from_data_file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(filename; include_data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Set up a <a href="/JutulDarcy.jl/previews/PR71/ref/jutul#Jutul.JutulCase"><code>JutulCase</code></a> from a standard input file (with extension .DATA). Additional arguments to the parser can be passed as key/values in a <code>NamedTuple</code> given as <code>parse_arg</code>. The optional input <code>include_data=true</code> will make the function return the parsed data in addition the case itself. Additional keyword arguments are passed on to <a href="/JutulDarcy.jl/previews/PR71/man/basics/input_files#JutulDarcy.setup_case_from_parsed_data"><code>setup_case_from_parsed_data</code></a>.</p><p><a href="https://github.com/sintefmath/JutulDarcy.jl/blob/d9f8bc9d96a40cc91eebab3ee548644ca10f6854/src/input_simulation/data_input.jl#L21-L35" target="_blank" rel="noreferrer">source</a></p>`,3))]),e("details",k,[e("summary",null,[s[15]||(s[15]=e("a",{id:"JutulDarcy.setup_case_from_parsed_data",href:"#JutulDarcy.setup_case_from_parsed_data"},[e("span",{class:"jlbinding"},"JutulDarcy.setup_case_from_parsed_data")],-1)),s[16]||(s[16]=a()),l(t,{type:"info",class:"jlObjectType jlFunction",text:"Function"})]),s[17]||(s[17]=i('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setup_case_from_parsed_data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(datafile; skip_wells </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, simple_well </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, use_ijk_trans </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, verbose </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, kwarg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Set up a case from a parsed input file (in <code>Dict</code> format). Internal function, not exported. Use <a href="/JutulDarcy.jl/previews/PR71/man/basics/input_files#JutulDarcy.setup_case_from_data_file"><code>setup_case_from_data_file</code></a>.</p><p><a href="https://github.com/sintefmath/JutulDarcy.jl/blob/d9f8bc9d96a40cc91eebab3ee548644ca10f6854/src/input_simulation/data_input.jl#L57-L62" target="_blank" rel="noreferrer">source</a></p>',3))]),e("details",y,[e("summary",null,[s[18]||(s[18]=e("a",{id:"JutulDarcy.convert_co2store_to_co2_brine",href:"#JutulDarcy.convert_co2store_to_co2_brine"},[e("span",{class:"jlbinding"},"JutulDarcy.convert_co2store_to_co2_brine")],-1)),s[19]||(s[19]=a()),l(t,{type:"info",class:"jlObjectType jlFunction",text:"Function"})]),s[20]||(s[20]=i('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">convert_co2store_to_co2_brine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data; verbose </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Converts a CO2STORE data file to a co2-brine model. The conversion should be close to equivialent for models without salt. The data will be copied if modifications are necessary.</p><p><a href="https://github.com/sintefmath/JutulDarcy.jl/blob/d9f8bc9d96a40cc91eebab3ee548644ca10f6854/src/input_simulation/converter.jl#L1-L7" target="_blank" rel="noreferrer">source</a></p>',3))]),s[26]||(s[26]=e("p",null,[a("Reservoir simulator input files are highly complex and contain a great number of different keywords. JutulDarcy and GeoEnergyIO has extensive support for this format, but many keywords are missing or only partially supported. Sometimes cases can be made to run by removing keywords that do not impact simulation outcomes, or have very little impact. If you want a turnkey open source solution for simulation reservoir models you should also have a look at "),e("a",{href:"https://opm-project.org/",target:"_blank",rel:"noreferrer"},"OPM Flow"),a(".")],-1)),s[27]||(s[27]=e("p",null,[a("If you can share your input file or the missing keywords "),e("a",{href:"https://github.com/sintefmath/JutulDarcy.jl/issues",target:"_blank",rel:"noreferrer"},"in the issues section"),a(" it may be easier to figure out if a case can be supported.")],-1))])}const J=r(u,[["render",g]]);export{F as __pageData,J as default};
