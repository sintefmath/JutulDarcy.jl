<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Documentation from Jutul.jl | JutulDarcy.jl</title>
    <meta name="description" content="Documentation for JutulDarcy.jl">
    <meta name="generator" content="VitePress v1.3.4">
    <link rel="preload stylesheet" href="/JutulDarcy.jl/previews/PR62/assets/style.DJ5TYU02.css" as="style">
    
    <script type="module" src="/JutulDarcy.jl/previews/PR62/assets/app.DRbzlFol.js"></script>
    <link rel="preload" href="/JutulDarcy.jl/previews/PR62/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/JutulDarcy.jl/previews/PR62/assets/chunks/theme.BDgv3YuZ.js">
    <link rel="modulepreload" href="/JutulDarcy.jl/previews/PR62/assets/chunks/framework.BgSDnNIf.js">
    <link rel="modulepreload" href="/JutulDarcy.jl/previews/PR62/assets/ref_jutul.md.D0YWgIFE.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-a9a9e638><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c3508ec8></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c3508ec8> Skip to content </a><!--]--><!----><header class="VPNav" data-v-a9a9e638 data-v-f1e365da><div class="VPNavBar" data-v-f1e365da data-v-822684d1><div class="wrapper" data-v-822684d1><div class="container" data-v-822684d1><div class="title" data-v-822684d1><div class="VPNavBarTitle has-sidebar" data-v-822684d1 data-v-28a961f9><a class="title" href="/JutulDarcy.jl/previews/PR62/" data-v-28a961f9><!--[--><!--]--><!----><span data-v-28a961f9>JutulDarcy.jl</span><!--[--><!--]--></a></div></div><div class="content" data-v-822684d1><div class="content-body" data-v-822684d1><!--[--><!--]--><div class="VPNavBarSearch search" data-v-822684d1><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-822684d1 data-v-e6d46098><span id="main-nav-aria-label" class="visually-hidden" data-v-e6d46098> Main Navigation </span><!--[--><!--[--><div class="VPFlyout VPNavBarMenuGroup active" data-v-e6d46098 data-v-e5380155><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-e5380155><span class="text" data-v-e5380155><!----><span data-v-e5380155>Introduction</span><span class="vpi-chevron-down text-icon" data-v-e5380155></span></span></button><div class="menu" data-v-e5380155><div class="VPMenu" data-v-e5380155 data-v-7dd3104a><div class="items" data-v-7dd3104a><!--[--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/index" data-v-8b74d055><!--[-->JutulDarcy.jl<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/man/intro" data-v-8b74d055><!--[-->Getting started<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/extras/refs" data-v-8b74d055><!--[-->References<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/extras/faq" data-v-8b74d055><!--[-->FAQ<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link active" href="/JutulDarcy.jl/previews/PR62/ref/jutul" data-v-8b74d055><!--[-->Jutul functions<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-e6d46098 data-v-e5380155><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-e5380155><span class="text" data-v-e5380155><!----><span data-v-e5380155>Manual</span><span class="vpi-chevron-down text-icon" data-v-e5380155></span></span></button><div class="menu" data-v-e5380155><div class="VPMenu" data-v-e5380155 data-v-7dd3104a><div class="items" data-v-7dd3104a><!--[--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/man/highlevel" data-v-8b74d055><!--[-->High-level API<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/man/basics/input_files" data-v-8b74d055><!--[-->Input formats<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/man/basics/forces" data-v-8b74d055><!--[-->Driving forces<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/man/basics/systems" data-v-8b74d055><!--[-->Supported physical systems<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/man/basics/wells" data-v-8b74d055><!--[-->Wells and controls<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/man/basics/solution" data-v-8b74d055><!--[-->Solving the equations<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/man/basics/primary" data-v-8b74d055><!--[-->Primary variables<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/man/basics/secondary" data-v-8b74d055><!--[-->Secondary variables (properties)<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/man/basics/parameters" data-v-8b74d055><!--[-->Parameters<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/man/basics/plotting" data-v-8b74d055><!--[-->Plotting and visualization<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-e6d46098 data-v-e5380155><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-e5380155><span class="text" data-v-e5380155><!----><span data-v-e5380155>Examples: Introduction</span><span class="vpi-chevron-down text-icon" data-v-e5380155></span></span></button><div class="menu" data-v-e5380155><div class="VPMenu" data-v-e5380155 data-v-7dd3104a><div class="items" data-v-7dd3104a><!--[--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/examples/two_phase_gravity_segregation" data-v-8b74d055><!--[-->Intro: Gravity segregation<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/examples/two_phase_buckley_leverett" data-v-8b74d055><!--[-->Intro: Two-phase Buckley-Leverett<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/examples/wells_intro" data-v-8b74d055><!--[-->Intro: Wells<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/examples/data_input_file" data-v-8b74d055><!--[-->Intro: Simulating Eclipse/DATA input files<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/examples/intro_sensitivities" data-v-8b74d055><!--[-->Intro: Sensitivities in JutulDarcy<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/examples/co2_brine_2d_vertical" data-v-8b74d055><!--[-->Intro: Compositional flow<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-e6d46098 data-v-e5380155><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-e5380155><span class="text" data-v-e5380155><!----><span data-v-e5380155>Examples: Usage</span><span class="vpi-chevron-down text-icon" data-v-e5380155></span></span></button><div class="menu" data-v-e5380155><div class="VPMenu" data-v-e5380155 data-v-7dd3104a><div class="items" data-v-7dd3104a><!--[--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/examples/five_spot_ensemble" data-v-8b74d055><!--[-->Quarter-five-spot with variation<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/examples/two_phase_unstable_gravity" data-v-8b74d055><!--[-->Gravity circulation with CPR preconditioner<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/examples/co2_sloped" data-v-8b74d055><!--[-->CO2 injection in saline aquifer<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/examples/compositional_5components" data-v-8b74d055><!--[-->Compositional with five components<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/examples/optimize_simple_bl" data-v-8b74d055><!--[-->Parameter matching of Buckley-Leverett<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-e6d46098 data-v-e5380155><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-e5380155><span class="text" data-v-e5380155><!----><span data-v-e5380155>Examples: Validation</span><span class="vpi-chevron-down text-icon" data-v-e5380155></span></span></button><div class="menu" data-v-e5380155><div class="VPMenu" data-v-e5380155 data-v-7dd3104a><div class="items" data-v-7dd3104a><!--[--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/examples/validation_spe1" data-v-8b74d055><!--[-->Validation: SPE1<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/examples/validation_spe9" data-v-8b74d055><!--[-->Validation: SPE9<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/examples/validation_compositional" data-v-8b74d055><!--[-->Validation: Compositional<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/examples/validation_egg" data-v-8b74d055><!--[-->Validation: Egg<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/examples/validation_olympus_1" data-v-8b74d055><!--[-->Validation: OLYMPUS 1<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/examples/validation_norne_nohyst" data-v-8b74d055><!--[-->Validation: Norne<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/examples/validation_mrst" data-v-8b74d055><!--[-->Validation: MRST input files<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-e6d46098 data-v-e5380155><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-e5380155><span class="text" data-v-e5380155><!----><span data-v-e5380155>Advanced usage</span><span class="vpi-chevron-down text-icon" data-v-e5380155></span></span></button><div class="menu" data-v-e5380155><div class="VPMenu" data-v-e5380155 data-v-7dd3104a><div class="items" data-v-7dd3104a><!--[--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/man/advanced/mpi" data-v-8b74d055><!--[-->Multi-threading and MPI support<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-8b74d055><a class="VPLink link" href="/JutulDarcy.jl/previews/PR62/man/advanced/compiled" data-v-8b74d055><!--[-->Standalone reservoir simulator<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-822684d1 data-v-af096f4a><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-af096f4a data-v-e40a8bb6 data-v-4a1c76db><span class="check" data-v-4a1c76db><span class="icon" data-v-4a1c76db><!--[--><span class="vpi-sun sun" data-v-e40a8bb6></span><span class="vpi-moon moon" data-v-e40a8bb6></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-822684d1 data-v-164c457f data-v-ee7a9424><!--[--><a class="VPSocialLink no-icon" href="https://github.com/sintefmath/JutulDarcy.jl" aria-label="github" target="_blank" rel="noopener" data-v-ee7a9424 data-v-717b8b75><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-822684d1 data-v-925effce data-v-e5380155><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-e5380155><span class="vpi-more-horizontal icon" data-v-e5380155></span></button><div class="menu" data-v-e5380155><div class="VPMenu" data-v-e5380155 data-v-7dd3104a><!----><!--[--><!--[--><!----><div class="group" data-v-925effce><div class="item appearance" data-v-925effce><p class="label" data-v-925effce>Appearance</p><div class="appearance-action" data-v-925effce><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-925effce data-v-e40a8bb6 data-v-4a1c76db><span class="check" data-v-4a1c76db><span class="icon" data-v-4a1c76db><!--[--><span class="vpi-sun sun" data-v-e40a8bb6></span><span class="vpi-moon moon" data-v-e40a8bb6></span><!--]--></span></span></button></div></div></div><div class="group" data-v-925effce><div class="item social-links" data-v-925effce><div class="VPSocialLinks social-links-list" data-v-925effce data-v-ee7a9424><!--[--><a class="VPSocialLink no-icon" href="https://github.com/sintefmath/JutulDarcy.jl" aria-label="github" target="_blank" rel="noopener" data-v-ee7a9424 data-v-717b8b75><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-822684d1 data-v-5dea55bf><span class="container" data-v-5dea55bf><span class="top" data-v-5dea55bf></span><span class="middle" data-v-5dea55bf></span><span class="bottom" data-v-5dea55bf></span></span></button></div></div></div></div><div class="divider" data-v-822684d1><div class="divider-line" data-v-822684d1></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-a9a9e638 data-v-070ab83d><div class="container" data-v-070ab83d><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-070ab83d><span class="vpi-align-left menu-icon" data-v-070ab83d></span><span class="menu-text" data-v-070ab83d>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-070ab83d data-v-bc9dc845><button data-v-bc9dc845>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-a9a9e638 data-v-18756405><div class="curtain" data-v-18756405></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-18756405><span class="visually-hidden" id="sidebar-aria-label" data-v-18756405> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-9e426adc><section class="VPSidebarItem level-0 collapsible has-active" data-v-9e426adc data-v-196b2e5f><div class="item" role="button" tabindex="0" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><h2 class="text" data-v-196b2e5f>Introduction</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-196b2e5f><span class="vpi-chevron-right caret-icon" data-v-196b2e5f></span></div></div><div class="items" data-v-196b2e5f><!--[--><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/index" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>JutulDarcy.jl</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/man/intro" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Getting started</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/extras/refs" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>References</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/extras/faq" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>FAQ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/ref/jutul" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Jutul functions</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-9e426adc><section class="VPSidebarItem level-0 collapsible" data-v-9e426adc data-v-196b2e5f><div class="item" role="button" tabindex="0" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><h2 class="text" data-v-196b2e5f>Manual</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-196b2e5f><span class="vpi-chevron-right caret-icon" data-v-196b2e5f></span></div></div><div class="items" data-v-196b2e5f><!--[--><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/man/highlevel" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>High-level API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/man/basics/input_files" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Input formats</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/man/basics/forces" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Driving forces</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/man/basics/systems" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Supported physical systems</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/man/basics/wells" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Wells and controls</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/man/basics/solution" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Solving the equations</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/man/basics/primary" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Primary variables</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/man/basics/secondary" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Secondary variables (properties)</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/man/basics/parameters" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Parameters</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/man/basics/plotting" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Plotting and visualization</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-9e426adc><section class="VPSidebarItem level-0 collapsible" data-v-9e426adc data-v-196b2e5f><div class="item" role="button" tabindex="0" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><h2 class="text" data-v-196b2e5f>Examples: Introduction</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-196b2e5f><span class="vpi-chevron-right caret-icon" data-v-196b2e5f></span></div></div><div class="items" data-v-196b2e5f><!--[--><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/examples/two_phase_gravity_segregation" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Intro: Gravity segregation</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/examples/two_phase_buckley_leverett" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Intro: Two-phase Buckley-Leverett</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/examples/wells_intro" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Intro: Wells</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/examples/data_input_file" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Intro: Simulating Eclipse/DATA input files</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/examples/intro_sensitivities" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Intro: Sensitivities in JutulDarcy</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/examples/co2_brine_2d_vertical" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Intro: Compositional flow</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-9e426adc><section class="VPSidebarItem level-0 collapsible" data-v-9e426adc data-v-196b2e5f><div class="item" role="button" tabindex="0" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><h2 class="text" data-v-196b2e5f>Examples: Usage</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-196b2e5f><span class="vpi-chevron-right caret-icon" data-v-196b2e5f></span></div></div><div class="items" data-v-196b2e5f><!--[--><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/examples/five_spot_ensemble" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Quarter-five-spot with variation</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/examples/two_phase_unstable_gravity" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Gravity circulation with CPR preconditioner</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/examples/co2_sloped" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>CO2 injection in saline aquifer</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/examples/compositional_5components" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Compositional with five components</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/examples/optimize_simple_bl" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Parameter matching of Buckley-Leverett</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-9e426adc><section class="VPSidebarItem level-0 collapsible" data-v-9e426adc data-v-196b2e5f><div class="item" role="button" tabindex="0" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><h2 class="text" data-v-196b2e5f>Examples: Validation</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-196b2e5f><span class="vpi-chevron-right caret-icon" data-v-196b2e5f></span></div></div><div class="items" data-v-196b2e5f><!--[--><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/examples/validation_spe1" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Validation: SPE1</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/examples/validation_spe9" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Validation: SPE9</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/examples/validation_compositional" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Validation: Compositional</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/examples/validation_egg" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Validation: Egg</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/examples/validation_olympus_1" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Validation: OLYMPUS 1</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/examples/validation_norne_nohyst" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Validation: Norne</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/examples/validation_mrst" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Validation: MRST input files</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-9e426adc><section class="VPSidebarItem level-0 collapsible" data-v-9e426adc data-v-196b2e5f><div class="item" role="button" tabindex="0" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><h2 class="text" data-v-196b2e5f>Advanced usage</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-196b2e5f><span class="vpi-chevron-right caret-icon" data-v-196b2e5f></span></div></div><div class="items" data-v-196b2e5f><!--[--><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/man/advanced/mpi" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Multi-threading and MPI support</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-196b2e5f data-v-196b2e5f><div class="item" data-v-196b2e5f><div class="indicator" data-v-196b2e5f></div><a class="VPLink link link" href="/JutulDarcy.jl/previews/PR62/man/advanced/compiled" data-v-196b2e5f><!--[--><p class="text" data-v-196b2e5f>Standalone reservoir simulator</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-a9a9e638 data-v-91765379><div class="VPDoc has-sidebar has-aside" data-v-91765379 data-v-83890dd9><!--[--><!--]--><div class="container" data-v-83890dd9><div class="aside" data-v-83890dd9><div class="aside-curtain" data-v-83890dd9></div><div class="aside-container" data-v-83890dd9><div class="aside-content" data-v-83890dd9><div class="VPDocAside" data-v-83890dd9 data-v-6d7b3c46><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-6d7b3c46 data-v-b38bf2ff><div class="content" data-v-b38bf2ff><div class="outline-marker" data-v-b38bf2ff></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-b38bf2ff>On this page</div><ul class="VPDocOutlineItem root" data-v-b38bf2ff data-v-3f927ebe><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-6d7b3c46></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-83890dd9><div class="content-container" data-v-83890dd9><!--[--><!--]--><main class="main" data-v-83890dd9><div style="position:relative;" class="vp-doc _JutulDarcy_jl_previews_PR62_ref_jutul" data-v-83890dd9><div><h1 id="Documentation-from-Jutul.jl" tabindex="-1">Documentation from Jutul.jl <a class="header-anchor" href="#Documentation-from-Jutul.jl" aria-label="Permalink to &quot;Documentation from Jutul.jl {#Documentation-from-Jutul.jl}&quot;">​</a></h1><p>JutulDarcy.jl builds upon Jutul.jl. You can use JutulDarcy.jl without knowing the inner workings of Jutul.jl, but if you want to dive under the hood these docstrings may be helpful.</p><details class="jldocstring custom-block" open><summary><a id="Jutul.AMGPreconditioner" href="#Jutul.AMGPreconditioner"><span class="jlbinding">Jutul.AMGPreconditioner</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>AMG on CPU (Julia native)</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/linsolve/precond/amg.jl#L2-L4" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.BlockMajorLayout" href="#Jutul.BlockMajorLayout"><span class="jlbinding">Jutul.BlockMajorLayout</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Same as <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.EntityMajorLayout"><code>EntityMajorLayout</code></a>, but the system is a sparse matrix where each entry is a small dense matrix.</p><p>For a test system with primary variables P, S and equations E1, E2 and two cells this will give a diagonal of length 2: [(∂E1/∂p)₁ (∂E1/∂S)₁ ; (∂E2/∂p)₁ (∂E2/∂S)₁] [(∂E1/∂p)₂ (∂E1/∂S)₂ ; (∂E2/∂p)₂ (∂E2/∂S)₂]</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/core_types.jl#L131-L139" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.BoundaryFaces" href="#Jutul.BoundaryFaces"><span class="jlbinding">Jutul.BoundaryFaces</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Entity for faces on the boundary (faces that are only connected to a single <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.Cells"><code>Cells</code></a>)</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/core_types.jl#L463-L465" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.Cells" href="#Jutul.Cells"><span class="jlbinding">Jutul.Cells</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Entity for Cells (closed volumes with averaged properties for a finite-volume solver)</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/core_types.jl#L453-L455" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.CoarseMesh-Tuple{Any, Any}" href="#Jutul.CoarseMesh-Tuple{Any, Any}"><span class="jlbinding">Jutul.CoarseMesh</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CoarseMesh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(G</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JutulMesh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, p)</span></span></code></pre></div><p>Construct a coarse mesh from a given <code>JutulMesh</code> that can be converted to an <code>UnstructuredMesh</code> instance. The second argument <code>p</code> should be a partition Vector with one entry per cell in the original grid that assigns that cell to a coarse block. Should be one-indexed and the numbering should be sequential and contain at least one fine cell for each coarse index. This is tested by the function.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/meshes/coarse.jl#L14-L23" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.CompactAutoDiffCache" href="#Jutul.CompactAutoDiffCache"><span class="jlbinding">Jutul.CompactAutoDiffCache</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Cache that holds an AD vector/matrix together with their positions.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/core_types.jl#L659-L661" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.DataDomain-Tuple{JutulDomain}" href="#Jutul.DataDomain-Tuple{JutulDomain}"><span class="jlbinding">Jutul.DataDomain</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DataDomain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(domain</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JutulDomain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; property1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> p1, property2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> p2, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>A wrapper around a domain that allows for storing of entity-associated data.</p><p>Example:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Grid with 6 cells and 7 interior faces</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">g </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> CartesianMesh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">d </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> DataDomain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(g)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">d[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:cell_vec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> rand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#ok, same as:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">d[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:cell_vec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Cells</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> rand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#ok</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">d[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:cell_vec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Faces</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> rand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#not ok!</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">d[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:face_vec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Faces</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> rand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">7</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#ok!</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Can also add general arrays if last dimension == entity dimension</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">d[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:cell_vec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Cells</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> rand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#ok</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Can add general data too, but needs to be specified</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">d[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:not_on_face_or_cell</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> rand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># also ok</span></span></code></pre></div><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/domains.jl#L115-L134" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.DefaultContext" href="#Jutul.DefaultContext"><span class="jlbinding">Jutul.DefaultContext</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Default context</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/contexts/default.jl#L2" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.DiscretizedDomain" href="#Jutul.DiscretizedDomain"><span class="jlbinding">Jutul.DiscretizedDomain</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DiscretizedDomain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(domain, disc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>A type for a discretized domain of some other domain or mesh. May contain one or more discretizations as-needed to write equations.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/domains.jl#L40-L45" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.EntityMajorLayout" href="#Jutul.EntityMajorLayout"><span class="jlbinding">Jutul.EntityMajorLayout</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Equations are grouped by entity, listing all equations and derivatives for entity 1 before proceeding to entity 2 etc.</p><p>For a test system with primary variables P, S and equations E1, E2 and two cells this will give the following ordering on the diagonal: (∂E1/∂p)₁, (∂E2/∂S)₁, (∂E1/∂p)₂, (∂E2/∂S)₂</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/core_types.jl#L115-L122" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.EquationMajorLayout" href="#Jutul.EquationMajorLayout"><span class="jlbinding">Jutul.EquationMajorLayout</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Equations are stored sequentially in rows, derivatives of same type in columns:</p><p>For a test system with primary variables P, S and equations E1, E2 and two cells this will give the following ordering on the diagonal: (∂E1/∂p)₁, (∂E1/∂p)₂, (∂E2/∂S)₁, (∂E2/∂S)₂</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/core_types.jl#L102-L108" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.EquationSet" href="#Jutul.EquationSet"><span class="jlbinding">Jutul.EquationSet</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Set of a variable where equations are defined</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/dd/dd.jl#L9" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.FaceMap" href="#Jutul.FaceMap"><span class="jlbinding">Jutul.FaceMap</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Struct that contains mappings for a set of faces that are made up of nodes and are part of cells.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/meshes/unstructured/types.jl#L1-L4" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.Faces" href="#Jutul.Faces"><span class="jlbinding">Jutul.Faces</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Entity for Faces (intersection between pairs of <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.Cells"><code>Cells</code></a>)</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/core_types.jl#L458-L460" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.FlowDiscretization" href="#Jutul.FlowDiscretization"><span class="jlbinding">Jutul.FlowDiscretization</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Discretization of kgradp + upwind</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/core_types.jl#L758" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.FractionVariables" href="#Jutul.FractionVariables"><span class="jlbinding">Jutul.FractionVariables</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Abstract type for fraction variables (vector variables that sum up to unity over each entity).</p><p>By default, these are limited to the [0, 1] range through <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.maximum_value-Tuple{JutulVariables}"><code>maximum_value</code></a> and <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.minimum_value-Tuple{JutulVariables}"><code>minimum_value</code></a> default implementations.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/core_types.jl#L69-L75" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.GlobalSet" href="#Jutul.GlobalSet"><span class="jlbinding">Jutul.GlobalSet</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>The global set of variables</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/dd/dd.jl#L3" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.GroupWisePreconditioner" href="#Jutul.GroupWisePreconditioner"><span class="jlbinding">Jutul.GroupWisePreconditioner</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Multi-model preconditioners</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/linsolve/precond/various.jl#L48-L50" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.HalfFaces" href="#Jutul.HalfFaces"><span class="jlbinding">Jutul.HalfFaces</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Entity for half-faces (face associated with a single <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.Cells"><code>Cells</code></a>)</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/core_types.jl#L468-L470" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.HelperSimulator-Union{Tuple{E}, Tuple{M}, Tuple{M, Any}} where {M, E}" href="#Jutul.HelperSimulator-Union{Tuple{E}, Tuple{M}, Tuple{M, Any}} where {M, E}"><span class="jlbinding">Jutul.HelperSimulator</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">HelperSimulator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">M</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, T </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Float64; state0 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> setup_state</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model), executor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">E</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Jutul</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">default_executor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {M, E}</span></span></code></pre></div><p>Construct a helper simulator that can be used to compute the residuals and/or accumulation terms for a given type T. Useful for coupling Jutul to other solvers and types of automatic differentiation.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/simulator/helper.jl#L9-L15" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.ILUZeroPreconditioner" href="#Jutul.ILUZeroPreconditioner"><span class="jlbinding">Jutul.ILUZeroPreconditioner</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>ILU(0) preconditioner on CPU</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/linsolve/precond/ilu.jl#L2-L4" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.IndirectionMap" href="#Jutul.IndirectionMap"><span class="jlbinding">Jutul.IndirectionMap</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>IndirectionMap(vals::Vector{V}, pos::Vector{Int}) where V</p><p>Create a indirection map that encodes a variable length dense vector.</p><p><code>pos</code> is assumed to be a Vector{Int} of length n+1 where n is the number of dense vectors that is encoded. The <code>vals</code> array holds the entries for vector i in the range <code>pos[i]:(pos[i+1]-1)</code> for fast lookup. Indexing into the indirection map with index <code>k</code> will give a view into the values for vector <code>k</code>.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/core_types.jl#L1050-L1059" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.JacobiPreconditioner" href="#Jutul.JacobiPreconditioner"><span class="jlbinding">Jutul.JacobiPreconditioner</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Damped Jacobi preconditioner on CPU</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/linsolve/precond/jacobi.jl#L2-L4" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.JutulAutoDiffCache" href="#Jutul.JutulAutoDiffCache"><span class="jlbinding">Jutul.JutulAutoDiffCache</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>An AutoDiffCache is a type that holds both a set of AD values and a map into some global Jacobian.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/core_types.jl#L654-L657" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.JutulCase" href="#Jutul.JutulCase"><span class="jlbinding">Jutul.JutulCase</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JutulCase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model, dt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], forces </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> setup_forces</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model); state0 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, parameters </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, kwarg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Set up a structure that holds the complete specification of a simulation case.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/core_types.jl#L836-L840" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.JutulConfig" href="#Jutul.JutulConfig"><span class="jlbinding">Jutul.JutulConfig</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>JutulConfig(name = nothing)</p><p>A configuration object that acts like a <code>Dict{Symbol,Any}</code> but contains additional data to limit the valid keys and values to those added by <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.add_option!"><code>add_option!</code></a></p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/simulator/types.jl#L117-L122" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.JutulContext" href="#Jutul.JutulContext"><span class="jlbinding">Jutul.JutulContext</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Abstract type for the context Jutul should execute in (matrix formats, memory allocation, etc.)</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/core_types.jl#L83-L85" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.JutulDiscretization" href="#Jutul.JutulDiscretization"><span class="jlbinding">Jutul.JutulDiscretization</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">d </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> disc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Cells</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div><p>Ask discretization for entry <code>i</code> when discretizing some equation on the chosen entity (e.g. <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.Cells"><code>Cells</code></a>)</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/core_types.jl#L26-L31" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.JutulDiscretization-2" href="#Jutul.JutulDiscretization-2"><span class="jlbinding">Jutul.JutulDiscretization</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Abstract type for a Jutul discretization</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/core_types.jl#L21-L23" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.JutulDomain" href="#Jutul.JutulDomain"><span class="jlbinding">Jutul.JutulDomain</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Abstract type for domains where equations can be defined</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/domains.jl#L1-L3" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.JutulEntity" href="#Jutul.JutulEntity"><span class="jlbinding">Jutul.JutulEntity</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Super-type for all entities where <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.JutulVariables"><code>JutulVariables</code></a> can be defined.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/core_types.jl#L448-L450" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.JutulEquation" href="#Jutul.JutulEquation"><span class="jlbinding">Jutul.JutulEquation</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Abstract type for all residual equations</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/core_types.jl#L229-L231" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.JutulForce" href="#Jutul.JutulForce"><span class="jlbinding">Jutul.JutulForce</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Abstract type for driving forces</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/core_types.jl#L78-L80" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.JutulMatrixLayout" href="#Jutul.JutulMatrixLayout"><span class="jlbinding">Jutul.JutulMatrixLayout</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Abstract type for matrix layouts. A layout determines how primary variables and equations are ordered in a sparse matrix representation. Note that this is different from the matrix format itself as it concerns the ordering itself: For example, if all equations for a single cell come in sequence, or if a single equation is given for all entities before the next equation is written.</p><p>Different layouts does not change the solution of the system, but different linear solvers support different layouts.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/core_types.jl#L91-L100" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.JutulMesh" href="#Jutul.JutulMesh"><span class="jlbinding">Jutul.JutulMesh</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>A mesh is a type of domain that has been discretized. Abstract subtype.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/core_types.jl#L442-L444" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.JutulSystem" href="#Jutul.JutulSystem"><span class="jlbinding">Jutul.JutulSystem</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Abstract type for the physical system to be solved.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/core_types.jl#L16-L18" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.JutulVariables" href="#Jutul.JutulVariables"><span class="jlbinding">Jutul.JutulVariables</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Abstract type for all variables in Jutul.</p><p>A variable is associated with a <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.JutulEntity"><code>JutulEntity</code></a> through the <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.associated_entity-Tuple{JutulEquation}"><code>associated_entity</code></a> function. A variable is local to that entity, and cannot depend on other entities. Variables are used by models to define:</p><ul><li><p>primary variables: Sometimes referred to as degrees of freedom, primary unknowns or solution variables</p></li><li><p>parameters: Static quantities that impact the solution</p></li><li><p>secondary variables: Can be computed from a combination of other primary and secondary variables and parameters.</p></li></ul><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/core_types.jl#L45-L56" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.LUPreconditioner" href="#Jutul.LUPreconditioner"><span class="jlbinding">Jutul.LUPreconditioner</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Full LU factorization as preconditioner (intended for smaller subsystems)</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/linsolve/precond/various.jl#L8-L10" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.LUSolver" href="#Jutul.LUSolver"><span class="jlbinding">Jutul.LUSolver</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">LUSolver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; reuse_memory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, check </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, max_size </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 50000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Direct solver that calls <code>lu</code> directly. Direct solvers are highly accurate, but are costly in terms of memory usage and execution speed for larger systems.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/linsolve/scalar_cpu.jl#L2-L7" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.MRSTWrapMesh" href="#Jutul.MRSTWrapMesh"><span class="jlbinding">Jutul.MRSTWrapMesh</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MRSTWrapMesh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(G, N </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Mesh that adapts an exported MRST mesh to the Jutul interface. <code>G</code> is assumed to be read directly from file using <code>MAT.matread</code>. The raw exported grid can be found under the <code>data</code> field.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/meshes/mrst.jl#L9-L15" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.MultiModel" href="#Jutul.MultiModel"><span class="jlbinding">Jutul.MultiModel</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MultiModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(models)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MultiModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(models, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:SomeLabel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>A model variant that is made up of many named submodels, each a fully realized <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.SimulationModel-Tuple{Any, Any}"><code>SimulationModel</code></a>.</p><p><code>models</code> should be a <code>NamedTuple</code> or <code>Dict{Symbol, JutulModel}</code>.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/core_types.jl#L941-L948" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.NoEntity" href="#Jutul.NoEntity"><span class="jlbinding">Jutul.NoEntity</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>An entity for something that isn&#39;t associated with an entity</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/core_types.jl#L478-L480" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.Nodes" href="#Jutul.Nodes"><span class="jlbinding">Jutul.Nodes</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Entity for Nodes (intersection between multiple <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.Faces"><code>Faces</code></a>)</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/core_types.jl#L473-L475" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.ParallelCSRContext" href="#Jutul.ParallelCSRContext"><span class="jlbinding">Jutul.ParallelCSRContext</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>A context that uses a CSR sparse matrix format together with threads. Experimental.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/contexts/csr.jl#L2" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.SPAI0Preconditioner" href="#Jutul.SPAI0Preconditioner"><span class="jlbinding">Jutul.SPAI0Preconditioner</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Sparse Approximate Inverse preconditioner of lowest order – SPAI(0)</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/linsolve/precond/spai.jl#L1-L3" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.SPU" href="#Jutul.SPU"><span class="jlbinding">Jutul.SPU</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Single-point upwinding.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/conservation/flux.jl#L31-L33" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.ScalarVariable" href="#Jutul.ScalarVariable"><span class="jlbinding">Jutul.ScalarVariable</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Abstract type for scalar variables (one entry per entity, e.g. pressure or temperature in each cell of a model)</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/core_types.jl#L59-L62" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.SimulationModel-Tuple{Any, Any}" href="#Jutul.SimulationModel-Tuple{Any, Any}"><span class="jlbinding">Jutul.SimulationModel</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SimulationModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(domain, system; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">kwarg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Instantiate a model for a given <code>system</code> discretized on the <code>domain</code>.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/core_types.jl#L259-L263" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.SimulationModel-Tuple{JutulMesh, Any}" href="#Jutul.SimulationModel-Tuple{JutulMesh, Any}"><span class="jlbinding">Jutul.SimulationModel</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SimulationModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(g</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JutulMesh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, system; discretization </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, kwarg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Type that defines a simulation model - everything needed to solve the discrete equations.</p><p>The minimal setup requires a <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.JutulMesh"><code>JutulMesh</code></a> that defines topology together with a <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.JutulSystem"><code>JutulSystem</code></a> that imposes physical laws.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/core_types.jl#L486-L494" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.Simulator-Tuple{Any}" href="#Jutul.Simulator-Tuple{Any}"><span class="jlbinding">Jutul.Simulator</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Simulator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">kwarg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Set up a simulator object for a <code>model</code> that can be used by <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.simulate!-Tuple{JutulSimulator, AbstractVector}"><code>simulate!</code></a>. To avoid manually instantiating the simulator, the non-mutating <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.simulate-Tuple{Any, JutulModel, AbstractVector}"><code>simulate</code></a> interface can be used instead.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/simulator/types.jl#L19-L25" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.SparsityTracingWrapper-Union{Tuple{AbstractArray{T, N}}, Tuple{N}, Tuple{T}} where {T, N}" href="#Jutul.SparsityTracingWrapper-Union{Tuple{AbstractArray{T, N}}, Tuple{N}, Tuple{T}} where {T, N}"><span class="jlbinding">Jutul.SparsityTracingWrapper</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SparsityTracingWrapper</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractArray{T, N}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {T, N}</span></span></code></pre></div><p>Create a sparsity tracing wrapper for a numeric array. This wrapped array produces outputs that have the same value as the wrapped type, but contains a SparsityTracing seeded value with seed equal to the column index (if matrix) or linear index (if vector).</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/ad/sparsity.jl#L22-L29" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.TPFA" href="#Jutul.TPFA"><span class="jlbinding">Jutul.TPFA</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Two-point flux approximation.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/conservation/flux.jl#L12-L14" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.TwoPointFiniteVolumeGeometry" href="#Jutul.TwoPointFiniteVolumeGeometry"><span class="jlbinding">Jutul.TwoPointFiniteVolumeGeometry</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TwoPointFiniteVolumeGeometry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(neighbors, areas, volumes, normals, cell_centers, face_centers)</span></span></code></pre></div><p>Store two-point geometry information for a given list of <code>neighbors</code> specified as a <code>2</code> by <code>n</code> matrix where <code>n</code> is the number of faces such that face <code>i</code> connectes cells <code>N[1, i]</code> and <code>N[2, i]</code>.</p><p>The two-point finite-volume geometry contains the minimal set of geometry information required to compute standard finite-volume discretizations.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/meshes/meshes.jl#L19-L27" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.UnstructuredMesh-Tuple{CartesianMesh}" href="#Jutul.UnstructuredMesh-Tuple{CartesianMesh}"><span class="jlbinding">Jutul.UnstructuredMesh</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">UnstructuredMesh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(g</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CartesianMesh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Convert <code>CartesianMesh</code> instance to unstructured grid. Note that the mesh must be 2D and 3D for a 1-to-1 conversion. 1D meshes are implicitly converted to 2D.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/meshes/unstructured/types.jl#L289-L294" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.VariableSet" href="#Jutul.VariableSet"><span class="jlbinding">Jutul.VariableSet</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Set of a variable where variables are defined</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/dd/dd.jl#L6" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.VectorVariables" href="#Jutul.VectorVariables"><span class="jlbinding">Jutul.VectorVariables</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><p>Abstract type for vector variables (more than one entry per entity, for example saturations or displacements)</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/core_types.jl#L64-L67" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.absolute_increment_limit-Tuple{JutulVariables}" href="#Jutul.absolute_increment_limit-Tuple{JutulVariables}"><span class="jlbinding">Jutul.absolute_increment_limit</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Absolute allowable change for variable during a nonlinear update.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/variables/utils.jl#L86-L88" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.add_option!" href="#Jutul.add_option!"><span class="jlbinding">Jutul.add_option!</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">add_option!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(opts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JutulConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:my_cool_option</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;My option has this brief description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Add an option to existing <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.JutulConfig"><code>JutulConfig</code></a> structure. Additional currently undocumented keyword arguments can be used to restrict valid types and values.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/config.jl#L3-L8" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.align_to_jacobian!-NTuple{4, Any}" href="#Jutul.align_to_jacobian!-NTuple{4, Any}"><span class="jlbinding">Jutul.align_to_jacobian!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Update an equation so that it knows where to store its derivatives in the Jacobian representation.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/equations.jl#L423-L426" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.align_to_jacobian!-Tuple{ConservationLawTPFAStorage, ConservationLaw, Any, Any, Cells}" href="#Jutul.align_to_jacobian!-Tuple{ConservationLawTPFAStorage, ConservationLaw, Any, Any, Cells}"><span class="jlbinding">Jutul.align_to_jacobian!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Update positions of law&#39;s derivatives in global Jacobian</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/conservation/conservation.jl#L82" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.allocate_array_ad-Tuple{AbstractMatrix}" href="#Jutul.allocate_array_ad-Tuple{AbstractMatrix}"><span class="jlbinding">Jutul.allocate_array_ad</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">allocate_array_ad</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractMatrix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Convert matrix to AD matrix.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/ad/ad.jl#L346-L349" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.allocate_array_ad-Tuple{AbstractVector}" href="#Jutul.allocate_array_ad-Tuple{AbstractVector}"><span class="jlbinding">Jutul.allocate_array_ad</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">allocate_array_ad</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractVector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Convert vector to AD vector.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/ad/ad.jl#L336-L339" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.allocate_array_ad-Union{Tuple{Vararg{R}}, Tuple{R}} where R&lt;:Integer" href="#Jutul.allocate_array_ad-Union{Tuple{Vararg{R}}, Tuple{R}} where R&lt;:Integer"><span class="jlbinding">Jutul.allocate_array_ad</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">allocate_array_ad</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(n[, m]; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">keyword arguments</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Allocate vector or matrix as AD with optionally provided context and a specified non-zero on the diagonal.</p><p><strong>Arguments</strong></p><ul><li><p><code>n::Integer</code>: number of entries in vector, or number of rows if <code>m</code> is given.</p></li><li><p><code>m::Integer</code>: number of rows (optional)</p></li></ul><p><strong>Keyword arguments</strong></p><ul><li><p><code>npartials = 1</code>: Number of partials derivatives to allocate for each element</p></li><li><p><code>diag_pos = nothing</code>: Indices of where to put entities on the diagonal (if any)</p></li></ul><p>Other keyword arguments are passed onto <code>get_ad_entity_scalar</code>.</p><p><strong>Examples:</strong></p><p>Allocate a vector with a single partial:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> allocate_array_ad</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">element Vector{ForwardDiff</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Dual{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Float64, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Dual{nothing}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Dual{nothing}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Allocate a vector with two partials, and set the first to one:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> allocate_array_ad</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, diag_pos </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, npartials </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">element Vector{ForwardDiff</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Dual{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Float64, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Dual{nothing}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Dual{nothing}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Set up a matrix with two partials, where the first column has partials [1, 0] and the second [0, 1]:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> allocate_array_ad</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, diag_pos </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], npartials </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">×</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Matrix{ForwardDiff</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Dual{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Float64, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Dual{nothing}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Dual{nothing}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Dual{nothing}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Dual{nothing}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/ad/ad.jl#L278-L316" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.apply_forces!-NTuple{4, Any}" href="#Jutul.apply_forces!-NTuple{4, Any}"><span class="jlbinding">Jutul.apply_forces!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Apply a set of forces to all equations. Equations that don&#39;t support a given force will just ignore them, thanks to the power of multiple dispatch.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/models.jl#L850-L853" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.apply_forces_to_equation!-NTuple{7, Any}" href="#Jutul.apply_forces_to_equation!-NTuple{7, Any}"><span class="jlbinding">Jutul.apply_forces_to_equation!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">apply_forces_to_equation!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(diag_part, storage, model, eq, eq_s, force, time)</span></span></code></pre></div><p>Update an equation with the effect of a force. The default behavior for any force we do not know about is to assume that the force does not impact this particular equation.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/equations.jl#L570-L576" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.as_value-Tuple{AbstractArray}" href="#Jutul.as_value-Tuple{AbstractArray}"><span class="jlbinding">Jutul.as_value</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Create a mapped array that produces only the values when indexed.</p><p>Only useful for AD arrays, otherwise it does nothing.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/ad/ad.jl#L421-L425" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.associated_entity-Tuple{JutulEquation}" href="#Jutul.associated_entity-Tuple{JutulEquation}"><span class="jlbinding">Jutul.associated_entity</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Return the domain entity the equation is associated with</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/equations.jl#L255-L257" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.associated_entity-Tuple{JutulVariables}" href="#Jutul.associated_entity-Tuple{JutulVariables}"><span class="jlbinding">Jutul.associated_entity</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>The entity a variable is associated with, and can hold partial derivatives with respect to.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/variables/utils.jl#L9-L11" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.cell_dims-Tuple{Any, Any}" href="#Jutul.cell_dims-Tuple{Any, Any}"><span class="jlbinding">Jutul.cell_dims</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cell_dims</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(g, pos)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Tuple</span></span></code></pre></div><p>Get physical cell dimensions of cell with index <code>pos</code> for grid <code>g</code>.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/meshes/cart.jl#L121-L125" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.cell_index-Tuple{Any, Tuple}" href="#Jutul.cell_index-Tuple{Any, Tuple}"><span class="jlbinding">Jutul.cell_index</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cell_index</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(g, pos)</span></span></code></pre></div><p>Get linear (scalar) index of mesh cell from provided IJK tuple <code>pos</code>.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/meshes/cart.jl#L99-L103" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.check_amgcl_availability-Tuple{}" href="#Jutul.check_amgcl_availability-Tuple{}"><span class="jlbinding">Jutul.check_amgcl_availability</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">check_amgcl_availability</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; throw </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Check if AMGCLWrap extension is available. If <code>throw=true</code> this wil be an error, otherwise a Boolean indicating if the extension is available will be returned.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/ext/amgclwrap_ext.jl#L20-L25" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.compress_timesteps" href="#Jutul.compress_timesteps"><span class="jlbinding">Jutul.compress_timesteps</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compress_timesteps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(timesteps, forces </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; max_step </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Inf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Compress a set of timesteps and forces to the largest possible steps that still covers the same interval and changes forces at exactly the same points in time, while being limited to a maximum size of <code>max_step</code>.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/timesteps.jl#L201-L207" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.compress_timesteps-Tuple{JutulCase}" href="#Jutul.compress_timesteps-Tuple{JutulCase}"><span class="jlbinding">Jutul.compress_timesteps</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compress_timesteps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(case</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JutulCase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; max_step </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Inf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Compress time steps for a Jutul case. See <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.compress_timesteps"><code>compress_timesteps</code></a> for the general case.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/timesteps.jl#L258-L263" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.compute_boundary_trans-Tuple{DataDomain, Any}" href="#Jutul.compute_boundary_trans-Tuple{DataDomain, Any}"><span class="jlbinding">Jutul.compute_boundary_trans</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compute_boundary_trans</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DataDomain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, perm)</span></span></code></pre></div><p>Compute the boundary half face transmissibilities for perm. The input <code>perm</code> can either be the symbol of some data defined on <code>Cells()</code>, a vector of numbers for each cell or a matrix with number of columns equal to the number of cells.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/discretization/finite-volume.jl#L230-L237" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.compute_face_trans-Tuple{DataDomain, Vararg{Any}}" href="#Jutul.compute_face_trans-Tuple{DataDomain, Vararg{Any}}"><span class="jlbinding">Jutul.compute_face_trans</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>compute_face_trans(g::DataDomain, perm)</p><p>Compute face trans for the interior faces. The input <code>perm</code> can either be the symbol of some data defined on <code>Cells()</code>, a vector of numbers for each cell or a matrix with number of columns equal to the number of cells.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/discretization/finite-volume.jl#L213-L219" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.compute_half_face_trans-Tuple{DataDomain, Any}" href="#Jutul.compute_half_face_trans-Tuple{DataDomain, Any}"><span class="jlbinding">Jutul.compute_half_face_trans</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">compute_half_face_trans</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(g</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DataDomain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, perm)</span></span></code></pre></div><p>Compute half-face trans for the interior faces. The input <code>perm</code> can either be the symbol of some data defined on <code>Cells()</code>, a vector of numbers for each cell or a matrix with number of columns equal to the number of cells.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/discretization/finite-volume.jl#L8-L14" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.convergence_criterion-Tuple{Any, Any, JutulEquation, Any, Any}" href="#Jutul.convergence_criterion-Tuple{Any, Any, JutulEquation, Any, Any}"><span class="jlbinding">Jutul.convergence_criterion</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">convergence_criterion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model, storage, eq, eq_s, r; dt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Get the convergence criterion values for a given equation. Can be checked against the corresponding tolerances.</p><p><strong>Arguments</strong></p><ul><li><p><code>model</code>: model that generated the current equation.</p></li><li><p><code>storage</code>: global simulator storage.</p></li><li><p><code>eq::JutulEquation</code>: equation implementation currently being checked</p></li><li><p><code>eq_s</code>: storage for <code>eq</code> where values are contained.</p></li><li><p><code>r</code>: the local residual part corresponding to this model, as a matrix with column index equaling entity index</p></li></ul><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/equations.jl#L581-L592" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.convert_from_si-Tuple{Any, String}" href="#Jutul.convert_from_si-Tuple{Any, String}"><span class="jlbinding">Jutul.convert_from_si</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">convert_from_si</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value, unit_name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Union{Symbol, String}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Convert <code>value</code> from SI representation to the unit in <code>unit_symbol</code>.</p><p><strong>Examples</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> convert_from_si</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3600.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:hour</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Get 3600 s represented as hours</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span></span></code></pre></div><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/units/interface.jl#L29-L39" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.convert_state_ad" href="#Jutul.convert_state_ad"><span class="jlbinding">Jutul.convert_state_ad</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><p>Convert a state containing variables as arrays of doubles to a state where those arrays contain the same value as Dual types. The dual type is currently taken from ForwardDiff.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/ad/ad.jl#L217-L221" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.convert_to_si-Tuple{Any, String}" href="#Jutul.convert_to_si-Tuple{Any, String}"><span class="jlbinding">Jutul.convert_to_si</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">convert_to_si</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value, unit_name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Convert <code>value</code> to SI representation from value in the unit given by <code>unit_symbol</code>.</p><p><strong>Examples</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> convert_to_si</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:hour</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Get 1 hour represented as seconds</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3600.0</span></span></code></pre></div><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/units/interface.jl#L1-L12" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.coord_offset-Tuple{Any, AbstractFloat}" href="#Jutul.coord_offset-Tuple{Any, AbstractFloat}"><span class="jlbinding">Jutul.coord_offset</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Lower corner for one dimension, without any transforms applied</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/meshes/cart.jl#L93-L95" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.data_domain_to_parameters_gradient-Tuple{Any, Any}" href="#Jutul.data_domain_to_parameters_gradient-Tuple{Any, Any}"><span class="jlbinding">Jutul.data_domain_to_parameters_gradient</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">data_domain_to_parameters_gradient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model, parameter_gradient; dp_dd </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> missing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, config </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Make a data_domain copy that contains the gradient of some objective with respect to the fields in the data_domain, assuming that the parameters were initialized directly from the data_domain via (<code>setup_parameters</code>)[@ref].</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/variables/vectorization.jl#L202-L208" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.declare_pattern-Tuple{Any, Any, Any, Any, Vararg{Any}}" href="#Jutul.declare_pattern-Tuple{Any, Any, Any, Any, Vararg{Any}}"><span class="jlbinding">Jutul.declare_pattern</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Give out source, target arrays of equal length for a given equation attached to the given model.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/equations.jl#L389-L392" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.declare_sparsity" href="#Jutul.declare_sparsity"><span class="jlbinding">Jutul.declare_sparsity</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><p>Give out I, J arrays of equal length for a given equation attached to the given model.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/equations.jl#L302-L305" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.degrees_of_freedom_per_entity-Tuple{Any, ScalarVariable}" href="#Jutul.degrees_of_freedom_per_entity-Tuple{Any, ScalarVariable}"><span class="jlbinding">Jutul.degrees_of_freedom_per_entity</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Number of independent primary variables / degrees of freedom per computational entity.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/variables/utils.jl#L73-L75" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.descalarize_primary_variable!-Tuple{Any, Any, Any, ScalarVariable, Any}" href="#Jutul.descalarize_primary_variable!-Tuple{Any, Any, Any, ScalarVariable, Any}"><span class="jlbinding">Jutul.descalarize_primary_variable!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">descalarize_primary_variable!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dest_array, model, V, var</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Jutul.ScalarVariable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, index)</span></span></code></pre></div><p>Descalarize a primary variable, overwriting dest_array at entity <code>index</code>. The AD status of entries in <code>dest_array</code> will be retained.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/variables/scalarization.jl#L49-L54" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.descalarize_primary_variables!" href="#Jutul.descalarize_primary_variables!"><span class="jlbinding">Jutul.descalarize_primary_variables!</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">descalarize_primary_variables!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state, model, V, pvars</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pairs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">primary_variables)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), ind </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> eachindex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(V))</span></span></code></pre></div><p>Replace valeus in <code>state</code> by the scalarized values found in V.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/variables/scalarization.jl#L130-L134" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.dim-Tuple{JutulMesh}" href="#Jutul.dim-Tuple{JutulMesh}"><span class="jlbinding">Jutul.dim</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dim</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(g)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Integer</span></span></code></pre></div><p>Get the dimension of a mesh.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/meshes/meshes.jl#L136-L140" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.expand_to_ministeps-Tuple{Any, Any}" href="#Jutul.expand_to_ministeps-Tuple{Any, Any}"><span class="jlbinding">Jutul.expand_to_ministeps</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">substates, dt, report_index </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> expand_to_ministeps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(states, reports)</span></span></code></pre></div><p>Get states and timesteps at the finest stored resolution. Output lengths depend on if <code>output_substates</code> option to simulator was enabled.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/utils.jl#L748-L753" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.expand_to_ministeps-Tuple{Jutul.SimResult}" href="#Jutul.expand_to_ministeps-Tuple{Jutul.SimResult}"><span class="jlbinding">Jutul.expand_to_ministeps</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">substates, dt, report_index </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> expand_to_ministeps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SimResult</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Get states and timesteps at the finest stored resolution. Output lengths depend on if <code>output_substates</code> option to simulator was enabled.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/utils.jl#L737-L742" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.extra_debug_output!-NTuple{6, Any}" href="#Jutul.extra_debug_output!-NTuple{6, Any}"><span class="jlbinding">Jutul.extra_debug_output!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">extra_debug_output!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(report, storage, model, config, iteration, dt)</span></span></code></pre></div><p>Add extra debug output to report during a nonlinear iteration.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/simulator/simulator.jl#L747-L751" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.extract_submesh-Tuple{UnstructuredMesh, Any}" href="#Jutul.extract_submesh-Tuple{UnstructuredMesh, Any}"><span class="jlbinding">Jutul.extract_submesh</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">extract_submesh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(g</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">UnstructuredMesh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, cells)</span></span></code></pre></div><p>Extract a subgrid for a given mesh and a iterable of <code>cells</code> to keep.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/meshes/unstructured/utils.jl#L27-L31" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.find_enclosing_cell-Union{Tuple{T}, Tuple{D}, Tuple{UnstructuredMesh{D}, StaticArraysCore.SVector{D, T}, Vararg{AbstractArray{StaticArraysCore.SVector{D, T}, 1}, 4}}, Tuple{UnstructuredMesh{D}, StaticArraysCore.SVector{D, T}, AbstractArray{StaticArraysCore.SVector{D, T}, 1}, AbstractArray{StaticArraysCore.SVector{D, T}, 1}, AbstractArray{StaticArraysCore.SVector{D, T}, 1}, AbstractArray{StaticArraysCore.SVector{D, T}, 1}, Any}} where {D, T}" href="#Jutul.find_enclosing_cell-Union{Tuple{T}, Tuple{D}, Tuple{UnstructuredMesh{D}, StaticArraysCore.SVector{D, T}, Vararg{AbstractArray{StaticArraysCore.SVector{D, T}, 1}, 4}}, Tuple{UnstructuredMesh{D}, StaticArraysCore.SVector{D, T}, AbstractArray{StaticArraysCore.SVector{D, T}, 1}, AbstractArray{StaticArraysCore.SVector{D, T}, 1}, AbstractArray{StaticArraysCore.SVector{D, T}, 1}, AbstractArray{StaticArraysCore.SVector{D, T}, 1}, Any}} where {D, T}"><span class="jlbinding">Jutul.find_enclosing_cell</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">find_enclosing_cell</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(G</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">UnstructuredMesh{D}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, pt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SVector{D, T}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    normals</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractVector{SVector{D, T}}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    face_centroids</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractVector{SVector{D, T}}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    boundary_normals</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractVector{SVector{D, T}}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    boundary_centroids</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractVector{SVector{D, T}}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cells </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">number_of_cells</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(G)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {D, T}</span></span></code></pre></div><p>Find enclosing cell of a point. This can be a bit expensive for larger meshes. Recommended to use the more high level <code>find_enclosing_cells</code> instead.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/meshes/trajectories.jl#L94-L105" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.find_enclosing_cells-Tuple{Any, Any}" href="#Jutul.find_enclosing_cells-Tuple{Any, Any}"><span class="jlbinding">Jutul.find_enclosing_cells</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">find_enclosing_cells</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(G, traj; geometry </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> tpfv_geometry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(G), n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 25</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Find the cell indices of cells in the mesh <code>G</code> that are intersected by a given trajectory <code>traj</code>. <code>traj</code> can be either a matrix with equal number of columns as dimensions in G (i.e. three columns for 3D) or a <code>Vector</code> of <code>SVector</code> instances with the same length.</p><p>The optional argument <code>geometry</code> is used to define the centroids and normals used in the calculations. You can precompute this if you need to perform many searches. The keyword argument <code>n</code> can be used to set the number of discretizations in each segment.</p><p>Examples:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 3D mesh</span></span>
<span class="line"><span>G = CartesianMesh((4, 4, 5), (100.0, 100.0, 100.0))</span></span>
<span class="line"><span>trajectory = [</span></span>
<span class="line"><span>    50.0 25.0 1;</span></span>
<span class="line"><span>    55 35.0 25;</span></span>
<span class="line"><span>    65.0 40.0 50.0;</span></span>
<span class="line"><span>    70.0 70.0 90.0</span></span>
<span class="line"><span>]</span></span>
<span class="line"><span></span></span>
<span class="line"><span>cells = Jutul.find_enclosing_cells(G, trajectory)</span></span>
<span class="line"><span></span></span>
<span class="line"><span># Optional plotting, requires Makie:</span></span>
<span class="line"><span>fig, ax, plt = Jutul.plot_mesh_edges(G)</span></span>
<span class="line"><span>plot_mesh!(ax, G, cells = cells, alpha = 0.5, transparency = true)</span></span>
<span class="line"><span>lines!(ax, trajectory, linewidth = 10)</span></span>
<span class="line"><span>fig</span></span>
<span class="line"><span># 2D mesh</span></span>
<span class="line"><span>G = CartesianMesh((50, 50), (1.0, 2.0))</span></span>
<span class="line"><span>trajectory = [</span></span>
<span class="line"><span>    0.1 0.1;</span></span>
<span class="line"><span>    0.2 0.4;</span></span>
<span class="line"><span>    0.3 1.2</span></span>
<span class="line"><span>]</span></span>
<span class="line"><span>fig, ax, plt = Jutul.plot_mesh_edges(G)</span></span>
<span class="line"><span>cells = Jutul.find_enclosing_cells(G, trajectory)</span></span>
<span class="line"><span># Plotting, needs Makie</span></span>
<span class="line"><span>fig, ax, plt = Jutul.plot_mesh_edges(G)</span></span>
<span class="line"><span>plot_mesh!(ax, G, cells = cells, alpha = 0.5, transparency = true)</span></span>
<span class="line"><span>lines!(ax, trajectory[:, 1], trajectory[:, 2], linewidth = 3)</span></span>
<span class="line"><span>fig</span></span></code></pre></div><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/meshes/trajectories.jl#L12-L58" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.full_cell-Tuple{Any, Any}" href="#Jutul.full_cell-Tuple{Any, Any}"><span class="jlbinding">Jutul.full_cell</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Inner cell to local cell (full set)</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/dd/trivial_map.jl#L35" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.get_1d_interpolator-Tuple{Any, Any}" href="#Jutul.get_1d_interpolator-Tuple{Any, Any}"><span class="jlbinding">Jutul.get_1d_interpolator</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get_1d_interpolator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(xs, ys; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">keyword arguments</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Get a 1D interpolator <code>F(x) ≈ y</code> for a table <code>xs, ys</code> that by default does constant extrapolation</p><p><strong>Arguments</strong></p><ul><li><p><code>xs</code>: sorted list of parameter points.</p></li><li><p><code>ys</code>: list of function values with equal length to <code>xs</code></p></li><li><p><code>method=LinearInterpolant</code>: constructor for the interpolation. Defaults to <code>LinearInterpolant</code> which does simple linear interpolation.</p></li><li><p><code>cap_endpoints = true</code>: Add values so that the endpoints are capped (constant extrapolation). Otherwise, the extrapolation will match the method.</p></li><li><p><code>cap_start = cap_endpoints</code>: Fine-grained version of cap_endpoints for the start of the interval only (extrapolation for <code>x &lt; xs[1]</code>)</p></li><li><p><code>cap_end = cap_endpoints</code>:Fine-grained version of cap_endpoints for the end of the interval only (extrapolation for <code>x &gt; xs[end]</code>)</p></li></ul><p>Additional keyword arguments are passed onto the interpolator constructor.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/interpolation.jl#L96-L111" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.get_2d_interpolator-Tuple{Any, Any, Any}" href="#Jutul.get_2d_interpolator-Tuple{Any, Any, Any}"><span class="jlbinding">Jutul.get_2d_interpolator</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get_2d_interpolator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(xs, ys, fs; method </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BilinearInterpolant, cap_endpoints </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>For <code>xs</code> of length <code>nx</code> and <code>ys</code> of length <code>ny</code> generate a 2D interpolation for values given as a <code>nx</code> by <code>ny</code> matrix. By default <code>cap_endpoints=true</code>, and constant extrapolation is used. Fine-grined control over extrapolation can be achieved by setting the keywords arguments <code>cap_x = (cap_low_x, cap_high_x)</code> and analogously for <code>cap_y</code>.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/interpolation.jl#L207-L215" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.get_ad_entity_scalar-Union{Tuple{T}, Tuple{T, Any}, Tuple{T, Any, Any}} where T&lt;:Real" href="#Jutul.get_ad_entity_scalar-Union{Tuple{T}, Tuple{T, Any}, Tuple{T, Any, Any}} where T&lt;:Real"><span class="jlbinding">Jutul.get_ad_entity_scalar</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get_ad_entity_scalar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(v</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Real</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, npartials, diag_pos </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">keyword_arguments</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Get scalar with partial derivatives as AD instance.</p><p><strong>Arguments</strong></p><ul><li><p><code>v::Real</code>: Value of AD variable.</p></li><li><p><code>npartials</code>: Number of partial derivatives each AD instance holds.</p></li><li><p><code>diag_pos</code> = nothing: Position(s) of where to set 1 as the partial derivative instead of zero.</p></li></ul><p><strong>Keyword arguments</strong></p><ul><li><code>tag = nothing</code>: Tag for AD instance. Two AD values of the different tag cannot interoperate to avoid perturbation confusion (see ForwardDiff documentation).</li></ul><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/ad/ad.jl#L356-L368" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.get_dependencies-Tuple{Any, Any}" href="#Jutul.get_dependencies-Tuple{Any, Any}"><span class="jlbinding">Jutul.get_dependencies</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Get dependencies of variable when viewed as a secondary variable. Normally autogenerated with @jutul_secondary</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/variable_evaluation.jl#L199-L201" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.get_diagonal_entries-Tuple{JutulEquation, Any}" href="#Jutul.get_diagonal_entries-Tuple{JutulEquation, Any}"><span class="jlbinding">Jutul.get_diagonal_entries</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get_diagonal_entries</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(eq</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JutulEquation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, eq_s)</span></span></code></pre></div><p>Get the diagonal entries of a cache, i.e. the entries where entity type and index equals that of the governing equation.</p><p>Note: Be very careful about modifications to this array, as this is a view into the internal AD buffers and it is very easy to create inconsistent Jacobians.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/equations.jl#L609-L616" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.get_entity_tag-Tuple{Any, Any}" href="#Jutul.get_entity_tag-Tuple{Any, Any}"><span class="jlbinding">Jutul.get_entity_tag</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get_entity_tag</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(basetag, entity)</span></span></code></pre></div><p>Combine a base tag (which can be nothing) with a entity to get a tag that captures base tag + entity tag for use with AD initialization.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/ad/ad.jl#L438-L443" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.get_entries-Tuple{CompactAutoDiffCache}" href="#Jutul.get_entries-Tuple{CompactAutoDiffCache}"><span class="jlbinding">Jutul.get_entries</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Get entries of autodiff cache. Entries are AD vectors that hold values and derivatives.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/ad/compact.jl#L1-L3" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.get_entries-Tuple{JutulEquation}" href="#Jutul.get_entries-Tuple{JutulEquation}"><span class="jlbinding">Jutul.get_entries</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Get the entries of the main autodiff cache for an equation.</p><p>Note: This only gets the .equation field&#39;s entries.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/ad/ad.jl#L19-L23" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.get_mesh_entity_tag-Tuple{JutulMesh, Vararg{Any}}" href="#Jutul.get_mesh_entity_tag-Tuple{JutulMesh, Vararg{Any}}"><span class="jlbinding">Jutul.get_mesh_entity_tag</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get_mesh_entity_tag</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(met</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JutulMesh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, entity</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JutulEntity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, tag_group</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Symbol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, tag_value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> missing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; throw </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Get the indices tagged for <code>entity</code> in group <code>tag_group</code>, optionally for the specific <code>tag_value</code>. If <code>ismissing(tag_value)</code>, the Dict containing the tag group will be returned.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/core_types.jl#L1227-L1233" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.get_parameters-Tuple{SimulationModel}" href="#Jutul.get_parameters-Tuple{SimulationModel}"><span class="jlbinding">Jutul.get_parameters</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get_parameters</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SimulationModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Get the parameter definitions (as <code>OrderedDict</code>) for a given <code>model</code>.</p><p>Parameters are defined as static values in a forward simulation that combine with the primary variables to compute secondary variables and model equations.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/models.jl#L42-L49" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.get_primary_variable_ordered_entities-Tuple{SimulationModel}" href="#Jutul.get_primary_variable_ordered_entities-Tuple{SimulationModel}"><span class="jlbinding">Jutul.get_primary_variable_ordered_entities</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get_primary_variable_ordered_entities</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SimulationModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Get only the entities where primary variables are present, sorted by their order in the primary variables.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/models.jl#L184-L188" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.get_primary_variables-Tuple{SimulationModel}" href="#Jutul.get_primary_variables-Tuple{SimulationModel}"><span class="jlbinding">Jutul.get_primary_variables</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get_primary_variables</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SimulationModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Get the primary variable definitions (as <code>OrderedDict</code>) for a given <code>model</code>.</p><p>Primary variables are sometimes referred to as solution variables or primary unknowns. The set of primary variables completely determines the state of the system together with the <code>parameters</code>.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/models.jl#L5-L13" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.get_secondary_variables-Tuple{SimulationModel}" href="#Jutul.get_secondary_variables-Tuple{SimulationModel}"><span class="jlbinding">Jutul.get_secondary_variables</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get_secondary_variables</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SimulationModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Get the secondary variable definitions (as <code>OrderedDict</code>) for a given <code>model</code>.</p><p>Secondary variables are variables that can be computed from the primary variables together with the parameters.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/models.jl#L18-L25" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.get_sparse_arguments-Tuple{Any, Any}" href="#Jutul.get_sparse_arguments-Tuple{Any, Any}"><span class="jlbinding">Jutul.get_sparse_arguments</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get_sparse_arguments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(storage, model)</span></span></code></pre></div><p>Get the [<code>SparsePattern</code>]@ref for the Jacobian matrix of a given simulator storage and corresponding model.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/models.jl#L551-L555" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.get_tstr" href="#Jutul.get_tstr"><span class="jlbinding">Jutul.get_tstr</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get_tstr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dT, lim </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Get formatted time string of <code>dT</code> given in seconds, limited to <code>lim</code> number of units.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/simulator/utils.jl#L1-L5" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.get_variable-Tuple{SimulationModel, Symbol}" href="#Jutul.get_variable-Tuple{SimulationModel, Symbol}"><span class="jlbinding">Jutul.get_variable</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get_variable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SimulationModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Symbol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Get implementation of variable or parameter with name <code>name</code> for the model.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/models.jl#L69-L73" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.get_variables-Tuple{SimulationModel}" href="#Jutul.get_variables-Tuple{SimulationModel}"><span class="jlbinding">Jutul.get_variables</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">get_variables</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SimulationModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Get all variable definitions (as <code>OrderedDict</code>) for a given <code>model</code>.</p><p>This is the union of <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.get_secondary_variables-Tuple{SimulationModel}"><code>get_secondary_variables</code></a> and <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.get_primary_variables-Tuple{SimulationModel}"><code>get_primary_variables</code></a>.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/models.jl#L31-L37" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.global_cell-Tuple{Any, Any}" href="#Jutul.global_cell-Tuple{Any, Any}"><span class="jlbinding">Jutul.global_cell</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Local cell -&gt; global cell (full set)</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/dd/trivial_map.jl#L23" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.global_face-Tuple{Any, Any}" href="#Jutul.global_face-Tuple{Any, Any}"><span class="jlbinding">Jutul.global_face</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Local face -&gt; global face (full set)</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/dd/trivial_map.jl#L21" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.initialize_context!-NTuple{4, Any}" href="#Jutul.initialize_context!-NTuple{4, Any}"><span class="jlbinding">Jutul.initialize_context!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Initialize context when setting up a model</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/context.jl#L62-L64" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.initialize_extra_state_fields!-Tuple{Any, JutulModel}" href="#Jutul.initialize_extra_state_fields!-Tuple{Any, JutulModel}"><span class="jlbinding">Jutul.initialize_extra_state_fields!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">initialize_extra_state_fields!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state, model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JutulModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Add model-dependent changing variables that need to be in state, but are never AD variables themselves (for example status flags).</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/models.jl#L267-L272" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.initialize_storage!-Tuple{Any, JutulModel}" href="#Jutul.initialize_storage!-Tuple{Any, JutulModel}"><span class="jlbinding">Jutul.initialize_storage!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">initialize_storage!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(storage, model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JutulModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; initialize_state0 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Initialize the already allocated storage at the beginning of a simulation. Use this to e.g. set up extra stuff in state0 needed for initializing the simulation loop.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/models.jl#L387-L392" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.initialize_variable_value-Tuple{Any, VectorVariables, AbstractVector}" href="#Jutul.initialize_variable_value-Tuple{Any, VectorVariables, AbstractVector}"><span class="jlbinding">Jutul.initialize_variable_value</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Initializer for the value of non-scalar primary variables</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/variables/utils.jl#L322-L324" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.interior_cell-Tuple{Any, Any}" href="#Jutul.interior_cell-Tuple{Any, Any}"><span class="jlbinding">Jutul.interior_cell</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Local cell in full set -&gt; inner cell (or zero)</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/dd/trivial_map.jl#L32" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.interpolation_constant_lookup" href="#Jutul.interpolation_constant_lookup"><span class="jlbinding">Jutul.interpolation_constant_lookup</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">interpolation_constant_lookup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(X, constant_dx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> missing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Generate a lookup table for linear interpolation when dx is evenly spaced.</p><p>Note: Setting <code>constant_dx=true</code> can lead to incorrect interpolations if the data is not evenly spaced.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/interpolation.jl#L43-L50" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.jutul_output_path" href="#Jutul.jutul_output_path"><span class="jlbinding">Jutul.jutul_output_path</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">pth </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> jutul_output_path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> missing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; subfolder </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;jutul&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, basedir </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> missing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, create </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Get path for output. The final path will be found in /basedir/&lt;subfolder/name. If <code>subfolder=missing</code>, the path will be set to /basedir/name instead. <code>name</code> will be autogenerated if not provided.</p><p>Pass the optional input <code>create = false</code> to avoid making the directory. To globally set the default output dir, set <code>ENV[&quot;JUTUL_OUTPUT_PATH&quot;]``to your desired</code>basedir``.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/utils.jl#L931-L940" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.linear_timestep_selection" href="#Jutul.linear_timestep_selection"><span class="jlbinding">Jutul.linear_timestep_selection</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">linear_timestep_selection</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x, x0, x1, dt0, dt1)</span></span></code></pre></div><p>Produce linear estimate of timestep <code>dt</code> for some value <code>x</code> from observed observations. If the observations have the same <code>x</code> or <code>dt</code> values, a simple scaling based on the <code>x1</code> value is used.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/timesteps.jl#L179-L185" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.load_balanced_endpoint-Tuple{Any, Any, Any}" href="#Jutul.load_balanced_endpoint-Tuple{Any, Any, Any}"><span class="jlbinding">Jutul.load_balanced_endpoint</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">load_balanced_endpoint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(block_index, nvals, nblocks)</span></span></code></pre></div><p>Endpoint for interval <code>block_index</code> that subdivides <code>nvals</code> into <code>nblocks</code> in a load balanced manner. This is done by adding one element to the first set of blocks whenever possible.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/partitioning.jl#L209-L215" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.load_balanced_interval-Tuple{Any, Any, Any}" href="#Jutul.load_balanced_interval-Tuple{Any, Any, Any}"><span class="jlbinding">Jutul.load_balanced_interval</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">load_balanced_interval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(b, n, m)</span></span></code></pre></div><p>Create UnitRange for block b ∈ [1, m] for interval of total length n</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/partitioning.jl#L226-L230" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.local_ad-Tuple{Any, Any, Any}" href="#Jutul.local_ad-Tuple{Any, Any, Any}"><span class="jlbinding">Jutul.local_ad</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">local_ad</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, index</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">I</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ad_tag</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:∂T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {T, I</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ∂T}</span></span></code></pre></div><p>Create local_ad for state for index I of AD tag of type ad_tag</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/ad/local_ad.jl#L157-L161" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.local_cell-Tuple{Any, Any}" href="#Jutul.local_cell-Tuple{Any, Any}"><span class="jlbinding">Jutul.local_cell</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Global cell -&gt; local cell (full set)</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/dd/trivial_map.jl#L26" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.local_face-Tuple{Any, Any}" href="#Jutul.local_face-Tuple{Any, Any}"><span class="jlbinding">Jutul.local_face</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Global face -&gt; local face (full set)</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/dd/trivial_map.jl#L30" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.local_residual_view-NTuple{4, Any}" href="#Jutul.local_residual_view-NTuple{4, Any}"><span class="jlbinding">Jutul.local_residual_view</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">local_residual_view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r_buf, model, eq, equation_offset)</span></span></code></pre></div><p>Get a matrix view of the residual so that, independent of ordering, the column index corresponds to the entity index for the given equation <code>eq</code> starting at <code>equation_offset</code> in the global residual buffer <code>r_buf</code>.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/models.jl#L750-L756" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.maximum_value-Tuple{JutulVariables}" href="#Jutul.maximum_value-Tuple{JutulVariables}"><span class="jlbinding">Jutul.maximum_value</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Upper (inclusive) limit for variable.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/variables/utils.jl#L98-L100" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.merge_step_report_errors-Tuple{Any}" href="#Jutul.merge_step_report_errors-Tuple{Any}"><span class="jlbinding">Jutul.merge_step_report_errors</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">merge_step_report_errors</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data; fn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> max)</span></span></code></pre></div><p>Merge step reports errors of the same type using a pair wise reduction (default: max)</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/utils.jl#L1001-L1005" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.minimum_value-Tuple{JutulVariables}" href="#Jutul.minimum_value-Tuple{JutulVariables}"><span class="jlbinding">Jutul.minimum_value</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Lower (inclusive) limit for variable.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/variables/utils.jl#L103-L105" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.model_accumulation!" href="#Jutul.model_accumulation!"><span class="jlbinding">Jutul.model_accumulation!</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">model_accumulation!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(acc, sim</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">HelperSimulator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, x, dt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    forces </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> setup_forces</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sim</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">model),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    update_secondary </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    kwarg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Compute the accumulation term into Vector acc.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/simulator/helper.jl#L106-L114" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.model_residual!" href="#Jutul.model_residual!"><span class="jlbinding">Jutul.model_residual!</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">model_residual!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r, sim, x, x0 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> missing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, dt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    forces </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> setup_forces</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sim</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">model),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    include_accumulation </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    kwarg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Fill in the model residual into Vector r.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/simulator/helper.jl#L60-L68" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.model_residual-Union{Tuple{T}, Tuple{HelperSimulator{&lt;:Any, &lt;:Any, &lt;:Any, T}, Any, Vararg{Any}}} where T" href="#Jutul.model_residual-Union{Tuple{T}, Tuple{HelperSimulator{&lt;:Any, &lt;:Any, &lt;:Any, T}, Any, Vararg{Any}}} where T"><span class="jlbinding">Jutul.model_residual</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">model_residual</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sim</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">HelperSimulator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, x, y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> missing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; kwarg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Out of place version of <code>model_residual!</code></p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/simulator/helper.jl#L47-L51" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.number_of_cells-Tuple{JutulMesh}" href="#Jutul.number_of_cells-Tuple{JutulMesh}"><span class="jlbinding">Jutul.number_of_cells</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">number_of_cells</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(g)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Integer</span></span></code></pre></div><p>Get the number of cells in a mesh.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/meshes/meshes.jl#L143-L147" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.number_of_degrees_of_freedom-Tuple{JutulModel}" href="#Jutul.number_of_degrees_of_freedom-Tuple{JutulModel}"><span class="jlbinding">Jutul.number_of_degrees_of_freedom</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Total number of degrees of freedom for a model, over all primary variables and all entities.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/variables/utils.jl#L14-L16" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.number_of_entities-Tuple{Any, JutulEquation}" href="#Jutul.number_of_entities-Tuple{Any, JutulEquation}"><span class="jlbinding">Jutul.number_of_entities</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Get the number of entities (e.g. the number of cells) that the equation is defined on.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/equations.jl#L280-L282" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.number_of_entities-Tuple{Any, JutulVariables}" href="#Jutul.number_of_entities-Tuple{Any, JutulVariables}"><span class="jlbinding">Jutul.number_of_entities</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Number of entities (e.g. Cells, Faces) a variable is defined on. By default, each primary variable exists on all cells of a discretized domain</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/variables/utils.jl#L2-L6" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.number_of_entities-Tuple{JutulAutoDiffCache}" href="#Jutul.number_of_entities-Tuple{JutulAutoDiffCache}"><span class="jlbinding">Jutul.number_of_entities</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Get number of entities a cache is defined on.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/ad/ad.jl#L3-L5" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.number_of_entities-Tuple{T} where T&lt;:(AbstractVector)" href="#Jutul.number_of_entities-Tuple{T} where T&lt;:(AbstractVector)"><span class="jlbinding">Jutul.number_of_entities</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Number of entities for vector stored in state (just the number of elements)</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/ad/ad.jl#L9-L11" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.number_of_entities-Tuple{T} where T&lt;:AbstractArray" href="#Jutul.number_of_entities-Tuple{T} where T&lt;:AbstractArray"><span class="jlbinding">Jutul.number_of_entities</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Number of entities for matrix stored in state (convention is number of columns)</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/ad/ad.jl#L14-L16" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.number_of_equations-Tuple{Any, JutulEquation}" href="#Jutul.number_of_equations-Tuple{Any, JutulEquation}"><span class="jlbinding">Jutul.number_of_equations</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Get the total number of equations on the domain of model.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/equations.jl#L287-L289" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.number_of_equations_per_entity-Tuple{JutulModel, JutulEquation}" href="#Jutul.number_of_equations_per_entity-Tuple{JutulModel, JutulEquation}"><span class="jlbinding">Jutul.number_of_equations_per_entity</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Get the number of equations per entity. For example, mass balance of two components will have two equations per grid cell (= entity)</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/equations.jl#L263-L266" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.number_of_faces-Tuple{Any}" href="#Jutul.number_of_faces-Tuple{Any}"><span class="jlbinding">Jutul.number_of_faces</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">number_of_faces</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(g)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Integer</span></span></code></pre></div><p>Get the number of faces in a mesh.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/meshes/meshes.jl#L150-L154" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.number_of_partials_per_entity-Tuple{SimulationModel, JutulEntity}" href="#Jutul.number_of_partials_per_entity-Tuple{SimulationModel, JutulEntity}"><span class="jlbinding">Jutul.number_of_partials_per_entity</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">number_of_partials_per_entity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SimulationModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, entity</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JutulEntity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Get the number of local partial derivatives per entity in a <code>model</code> for a given <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.JutulEntity"><code>JutulEntity</code></a>. This is the sum of <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.degrees_of_freedom_per_entity-Tuple{Any, ScalarVariable}"><code>degrees_of_freedom_per_entity</code></a> for all primary variables defined on <code>entity</code>.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/models.jl#L207-L212" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.number_of_values" href="#Jutul.number_of_values"><span class="jlbinding">Jutul.number_of_values</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><p>Total number of values for a model, for a given type of variables over all entities</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/variables/utils.jl#L34-L36" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.numerical_eltype-Union{Tuple{AbstractArray{T}}, Tuple{T}} where T" href="#Jutul.numerical_eltype-Union{Tuple{AbstractArray{T}}, Tuple{T}} where T"><span class="jlbinding">Jutul.numerical_eltype</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">numerical_eltype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractArray{T}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> T</span></span></code></pre></div><p>Get the numerical eltype (i.e. the inner type of the element type that could potentially be AD)</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/ad/local_ad.jl#L105-L110" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.numerical_type-Tuple{T} where T&lt;:Real" href="#Jutul.numerical_type-Tuple{T} where T&lt;:Real"><span class="jlbinding">Jutul.numerical_type</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">numerical_type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> T</span></span></code></pre></div><p>Get the numerical eltype (i.e. the inner type of the element type that could potentially be AD). This function should be overloaded if you have a custom type that wraps a numeric/potentially AD type.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/ad/local_ad.jl#L119-L125" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.parameters_jacobian_wrt_data_domain-Tuple{Any}" href="#Jutul.parameters_jacobian_wrt_data_domain-Tuple{Any}"><span class="jlbinding">Jutul.parameters_jacobian_wrt_data_domain</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">parameters_jacobian_wrt_data_domain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model; copy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, config </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Compute the (sparse) Jacobian of parameters with respect to data_domain values (i.e. floating point values). Optionally, <code>config</code> can be passed to allow <code>vectorize_variables</code> to only include a subset of the parameters.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/variables/vectorization.jl#L177-L183" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.partition" href="#Jutul.partition"><span class="jlbinding">Jutul.partition</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">partition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(N</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractMatrix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, num_coarse, weights </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ones</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(N, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)); partitioner </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> MetisPartitioner</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), groups </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> maximum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(N), group_by_weights </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, buffer_group </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Partition based on neighborship (with optional groups kept contigious after partitioning)</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/partitioning.jl#L137-L142" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.partition_hypergraph" href="#Jutul.partition_hypergraph"><span class="jlbinding">Jutul.partition_hypergraph</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">partition_hypergraph</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(g, n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, partitioner </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> MetisPartitioner</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); expand </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Partition a hypergraph from <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.setup_partitioner_hypergraph-Tuple{Matrix{Int64}}"><code>setup_partitioner_hypergraph</code></a> using a given partitioner. If the optional <code>expand</code> parameter is set to true the result will be expanded to the full graph (i.e. where groups are not condensed).</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/partitioning.jl#L331-L337" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.physical_representation-Tuple{Any}" href="#Jutul.physical_representation-Tuple{Any}"><span class="jlbinding">Jutul.physical_representation</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">physical_representation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x)</span></span></code></pre></div><p>Get the physical representation of an object. The physical representation is usually some kind of mesh or domain that represents a physical domain.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/domains.jl#L7-L12" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.physical_representation-Tuple{DataDomain}" href="#Jutul.physical_representation-Tuple{DataDomain}"><span class="jlbinding">Jutul.physical_representation</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">physical_representation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DataDomain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Get the underlying physical representation (domain or mesh) that is wrapped.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/domains.jl#L71-L75" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.physical_representation-Tuple{DiscretizedDomain}" href="#Jutul.physical_representation-Tuple{DiscretizedDomain}"><span class="jlbinding">Jutul.physical_representation</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">physical_representation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DiscretizedDomain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Get the underlying physical representation (domain or mesh) that was discretized.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/domains.jl#L23-L27" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.physical_representation-Tuple{SimulationModel}" href="#Jutul.physical_representation-Tuple{SimulationModel}"><span class="jlbinding">Jutul.physical_representation</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">physical_representation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(m</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SimulationModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Get the underlying physical representation for the model (domain or mesh)</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/core_types/core_types.jl#L319-L323" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.pick_next_timestep-Tuple{IterationTimestepSelector, Vararg{Any, 9}}" href="#Jutul.pick_next_timestep-Tuple{IterationTimestepSelector, Vararg{Any, 9}}"><span class="jlbinding">Jutul.pick_next_timestep</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pick_next_timestep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">IterationTimestepSelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sim, config, dt_prev, dT, forces, reports, current_reports, step_index, new_step)</span></span></code></pre></div><p>Pick the next time-step for <code>IterationTimestepSelector</code>. This function uses the number of iterations from previous timesteps to estimate the relationship between the last and the new time step.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/timesteps.jl#L61-L67" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.prepare_step_storage-Tuple{Any, Any, Missing}" href="#Jutul.prepare_step_storage-Tuple{Any, Any, Missing}"><span class="jlbinding">Jutul.prepare_step_storage</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prepare_step_storage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(storage, model, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Missing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Initialize storage for prepare_step_handler.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/simulator/simulator.jl#L58-L62" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.read_results-Tuple{Any}" href="#Jutul.read_results-Tuple{Any}"><span class="jlbinding">Jutul.read_results</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>states, reports = read_results(pth; read_states = true, read_reports = true)</p><p>Read results from a given <code>output_path</code> provded to <code>simulate</code> or <code>simulator_config</code>.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/utils.jl#L608-L612" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.relative_increment_limit-Tuple{JutulVariables}" href="#Jutul.relative_increment_limit-Tuple{JutulVariables}"><span class="jlbinding">Jutul.relative_increment_limit</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Relative allowable change for variable during a nonlinear update. A variable with value |x| and relative limit 0.2 cannot change more than |x|*0.2.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/variables/utils.jl#L91-L95" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.replace_variables!-Tuple{Any}" href="#Jutul.replace_variables!-Tuple{Any}"><span class="jlbinding">Jutul.replace_variables!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">replace_variables!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model, throw </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, varname </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vardef, varname2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vardef2)</span></span></code></pre></div><p>Replace one or more variables that already exists (primary, secondary or parameters).</p><p><strong>Arguments</strong></p><ul><li><p><code>model</code>: instance where variables is to be replaced</p></li><li><p><code>varname=vardef::JutulVariables</code>: replace variable with <code>varname</code> by <code>vardef</code></p></li><li><p><code>throw=true</code>: throw an error if the named variable definition is not found in primary or secondary, otherwise silently return</p></li></ul><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/models.jl#L137-L146" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.scalarize_primary_variable-Tuple{Any, Any, ScalarVariable, Any}" href="#Jutul.scalarize_primary_variable-Tuple{Any, Any, ScalarVariable, Any}"><span class="jlbinding">Jutul.scalarize_primary_variable</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">scalarize_primary_variable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model, source_vec, var</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Jutul.ScalarVariable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, index)</span></span></code></pre></div><p>Scalarize a primary variable. For scalars, this means getting the value itself.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/variables/scalarization.jl#L40-L44" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.scalarize_primary_variables" href="#Jutul.scalarize_primary_variables"><span class="jlbinding">Jutul.scalarize_primary_variables</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">scalarize_primary_variables</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model, state, pvars </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">primary_variables)</span></span></code></pre></div><p>Create a vector where each entry corresponds to a tuple of values that minimally defines the given variables. All variables must belong to the same type of entity. This is checked by this function.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/variables/scalarization.jl#L91-L97" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.scalarize_primary_variables!-Union{Tuple{T}, Tuple{Array{Jutul.ScalarizedJutulVariables{T}, 1}, Any, Any, NamedTuple}} where T" href="#Jutul.scalarize_primary_variables!-Union{Tuple{T}, Tuple{Array{Jutul.ScalarizedJutulVariables{T}, 1}, Any, Any, NamedTuple}} where T"><span class="jlbinding">Jutul.scalarize_primary_variables!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">scalarize_primary_variables!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(V</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vector{T}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, model, state, pvars</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> T</span></span></code></pre></div><p>Scalarize into array. See <a href="./@ref">scalarize_primary_variables</a> for more details.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/variables/scalarization.jl#L115-L119" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.scalarized_primary_variable_type-Tuple{Any, ScalarVariable}" href="#Jutul.scalarized_primary_variable_type-Tuple{Any, ScalarVariable}"><span class="jlbinding">Jutul.scalarized_primary_variable_type</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">scalarized_primary_variable_type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model, var</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Jutul.ScalarVariable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Get the type of a scalarized numerical variable (=Float64 for variables that are already represented as scalars)</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/variables/scalarization.jl#L17-L22" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.set_default_tolerances-Tuple{Any}" href="#Jutul.set_default_tolerances-Tuple{Any}"><span class="jlbinding">Jutul.set_default_tolerances</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">set_default_tolerances</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model)</span></span></code></pre></div><p>Set default tolerances for the nonlinear convergence check of the governing equations.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/models.jl#L768-L772" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.set_parameters!-Tuple{Any}" href="#Jutul.set_parameters!-Tuple{Any}"><span class="jlbinding">Jutul.set_parameters!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">set_parameters!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model, parname </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pardef)</span></span></code></pre></div><p>Set a parameter with name <code>varname</code> to the definition <code>vardef</code> (adding if it does not exist)</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/models.jl#L119-L123" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.set_primary_variables!-Tuple{Any}" href="#Jutul.set_primary_variables!-Tuple{Any}"><span class="jlbinding">Jutul.set_primary_variables!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">set_primary_variables!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model, varname </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vardef)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">set_primary_variables!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model, varname1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vardef1, varname2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vardef2)</span></span></code></pre></div><p>Set a primary variable with name <code>varname</code> to the definition <code>vardef</code> (adding if it does not exist)</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/models.jl#L96-L101" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.set_secondary_variables!-Tuple{Any}" href="#Jutul.set_secondary_variables!-Tuple{Any}"><span class="jlbinding">Jutul.set_secondary_variables!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">set_secondary_variables!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model, varname </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vardef)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">set_secondary_variables!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model, varname1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vardef1, varname2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vardef2)</span></span></code></pre></div><p>Set a secondary variable with name <code>varname</code> to the definition <code>vardef</code> (adding if it does not exist)</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/models.jl#L107-L113" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.setup_adjoint_storage-Tuple{Any}" href="#Jutul.setup_adjoint_storage-Tuple{Any}"><span class="jlbinding">Jutul.setup_adjoint_storage</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setup_adjoint_storage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model; state0 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> setup_state</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model), parameters </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> setup_parameters</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model))</span></span></code></pre></div><p>Set up storage for use with <code>solve_adjoint_sensitivities!</code>.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/ad/gradients.jl#L100-L104" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.setup_forces-Tuple{JutulModel}" href="#Jutul.setup_forces-Tuple{JutulModel}"><span class="jlbinding">Jutul.setup_forces</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setup_forces</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JutulModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; force_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> force_value)</span></span></code></pre></div><p>Set up forces for a given model. Keyword arguments varies depending on what the model supports.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/models.jl#L873-L878" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.setup_parameter_optimization-Tuple{Any, Any, Any, Any, Any, Any, Vararg{Any}}" href="#Jutul.setup_parameter_optimization-Tuple{Any, Any, Any, Any, Any, Any, Vararg{Any}}"><span class="jlbinding">Jutul.setup_parameter_optimization</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setup_parameter_optimization</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model, state0, param, dt, forces, G, opt_cfg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> optimization_config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model, param);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                                        grad_type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> :adjoint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                                        config </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                                        print </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                                        copy_case </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                                        param_obj </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                                        kwarg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Set up function handles for optimizing the case defined by the inputs to <code>simulate</code> together with a per-timestep objective function <code>G</code>.</p><p>Generally calling either of the functions will mutate the data Dict. The options are: F_o(x) -&gt; evaluate objective dF_o(dFdx, x) -&gt; evaluate gradient of objective, mutating dFdx (may trigger evaluation of F_o) F_and_dF(F, dFdx, x) -&gt; evaluate F and/or dF. Value of nothing will mean that the corresponding entry is skipped.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/simulator/optimization.jl#L17-L34" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.setup_parameters-Tuple{DataDomain, JutulModel}" href="#Jutul.setup_parameters-Tuple{DataDomain, JutulModel}"><span class="jlbinding">Jutul.setup_parameters</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setup_parameters</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JutulModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value)</span></span></code></pre></div><p>Set up a parameter storage for a given model with values for the parameter defined in the model.</p><p><strong>Arguments</strong></p><ul><li><code>name=value</code>: The name of the parameter together with the value(s) of the parameter.</li></ul><p>A scalar (or short vector of the right size for <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.VectorVariables"><code>VectorVariables</code></a>) will be repeated over the entire domain, while a vector (or matrix for <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.VectorVariables"><code>VectorVariables</code></a>) with length (number of columns for <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.VectorVariables"><code>VectorVariables</code></a>) equal to the entity count (for example, number of cells for a cell variable) will be used directly.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/models.jl#L290-L300" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.setup_partitioner_hypergraph-Tuple{Matrix{Int64}}" href="#Jutul.setup_partitioner_hypergraph-Tuple{Matrix{Int64}}"><span class="jlbinding">Jutul.setup_partitioner_hypergraph</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setup_partitioner_hypergraph</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(N</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Matrix{Int}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    num_nodes</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> maximum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(N),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    num_edges</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(N, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    node_weights</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vector{Int}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ones</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Int, num_nodes),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    edge_weights</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vector{Int}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ones</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Int, num_edges),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    groups </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [Int[]]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Set up a hypergraph structure for a given neighborship matrix. <code>N</code> should be a matrix with two rows, with one pair of cells in each column. Optionally node and edge weights can be provided. If a list of groups are provided, these nodes will be accumulated together in the hypergraph.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/partitioning.jl#L237-L250" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.setup_state!" href="#Jutul.setup_state!"><span class="jlbinding">Jutul.setup_state!</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setup_state!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state, model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JutulModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, init_values</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractDict</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Dict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div><p>Initialize primary variables and other state fields, given initial values as a Dict</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/models.jl#L252-L256" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.setup_state-Tuple{JutulModel, Vararg{Any}}" href="#Jutul.setup_state-Tuple{JutulModel, Vararg{Any}}"><span class="jlbinding">Jutul.setup_state</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setup_state</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JutulModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, name1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value1, name2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value2)</span></span></code></pre></div><p>Set up a state for a given model with values for the primary variables defined in the model. Normally all primary variables must be initialized in this way.</p><p><strong>Arguments</strong></p><ul><li><code>name=value</code>: The name of the primary variable together with the value(s) used to initialize the primary variable.</li></ul><p>A scalar (or short vector of the right size for <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.VectorVariables"><code>VectorVariables</code></a>) will be repeated over the entire domain, while a vector (or matrix for <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.VectorVariables"><code>VectorVariables</code></a>) with length (number of columns for <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.VectorVariables"><code>VectorVariables</code></a>) equal to the entity count (for example, number of cells for a cell variable) will be used directly.</p><p>Note: You likely want to overload [<code>setup_state!</code>]@ref for a custom model instead of <code>setup_state</code></p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/models.jl#L224-L237" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.setup_state_and_parameters-Tuple{DataDomain, JutulModel, AbstractDict}" href="#Jutul.setup_state_and_parameters-Tuple{DataDomain, JutulModel, AbstractDict}"><span class="jlbinding">Jutul.setup_state_and_parameters</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">state, prm </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> setup_state_and_parameters</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model, init)</span></span></code></pre></div><p>Simultaneously set up state and parameters from a single <code>init</code> file (typically a <code>Dict</code> containing values that might either be initial values or parameters)</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/models.jl#L324-L329" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.setup_storage!-Tuple{Any, JutulModel}" href="#Jutul.setup_storage!-Tuple{Any, JutulModel}"><span class="jlbinding">Jutul.setup_storage!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setup_storage!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(storage, model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JutulModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; setup_linearized_system </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                                setup_equations </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                                state0 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> setup_state</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                                parameters </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> setup_parameters</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                                tag </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                                state0_ad </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                                state_ad </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                                kwarg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Allocate storage for a given model. The storage consists of all dynamic quantities used in the simulation. The default implementation allocates properties, equations and linearized system.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/models.jl#L404-L416" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.setup_storage-Tuple{JutulModel}" href="#Jutul.setup_storage-Tuple{JutulModel}"><span class="jlbinding">Jutul.setup_storage</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setup_storage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JutulModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; kwarg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Allocate storage for the model. You should overload setup_storage! if you have a custom definition.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/models.jl#L375-L380" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.si_unit-Tuple{Symbol}" href="#Jutul.si_unit-Tuple{Symbol}"><span class="jlbinding">Jutul.si_unit</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">si_unit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(u</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Union{String, Symbol}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Get the multiplicative SI unit conversion factor for a single unit. The return value is given so that <code>x*si_unit(:name)</code> will convert <code>x</code> to the SI representation of the unit with the given name.</p><p><strong>Examples</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> si_unit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:day</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Get days represented as seconds</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">86400.0</span></span></code></pre></div><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/units/interface.jl#L73-L85" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.si_units-Tuple" href="#Jutul.si_units-Tuple"><span class="jlbinding">Jutul.si_units</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">si_units</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(u1, arg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Get multiplicative SI unit conversion factors for multiple units simultaneously. The return value will be a <code>Tuple</code> of values, one for each input argument. Each input arguments can be either a <code>String</code> a <code>Symbol</code>.</p><p><strong>Examples</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> meter, hour </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> si_units</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:meter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:hour</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3600.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/units/interface.jl#L56-L68" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.simulate!-Tuple{JutulSimulator, AbstractVector}" href="#Jutul.simulate!-Tuple{JutulSimulator, AbstractVector}"><span class="jlbinding">Jutul.simulate!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">simulate!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sim</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JutulSimulator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, timesteps</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractVector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    forces </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    config </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    initialize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    restart </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    state0 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    parameters </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    kwarg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Non-allocating (or perhaps less allocating) version of <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.simulate!-Tuple{JutulSimulator, AbstractVector}"><code>simulate!</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>initialize=true</code>: Perform internal updates as if this is the first time</li></ul><p>See also <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.simulate-Tuple{Any, JutulModel, AbstractVector}"><code>simulate</code></a> for additional supported input arguments.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/simulator/simulator.jl#L125-L142" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.simulate-Tuple{Any, JutulModel, AbstractVector}" href="#Jutul.simulate-Tuple{Any, JutulModel, AbstractVector}"><span class="jlbinding">Jutul.simulate</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">simulate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state0, model, timesteps, parameters </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> setup_parameters</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model))</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">simulate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state0, model, timesteps, info_level </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">simulate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state0, model, timesteps; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">keyword arguments</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Simulate a set of <code>timesteps</code> with <code>model</code> for the given initial <code>state0</code> and optionally specific parameters. Additional keyword arguments are passed onto <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.simulator_config-Tuple{Any}"><code>simulator_config</code></a> and <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.simulate!-Tuple{JutulSimulator, AbstractVector}"><code>simulate!</code></a>. This interface is primarily for convenience, as all storage for the simulator is allocated upon use and discared upon return. If you want to perform multiple simulations with the same model it is advised to instead instantiate <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.Simulator-Tuple{Any}"><code>Simulator</code></a> and combine it with <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.simulate!-Tuple{JutulSimulator, AbstractVector}"><code>simulate!</code></a>.</p><p><strong>Arguments</strong></p><ul><li><p><code>state0::Dict</code>: initial state, typically created using <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.setup_state-Tuple{JutulModel, Vararg{Any}}"><code>setup_state</code></a> for the <code>model</code> in use.</p></li><li><p><code>model::JutulModel</code>: model that describes the discretized system to solve, for example <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.SimulationModel-Tuple{Any, Any}"><code>SimulationModel</code></a> or <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.MultiModel"><code>MultiModel</code></a>.</p></li><li><p><code>timesteps::AbstractVector</code>: Vector of desired report steps. The simulator will perform time integration until <code>sum(timesteps)</code> is reached, providing outputs at the end of each report step.</p></li><li><p><code>parameters=setup_parameters(model)</code>: Optional overrides the default parameters for the model.</p></li><li><p><code>forces=nothing</code>: Either <code>nothing</code> (for no forces), a single set of forces from <code>setup_forces(model)</code> or a <code>Vector</code> of such forces with equal length to <code>timesteps</code>.</p></li><li><p><code>restart=nothing</code>: If an integer is provided, the simulation will attempt to restart from that step. Requires that <code>output_path</code> is provided here or in the <code>config</code>.</p></li><li><p><code>config=simulator_config(model)</code>: Configuration <code>Dict</code> that holds many fine grained settings for output, linear solver, time-steps, outputs etc.</p></li></ul><p>Additional arguments are passed onto <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.simulator_config-Tuple{Any}"><code>simulator_config</code></a>.</p><p>See also <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.simulate!-Tuple{JutulSimulator, AbstractVector}"><code>simulate!</code></a>, <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.Simulator-Tuple{Any}"><code>Simulator</code></a>, <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.SimulationModel-Tuple{Any, Any}"><code>SimulationModel</code></a>, <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.simulator_config-Tuple{Any}"><code>simulator_config</code></a>.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/simulator/simulator.jl#L78-L103" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.simulate-Tuple{Any, JutulSimulator, AbstractVector}" href="#Jutul.simulate-Tuple{Any, JutulSimulator, AbstractVector}"><span class="jlbinding">Jutul.simulate</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">simulate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(state0, sim</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JutulSimulator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, timesteps</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractVector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; parameters </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, kwarg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Simulate a set of <code>timesteps</code> with <code>simulator</code> for the given initial <code>state0</code> and optionally specific parameters.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/simulator/simulator.jl#L114-L118" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.simulator_config-Tuple{Any}" href="#Jutul.simulator_config-Tuple{Any}"><span class="jlbinding">Jutul.simulator_config</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">simulator_config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sim; info_level </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, linear_solver </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> GenericKrylov</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div><p>Set up a simulator configuration object that can be passed onto <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.simulate!-Tuple{JutulSimulator, AbstractVector}"><code>simulate!</code></a>.</p><p>There are many options available to configure a given simulator. The best way to get an overview of these possible configuration options is to instatiate the config without any arguments and inspecting the resulting table by calling <code>simulator_config(sim)</code> in the REPL.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/simulator/config.jl#L95-L105" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.solve_adjoint_sensitivities!-NTuple{6, Any}" href="#Jutul.solve_adjoint_sensitivities!-NTuple{6, Any}"><span class="jlbinding">Jutul.solve_adjoint_sensitivities!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">solve_adjoint_sensitivities!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(∇G, storage, states, state0, timesteps, G; forces </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> setup_forces</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model))</span></span></code></pre></div><p>Non-allocating version of <code>solve_adjoint_sensitivities</code>.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/ad/gradients.jl#L206-L210" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.solve_adjoint_sensitivities-NTuple{4, Any}" href="#Jutul.solve_adjoint_sensitivities-NTuple{4, Any}"><span class="jlbinding">Jutul.solve_adjoint_sensitivities</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">solve_adjoint_sensitivities</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model, states, reports_or_timesteps, G; extra_timing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, state0 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> setup_state</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model), forces </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> setup_forces</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model), raw_output </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, kwarg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Compute sensitivities of <code>model</code> parameter with name <code>target</code> for objective function <code>G</code>.</p><p>The objective function is at the moment assumed to be a sum over all states on the form: <code>obj = Σₙ G(model, state, dt_n, n, forces_for_step_n)</code></p><p>Solves the adjoint equations: For model equations F the gradient with respect to parameters p is ∇ₚG = Σₙ (∂Fₙ / ∂p)ᵀ λₙ where n ∈ [1, N]. Given Lagrange multipliers λₙ from the adjoint equations (∂Fₙ / ∂xₙ)ᵀ λₙ = - (∂J / ∂xₙ)ᵀ - (∂Fₙ₊₁ / ∂xₙ)ᵀ λₙ₊₁ where the last term is omitted for step n = N and G is the objective function.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/ad/gradients.jl#L3-L16" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.solve_numerical_sensitivities-NTuple{5, Any}" href="#Jutul.solve_numerical_sensitivities-NTuple{5, Any}"><span class="jlbinding">Jutul.solve_numerical_sensitivities</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">solve_numerical_sensitivities</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model, states, reports, G, target;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                            forces </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> setup_forces</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                            state0 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> setup_state</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                            parameters </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> setup_parameters</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                            epsilon </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1e-8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Compute sensitivities of <code>model</code> parameter with name <code>target</code> for objective function <code>G</code>.</p><p>This method uses numerical perturbation and is primarily intended for testing of <code>solve_adjoint_sensitivities</code>.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/ad/gradients.jl#L579-L589" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.solve_timestep!-NTuple{5, Any}" href="#Jutul.solve_timestep!-NTuple{5, Any}"><span class="jlbinding">Jutul.solve_timestep!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">solve_timestep!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sim, dT, forces, max_its, config; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">keyword arguments</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Internal function for solving a single time-step with fixed driving forces.</p><p><strong>Arguments</strong></p><ul><li><p><code>sim</code>: <code>Simulator</code> instance.</p></li><li><p><code>dT</code>: time-step to be solved</p></li><li><p><code>forces</code>: Driving forces for the time-step</p></li><li><p><code>max_its</code>: Maximum number of steps/Newton iterations.</p></li><li><p><code>config</code>: Configuration for solver (typically output from <code>simulator_config</code>).</p></li></ul><p>Note: This function is exported for fine-grained simulation workflows. The general <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.simulate-Tuple{Any, JutulModel, AbstractVector}"><code>simulate</code></a> interface is both easier to use and performs additional validation.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/simulator/simulator.jl#L247-L261" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.subvariable-Tuple{Any, Any}" href="#Jutul.subvariable-Tuple{Any, Any}"><span class="jlbinding">Jutul.subvariable</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">subvariable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(var, map)</span></span></code></pre></div><p>Get subvariable of Jutul variable</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/dd/submodels.jl#L144-L148" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.successful_reports" href="#Jutul.successful_reports"><span class="jlbinding">Jutul.successful_reports</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">successful_reports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(old_reports, current_reports, step_index, n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Get the <code>n</code> last successful solve reports from all previous reports (old_reports) and the current ministep set.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/timesteps.jl#L151-L156" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.synchronize-Tuple{JutulContext}" href="#Jutul.synchronize-Tuple{JutulContext}"><span class="jlbinding">Jutul.synchronize</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Synchronize backend after allocations.</p><p>Some backends may require notification that storage has been allocated.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/context.jl#L66-L71" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.tpfv_geometry" href="#Jutul.tpfv_geometry"><span class="jlbinding">Jutul.tpfv_geometry</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">tpfv_geometry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(g)</span></span></code></pre></div><p>Generate two-point finite-volume geometry for a given grid, if supported.</p><p>See also <a href="/JutulDarcy.jl/previews/PR62/ref/jutul#Jutul.TwoPointFiniteVolumeGeometry"><code>TwoPointFiniteVolumeGeometry</code></a>.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/meshes/meshes.jl#L10-L16" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.transfer-Tuple{Any, Any}" href="#Jutul.transfer-Tuple{Any, Any}"><span class="jlbinding">Jutul.transfer</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Transfer v to the representation expected by a given context.</p><p>For the defalt context, the transfer function does nothing. For other context such as the CUDA version, it may convert integers and floats to other types (e.g. Float32) and Arrays to CuArrays.</p><p>You will likely have to implement some transfer operators for your own types if you want to simulate with a non-default context.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/context.jl#L1-L10" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.two_point_potential_drop-NTuple{5, Real}" href="#Jutul.two_point_potential_drop-NTuple{5, Real}"><span class="jlbinding">Jutul.two_point_potential_drop</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Two-point potential drop with gravity (generic)</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/conservation/flux.jl#L293-L295" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.unsafe_reinterpret-Tuple{Any, Any, Any}" href="#Jutul.unsafe_reinterpret-Tuple{Any, Any, Any}"><span class="jlbinding">Jutul.unsafe_reinterpret</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">unsafe_reinterpret</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Vt, v, n)</span></span></code></pre></div><p>Unsafely reinterpret v as a n length vector of value type Vt</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/linsolve/utils.jl#L95-L99" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.update_before_step!-NTuple{4, Any}" href="#Jutul.update_before_step!-NTuple{4, Any}"><span class="jlbinding">Jutul.update_before_step!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/models.jl#L927-L929" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.update_equation!-Tuple{Any, JutulEquation, Any, Any, Any}" href="#Jutul.update_equation!-Tuple{Any, JutulEquation, Any, Any, Any}"><span class="jlbinding">Jutul.update_equation!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Update equation based on currently stored properties</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/equations.jl#L512-L514" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.update_equations!" href="#Jutul.update_equations!"><span class="jlbinding">Jutul.update_equations!</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">update_equations!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(storage, model, dt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Update the governing equations using the current set of primary variables, parameters and secondary variables. Does not fill linearized system.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/models.jl#L707-L711" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.update_equations_and_apply_forces!-NTuple{4, Any}" href="#Jutul.update_equations_and_apply_forces!-NTuple{4, Any}"><span class="jlbinding">Jutul.update_equations_and_apply_forces!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">update_equations_and_apply_forces!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(storage, model, dt, forces; time </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> NaN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Update the model equations and apply boundary conditions and forces. Does not fill linearized system.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/models.jl#L689-L693" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.update_linearized_system!" href="#Jutul.update_linearized_system!"><span class="jlbinding">Jutul.update_linearized_system!</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">update_linearized_system!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(storage, model</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JutulModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">keyword arguments</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Update the linearized system with the current set of equations.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/models.jl#L722-L726" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.update_linearized_system_equation!-Tuple{AbstractArray, Any, Any, JutulEquation, CompactAutoDiffCache}" href="#Jutul.update_linearized_system_equation!-Tuple{AbstractArray, Any, Any, JutulEquation, CompactAutoDiffCache}"><span class="jlbinding">Jutul.update_linearized_system_equation!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Update a linearized system based on the values and derivatives in the equation.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/equations.jl#L490-L492" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.update_parameter_before_step!-NTuple{6, Any}" href="#Jutul.update_parameter_before_step!-NTuple{6, Any}"><span class="jlbinding">Jutul.update_parameter_before_step!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">update_parameter_before_step!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(prm_val, prm, storage, model, dt, forces)</span></span></code></pre></div><p>Update parameters before time-step. Used for hysteretic parameters.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/models.jl#L973-L977" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.update_secondary_variable!" href="#Jutul.update_secondary_variable!"><span class="jlbinding">Jutul.update_secondary_variable!</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><p>Update a secondary variable. Normally autogenerated with @jutul_secondary</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/variable_evaluation.jl#L207-L209" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.update_state_dependents!-Tuple{Any, JutulModel, Any, Any}" href="#Jutul.update_state_dependents!-Tuple{Any, JutulModel, Any, Any}"><span class="jlbinding">Jutul.update_state_dependents!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">update_state_dependents!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(storage, model, dt, forces; time </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> NaN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, update_secondary </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Perform updates of everything that depends on the state: A full linearization for the current primary variables.</p><p>This includes properties, governing equations and the linearized system itself.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/models.jl#L674-L680" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.update_values!-Tuple{AbstractArray, AbstractArray}" href="#Jutul.update_values!-Tuple{AbstractArray, AbstractArray}"><span class="jlbinding">Jutul.update_values!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">update_values!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x, dx)</span></span></code></pre></div><p>Replace values (for non-Real types, direct assignment)</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/ad/ad.jl#L389-L393" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.update_values!-Tuple{AbstractArray{&lt;:Real}, AbstractArray{&lt;:Real}}" href="#Jutul.update_values!-Tuple{AbstractArray{&lt;:Real}, AbstractArray{&lt;:Real}}"><span class="jlbinding">Jutul.update_values!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">update_values!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x, dx)</span></span></code></pre></div><p>Replace values of <code>x</code> in-place by <code>y</code>, leaving <code>x</code> with the values of y and the partials of <code>x</code>.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/ad/ad.jl#L379-L383" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.value-Tuple{AbstractDict}" href="#Jutul.value-Tuple{AbstractDict}"><span class="jlbinding">Jutul.value</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Dict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Call value on all elements of some Dict.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/ad/ad.jl#L409-L412" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.value-Tuple{Any}" href="#Jutul.value-Tuple{Any}"><span class="jlbinding">Jutul.value</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Take value of AD.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/ad/ad.jl#L398-L400" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.values_per_entity-Tuple{Any, JutulVariables}" href="#Jutul.values_per_entity-Tuple{Any, JutulVariables}"><span class="jlbinding">Jutul.values_per_entity</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Number of values held by a primary variable. Normally this is equal to the number of degrees of freedom, but some special primary variables are most conveniently defined by having N values and N-1 independent variables.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/variables/utils.jl#L79-L82" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.variable_scale-Tuple{JutulVariables}" href="#Jutul.variable_scale-Tuple{JutulVariables}"><span class="jlbinding">Jutul.variable_scale</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><p>Define a &quot;typical&quot; numerical value for a variable to scale the linear system entries.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/variables/utils.jl#L190-L192" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.write_reports_to_mat_format" href="#Jutul.write_reports_to_mat_format"><span class="jlbinding">Jutul.write_reports_to_mat_format</span></a> <span class="VPBadge info jlObjectType jlFunction"><!--[-->Function<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">write_reports_to_mat_format</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(reports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> jutul_output_path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;report&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, config </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> missing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, verbose </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Write the reports to MAT files named &quot;report_1&quot;, &quot;report_2&quot;, ... to the given path.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/utils.jl#L1090-L1094" target="_blank" rel="noreferrer">source</a></p></details><details class="jldocstring custom-block" open><summary><a id="Jutul.@jutul_secondary-Tuple{Any}" href="#Jutul.@jutul_secondary-Tuple{Any}"><span class="jlbinding">Jutul.@jutul_secondary</span></a> <span class="VPBadge info jlObjectType jlMacro"><!--[-->Macro<!--]--></span></summary><p>Designate the function as updating a secondary variable.</p><p>A generic evaluator is then defined, together with a function for getting the dependencies of that function upon the state. This is most easily documented with an example. If we define the following function annotated with the macro when updating the array containing the values of <code>MyVarType</code> realized for some model:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">@jutul_secondary</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> some_fn!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(target, var</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MyVarType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, model, a, b, c, ix)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ix</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        target[i] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a[i] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b[i] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c[i]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    end</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span></code></pre></div><p>The purpose of the macro is to translate this into two functions. The first defines for the dependencies of the function with respect to the fields of the state (primary variables, secondary variables and parameters):</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> get_dependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(var</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MyVarType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, model)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:c</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span></code></pre></div><p>The second function defines a generic version that takes in state, and automatically expands the set of dependencies into <code>getfield</code> calls.</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> update_secondary_variable!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(array_target, var</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MyVarType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, model, state, ix)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    some_fn!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(array_target, var, model, state</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">a, state</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">b, state</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">c, ix)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span></code></pre></div><p>Note that the input names of arguments 4 to end-1 matter, as these will be fetched from state, exactly as written.</p><p><a href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/variable_evaluation.jl#L4-L37" target="_blank" rel="noreferrer">source</a></p></details></div></div></main><footer class="VPDocFooter" data-v-83890dd9 data-v-4f9813fa><!--[--><!--]--><div class="edit-info" data-v-4f9813fa><div class="edit-link" data-v-4f9813fa><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://https://github.com/sintefmath/JutulDarcy.jl/edit/main/docs/src/ref/jutul.md" target="_blank" rel="noreferrer" data-v-4f9813fa><!--[--><span class="vpi-square-pen edit-link-icon" data-v-4f9813fa></span> Edit this page<!--]--></a></div><!----></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-4f9813fa><span class="visually-hidden" id="doc-footer-aria-label" data-v-4f9813fa>Pager</span><div class="pager" data-v-4f9813fa><a class="VPLink link pager-link prev" href="/JutulDarcy.jl/previews/PR62/extras/faq" data-v-4f9813fa><!--[--><span class="desc" data-v-4f9813fa>Previous page</span><span class="title" data-v-4f9813fa>FAQ</span><!--]--></a></div><div class="pager" data-v-4f9813fa><a class="VPLink link pager-link next" href="/JutulDarcy.jl/previews/PR62/man/highlevel" data-v-4f9813fa><!--[--><span class="desc" data-v-4f9813fa>Next page</span><span class="title" data-v-4f9813fa>High-level API</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-a9a9e638 data-v-c970a860><div class="container" data-v-c970a860><p class="message" data-v-c970a860>Made with <a href="https://luxdl.github.io/DocumenterVitepress.jl/dev/" target="_blank"><strong>DocumenterVitepress.jl</strong></a><br></p><p class="copyright" data-v-c970a860>© Copyright 2024.</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"examples_co2_brine_2d_vertical.md\":\"CLbnfoLI\",\"examples_co2_sloped.md\":\"yiaLGuPo\",\"examples_compositional_5components.md\":\"bs-x0-wn\",\"examples_data_input_file.md\":\"7YElW0Nc\",\"examples_five_spot_ensemble.md\":\"CY-itl5a\",\"examples_intro_sensitivities.md\":\"N149HiCo\",\"examples_optimize_simple_bl.md\":\"3WFeG96v\",\"examples_two_phase_buckley_leverett.md\":\"gJXbAqnj\",\"examples_two_phase_gravity_segregation.md\":\"BHI-b-q-\",\"examples_two_phase_unstable_gravity.md\":\"CeCEBq1X\",\"examples_validation_compositional.md\":\"CAmiTV5J\",\"examples_validation_egg.md\":\"DA80CVKt\",\"examples_validation_mrst.md\":\"JZZct2ZH\",\"examples_validation_norne_nohyst.md\":\"B4flM5sN\",\"examples_validation_olympus_1.md\":\"BKu9oj72\",\"examples_validation_spe1.md\":\"zSNz2ozj\",\"examples_validation_spe9.md\":\"C03IFYIr\",\"examples_wells_intro.md\":\"BssZozBk\",\"extras_faq.md\":\"BrGsCXX_\",\"extras_refs.md\":\"COTHFRr7\",\"index.md\":\"D5WUXzlY\",\"man_advanced_compiled.md\":\"D4Cv77uM\",\"man_advanced_mpi.md\":\"BWRobuP7\",\"man_basics_forces.md\":\"R8F7SiPM\",\"man_basics_input_files.md\":\"DAgtdDL1\",\"man_basics_models.md\":\"Gqh3RT5z\",\"man_basics_parameters.md\":\"BH6I4663\",\"man_basics_plotting.md\":\"Iw8XG_ii\",\"man_basics_primary.md\":\"2xY1wekS\",\"man_basics_secondary.md\":\"DPaatZTV\",\"man_basics_solution.md\":\"CjIYlizn\",\"man_basics_systems.md\":\"CWx6yzkl\",\"man_basics_wells.md\":\"B0ttD02D\",\"man_highlevel.md\":\"B9Y0SS3o\",\"man_intro.md\":\"BRKMhnjl\",\"notebooks_empty.md\":\"CdMdJyDu\",\"ref_jutul.md\":\"D0YWgIFE\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"JutulDarcy.jl\",\"description\":\"Documentation for JutulDarcy.jl\",\"base\":\"/JutulDarcy.jl/previews/PR62/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"outline\":\"deep\",\"search\":{\"provider\":\"local\",\"options\":{\"detailedView\":true}},\"nav\":[{\"text\":\"Introduction\",\"collapsed\":false,\"items\":[{\"text\":\"JutulDarcy.jl\",\"link\":\"/index\"},{\"text\":\"Getting started\",\"link\":\"/man/intro\"},{\"text\":\"References\",\"link\":\"/extras/refs\"},{\"text\":\"FAQ\",\"link\":\"/extras/faq\"},{\"text\":\"Jutul functions\",\"link\":\"/ref/jutul\"}]},{\"text\":\"Manual\",\"collapsed\":false,\"items\":[{\"text\":\"High-level API\",\"link\":\"/man/highlevel\"},{\"text\":\"Input formats\",\"link\":\"/man/basics/input_files\"},{\"text\":\"Driving forces\",\"link\":\"/man/basics/forces\"},{\"text\":\"Supported physical systems\",\"link\":\"/man/basics/systems\"},{\"text\":\"Wells and controls\",\"link\":\"/man/basics/wells\"},{\"text\":\"Solving the equations\",\"link\":\"/man/basics/solution\"},{\"text\":\"Primary variables\",\"link\":\"/man/basics/primary\"},{\"text\":\"Secondary variables (properties)\",\"link\":\"/man/basics/secondary\"},{\"text\":\"Parameters\",\"link\":\"/man/basics/parameters\"},{\"text\":\"Plotting and visualization\",\"link\":\"/man/basics/plotting\"}]},{\"text\":\"Examples: Introduction\",\"collapsed\":false,\"items\":[{\"text\":\"Intro: Gravity segregation\",\"link\":\"/examples/two_phase_gravity_segregation\"},{\"text\":\"Intro: Two-phase Buckley-Leverett\",\"link\":\"/examples/two_phase_buckley_leverett\"},{\"text\":\"Intro: Wells\",\"link\":\"/examples/wells_intro\"},{\"text\":\"Intro: Simulating Eclipse/DATA input files\",\"link\":\"/examples/data_input_file\"},{\"text\":\"Intro: Sensitivities in JutulDarcy\",\"link\":\"/examples/intro_sensitivities\"},{\"text\":\"Intro: Compositional flow\",\"link\":\"/examples/co2_brine_2d_vertical\"}]},{\"text\":\"Examples: Usage\",\"collapsed\":false,\"items\":[{\"text\":\"Quarter-five-spot with variation\",\"link\":\"/examples/five_spot_ensemble\"},{\"text\":\"Gravity circulation with CPR preconditioner\",\"link\":\"/examples/two_phase_unstable_gravity\"},{\"text\":\"CO2 injection in saline aquifer\",\"link\":\"/examples/co2_sloped\"},{\"text\":\"Compositional with five components\",\"link\":\"/examples/compositional_5components\"},{\"text\":\"Parameter matching of Buckley-Leverett\",\"link\":\"/examples/optimize_simple_bl\"}]},{\"text\":\"Examples: Validation\",\"collapsed\":false,\"items\":[{\"text\":\"Validation: SPE1\",\"link\":\"/examples/validation_spe1\"},{\"text\":\"Validation: SPE9\",\"link\":\"/examples/validation_spe9\"},{\"text\":\"Validation: Compositional\",\"link\":\"/examples/validation_compositional\"},{\"text\":\"Validation: Egg\",\"link\":\"/examples/validation_egg\"},{\"text\":\"Validation: OLYMPUS 1\",\"link\":\"/examples/validation_olympus_1\"},{\"text\":\"Validation: Norne\",\"link\":\"/examples/validation_norne_nohyst\"},{\"text\":\"Validation: MRST input files\",\"link\":\"/examples/validation_mrst\"}]},{\"text\":\"Advanced usage\",\"collapsed\":false,\"items\":[{\"text\":\"Multi-threading and MPI support\",\"link\":\"/man/advanced/mpi\"},{\"text\":\"Standalone reservoir simulator\",\"link\":\"/man/advanced/compiled\"}]}],\"sidebar\":[{\"text\":\"Introduction\",\"collapsed\":false,\"items\":[{\"text\":\"JutulDarcy.jl\",\"link\":\"/index\"},{\"text\":\"Getting started\",\"link\":\"/man/intro\"},{\"text\":\"References\",\"link\":\"/extras/refs\"},{\"text\":\"FAQ\",\"link\":\"/extras/faq\"},{\"text\":\"Jutul functions\",\"link\":\"/ref/jutul\"}]},{\"text\":\"Manual\",\"collapsed\":false,\"items\":[{\"text\":\"High-level API\",\"link\":\"/man/highlevel\"},{\"text\":\"Input formats\",\"link\":\"/man/basics/input_files\"},{\"text\":\"Driving forces\",\"link\":\"/man/basics/forces\"},{\"text\":\"Supported physical systems\",\"link\":\"/man/basics/systems\"},{\"text\":\"Wells and controls\",\"link\":\"/man/basics/wells\"},{\"text\":\"Solving the equations\",\"link\":\"/man/basics/solution\"},{\"text\":\"Primary variables\",\"link\":\"/man/basics/primary\"},{\"text\":\"Secondary variables (properties)\",\"link\":\"/man/basics/secondary\"},{\"text\":\"Parameters\",\"link\":\"/man/basics/parameters\"},{\"text\":\"Plotting and visualization\",\"link\":\"/man/basics/plotting\"}]},{\"text\":\"Examples: Introduction\",\"collapsed\":false,\"items\":[{\"text\":\"Intro: Gravity segregation\",\"link\":\"/examples/two_phase_gravity_segregation\"},{\"text\":\"Intro: Two-phase Buckley-Leverett\",\"link\":\"/examples/two_phase_buckley_leverett\"},{\"text\":\"Intro: Wells\",\"link\":\"/examples/wells_intro\"},{\"text\":\"Intro: Simulating Eclipse/DATA input files\",\"link\":\"/examples/data_input_file\"},{\"text\":\"Intro: Sensitivities in JutulDarcy\",\"link\":\"/examples/intro_sensitivities\"},{\"text\":\"Intro: Compositional flow\",\"link\":\"/examples/co2_brine_2d_vertical\"}]},{\"text\":\"Examples: Usage\",\"collapsed\":false,\"items\":[{\"text\":\"Quarter-five-spot with variation\",\"link\":\"/examples/five_spot_ensemble\"},{\"text\":\"Gravity circulation with CPR preconditioner\",\"link\":\"/examples/two_phase_unstable_gravity\"},{\"text\":\"CO2 injection in saline aquifer\",\"link\":\"/examples/co2_sloped\"},{\"text\":\"Compositional with five components\",\"link\":\"/examples/compositional_5components\"},{\"text\":\"Parameter matching of Buckley-Leverett\",\"link\":\"/examples/optimize_simple_bl\"}]},{\"text\":\"Examples: Validation\",\"collapsed\":false,\"items\":[{\"text\":\"Validation: SPE1\",\"link\":\"/examples/validation_spe1\"},{\"text\":\"Validation: SPE9\",\"link\":\"/examples/validation_spe9\"},{\"text\":\"Validation: Compositional\",\"link\":\"/examples/validation_compositional\"},{\"text\":\"Validation: Egg\",\"link\":\"/examples/validation_egg\"},{\"text\":\"Validation: OLYMPUS 1\",\"link\":\"/examples/validation_olympus_1\"},{\"text\":\"Validation: Norne\",\"link\":\"/examples/validation_norne_nohyst\"},{\"text\":\"Validation: MRST input files\",\"link\":\"/examples/validation_mrst\"}]},{\"text\":\"Advanced usage\",\"collapsed\":false,\"items\":[{\"text\":\"Multi-threading and MPI support\",\"link\":\"/man/advanced/mpi\"},{\"text\":\"Standalone reservoir simulator\",\"link\":\"/man/advanced/compiled\"}]}],\"editLink\":{\"pattern\":\"https://https://github.com/sintefmath/JutulDarcy.jl/edit/main/docs/src/:path\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/sintefmath/JutulDarcy.jl\"}],\"footer\":{\"message\":\"Made with <a href=\\\"https://luxdl.github.io/DocumenterVitepress.jl/dev/\\\" target=\\\"_blank\\\"><strong>DocumenterVitepress.jl</strong></a><br>\",\"copyright\":\"© Copyright 2024.\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>