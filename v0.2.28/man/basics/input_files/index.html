<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Input formats · JutulDarcy.jl</title><meta name="title" content="Input formats · JutulDarcy.jl"/><meta property="og:title" content="Input formats · JutulDarcy.jl"/><meta property="twitter:title" content="Input formats · JutulDarcy.jl"/><meta name="description" content="Documentation for JutulDarcy.jl."/><meta property="og:description" content="Documentation for JutulDarcy.jl."/><meta property="twitter:description" content="Documentation for JutulDarcy.jl."/><meta property="og:url" content="https://sintefmath.github.io/JutulDarcy.jl/man/basics/input_files/"/><meta property="twitter:url" content="https://sintefmath.github.io/JutulDarcy.jl/man/basics/input_files/"/><link rel="canonical" href="https://sintefmath.github.io/JutulDarcy.jl/man/basics/input_files/"/><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../search_index.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script><link href="../../../assets/citations.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img src="../../../assets/logo.png" alt="JutulDarcy.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">JutulDarcy.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><span class="tocitem">Introduction</span><ul><li><a class="tocitem" href="../../../">JutulDarcy.jl</a></li><li><a class="tocitem" href="../../intro/">Getting started</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../../examples/two_phase_gravity_segregation/">Gravity segregation</a></li><li><a class="tocitem" href="../../../examples/two_phase_buckley_leverett/">Two-phase Buckley-Leverett</a></li><li><a class="tocitem" href="../../../examples/two_phase_unstable_gravity/">Gravity circulation with CPR preconditioner</a></li><li><a class="tocitem" href="../../../examples/wells_intro/">Intro to wells</a></li><li><a class="tocitem" href="../../../examples/co2_sloped/">CO2 injection in saline aquifer</a></li><li><a class="tocitem" href="../../../examples/data_input_file/">Simulating Eclipse/DATA input files</a></li><li><a class="tocitem" href="../../../examples/five_spot_ensemble/">Quarter-five-spot with variation</a></li><li><a class="tocitem" href="../../../examples/co2_brine_2d_vertical/">Intro to compositional flow</a></li><li><a class="tocitem" href="../../../examples/compositional_5components/">Compositional with five components</a></li><li><a class="tocitem" href="../../../examples/optimize_simple_bl/">Parameter optimization of Buckley-Leverett</a></li><li><a class="tocitem" href="../../../examples/validation_spe1/">Validation: SPE1</a></li><li><a class="tocitem" href="../../../examples/validation_spe9/">Validation: SPE9</a></li><li><a class="tocitem" href="../../../examples/validation_egg/">Validation: Egg</a></li><li><a class="tocitem" href="../../../examples/validation_olympus_1/">Validation: OLYMPUS 1</a></li><li><a class="tocitem" href="../../../examples/validation_norne_nohyst/">Validation: Norne</a></li><li><a class="tocitem" href="../../../examples/validation_mrst/">Validation: MRST input files</a></li></ul></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../../highlevel/">High-level API</a></li><li class="is-active"><a class="tocitem" href>Input formats</a><ul class="internal"><li><a class="tocitem" href="#MAT-files-from-the-Matlab-Reservoir-Simulation-Toolbox-(MRST)"><span>MAT-files from the Matlab Reservoir Simulation Toolbox (MRST)</span></a></li><li><a class="tocitem" href="#DATA-files-from-commercial-reservoir-modelling-software"><span>DATA-files from commercial reservoir modelling software</span></a></li></ul></li><li><a class="tocitem" href="../forces/">Driving forces</a></li><li><a class="tocitem" href="../systems/">Supported physical systems</a></li><li><a class="tocitem" href="../wells/">Wells and controls</a></li><li><a class="tocitem" href="../solution/">Solving the equations</a></li><li><a class="tocitem" href="../primary/">Primary variables</a></li><li><a class="tocitem" href="../secondary/">Secondary variables (properties)</a></li><li><a class="tocitem" href="../parameters/">Parameters</a></li><li><a class="tocitem" href="../plotting/">Plotting and visualization</a></li></ul></li><li><span class="tocitem">Advanced usage</span><ul><li><a class="tocitem" href="../../advanced/mpi/">Multi-threading and MPI support</a></li><li><a class="tocitem" href="../../advanced/compiled/">Standalone reservoir simulator</a></li></ul></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="../../../ref/jutul/">Jutul functions</a></li></ul></li><li><span class="tocitem">Additional information </span><ul><li><a class="tocitem" href="../../../extras/refs/">References</a></li><li><a class="tocitem" href="../../../extras/faq/">FAQ</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Input formats</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Input formats</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/sintefmath/JutulDarcy.jl/blob/main/docs/src/man/basics/input_files.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Input-formats"><a class="docs-heading-anchor" href="#Input-formats">Input formats</a><a id="Input-formats-1"></a><a class="docs-heading-anchor-permalink" href="#Input-formats" title="Permalink"></a></h1><p>It is also possible to read cases that have been set up in MRST (see <a href="#JutulDarcy.setup_case_from_mrst"><code>setup_case_from_mrst</code></a> and <a href="#JutulDarcy.simulate_mrst_case"><code>simulate_mrst_case</code></a>) or from .DATA files (see <a href="#JutulDarcy.setup_case_from_data_file"><code>setup_case_from_data_file</code></a> and <a href="#JutulDarcy.simulate_data_file"><code>simulate_data_file</code></a>)</p><h2 id="MAT-files-from-the-Matlab-Reservoir-Simulation-Toolbox-(MRST)"><a class="docs-heading-anchor" href="#MAT-files-from-the-Matlab-Reservoir-Simulation-Toolbox-(MRST)">MAT-files from the Matlab Reservoir Simulation Toolbox (MRST)</a><a id="MAT-files-from-the-Matlab-Reservoir-Simulation-Toolbox-(MRST)-1"></a><a class="docs-heading-anchor-permalink" href="#MAT-files-from-the-Matlab-Reservoir-Simulation-Toolbox-(MRST)" title="Permalink"></a></h2><h3 id="Simulation-of-.MAT-files"><a class="docs-heading-anchor" href="#Simulation-of-.MAT-files">Simulation of .MAT files</a><a id="Simulation-of-.MAT-files-1"></a><a class="docs-heading-anchor-permalink" href="#Simulation-of-.MAT-files" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JutulDarcy.setup_case_from_mrst" href="#JutulDarcy.setup_case_from_mrst"><code>JutulDarcy.setup_case_from_mrst</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">setup_case_from_mrst(&quot;filename.mat&quot;; kwarg...)</code></pre><p>Set up a <a href="../../../ref/jutul/#Jutul.JutulCase"><code>Jutul.JutulCase</code></a> from a MRST-exported .mat file.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/JutulDarcy.jl/blob/e718be09d69f00c71eeb2b3d2cc861ee04170445/src/input_simulation/mrst_input.jl#L1086-L1090">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JutulDarcy.simulate_mrst_case" href="#JutulDarcy.simulate_mrst_case"><code>JutulDarcy.simulate_mrst_case</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ws, states = simulate_mrst_case(file_name)
simulate_mrst_case(file_name; &lt;keyword arguments&gt;)</code></pre><p>Simulate a MRST case from <code>file_name</code> as exported by <code>writeJutulInput</code> in MRST.</p><p><strong>Arguments</strong></p><ul><li><code>file_name::String</code>: The path to a <code>.mat</code> or <code>.data</code> file that is to be simulated.</li></ul><p><strong>Keyword arguments</strong></p><ul><li><code>extra_outputs::Vector{Symbol} = [:Saturations]</code>: Additional variables to output from the simulation.</li><li><code>write_output::Bool = true</code>: Write output (in the default JLD2 format)</li><li><code>output_path = nothing</code>: Directory for output files. Files will be written under this directory. Defaults to the folder of <code>file_name</code>.</li><li><code>write_mrst = true</code>: Write MRST compatible output after completed simulation that can be read by <code>readJutulOutput</code> in MRST.</li><li><code>backend=:csc</code>: choice of backend for linear systems. <code>:csc</code> for default Julia sparse, <code>:csr</code> for experimental parallel CSR.</li><li><code>verbose=true</code>: print some extra information specific to this routine upon calling</li><li><code>nthreads=Threads.nthreads()</code>: number of threads to use</li><li><code>linear_solver=:bicgstab</code>: name of Krylov.jl solver to use, or :direct (for small cases only)</li><li><code>info_level=0</code>: standard Jutul info_level. 0 for minimal printing, -1 for no printing, 1-5 for various levels of verbosity</li></ul><p>Additional input arguments are passed onto, <a href="#JutulDarcy.setup_case_from_mrst"><code>setup_case_from_mrst</code></a>, <a href="../../highlevel/#JutulDarcy.setup_reservoir_simulator"><code>setup_reservoir_simulator</code></a> and <a href="../../../ref/jutul/#Jutul.simulator_config-Tuple{Any}"><code>simulator_config</code></a> if applicable.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/JutulDarcy.jl/blob/e718be09d69f00c71eeb2b3d2cc861ee04170445/src/input_simulation/mrst_input.jl#L1476-L1507">source</a></section></article><h3 id="MRST-specific-types"><a class="docs-heading-anchor" href="#MRST-specific-types">MRST-specific types</a><a id="MRST-specific-types-1"></a><a class="docs-heading-anchor-permalink" href="#MRST-specific-types" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Jutul.MRSTWrapMesh" href="#Jutul.MRSTWrapMesh"><code>Jutul.MRSTWrapMesh</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">MRSTWrapMesh(G, N = nothing)</code></pre><p>Mesh that adapts an exported MRST mesh to the Jutul interface. <code>G</code> is assumed to be read directly from file using <code>MAT.matread</code>. The raw exported grid can be found under the <code>data</code> field.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/Jutul.jl/blob/v0.2.37/src/meshes/mrst.jl#L9-L15">source</a></section></article><h2 id="DATA-files-from-commercial-reservoir-modelling-software"><a class="docs-heading-anchor" href="#DATA-files-from-commercial-reservoir-modelling-software">DATA-files from commercial reservoir modelling software</a><a id="DATA-files-from-commercial-reservoir-modelling-software-1"></a><a class="docs-heading-anchor-permalink" href="#DATA-files-from-commercial-reservoir-modelling-software" title="Permalink"></a></h2><p>JutulDarcy can set up cases from Eclipse-type input files by making use of the <a href="https://github.com/sintefmath/GeoEnergyIO.jl">GeoEnergyIO.jl</a> package for parsing. This package is a direct dependency of JutulDarcy and these cases can be simulated directly. If you want to parse the input files and possibly modify them in your Julia session before the case is simulated, we refer you to the <a href="https://sintefmath.github.io/GeoEnergyIO.jl/dev/">GeoEnergyIO Documentation</a>.</p><p>If you want to directly simulate a file from disk, you can sue the high level functions that automatically parse the files for you:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JutulDarcy.simulate_data_file" href="#JutulDarcy.simulate_data_file"><code>JutulDarcy.simulate_data_file</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">simulate_data_file(inp; parse_arg = NamedTuple(), kwarg...)</code></pre><p>Simulate standard input file (with extension .DATA). <code>inp</code> can either be the output from the GeoEnergyIO function <code>parse_data_file</code> or a <code>String</code> for the path of an input file with the .DATA extension.</p><p>Additional arguments are passed onto <a href="../../highlevel/#JutulDarcy.simulate_reservoir"><code>simulate_reservoir</code></a>. Extra inputs to the parser can be sent as a <code>setup_arg</code> <code>NamedTuple</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/JutulDarcy.jl/blob/e718be09d69f00c71eeb2b3d2cc861ee04170445/src/input_simulation/data_input.jl#L1-L10">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JutulDarcy.setup_case_from_data_file" href="#JutulDarcy.setup_case_from_data_file"><code>JutulDarcy.setup_case_from_data_file</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">case = setup_case_from_data_file(
    filename;
    parse_arg = NamedTuple(),
    kwarg...
)

case, data = setup_case_from_data_file(filename; include_data = true)</code></pre><p>Set up a <a href="../../../ref/jutul/#Jutul.JutulCase"><code>JutulCase</code></a> from a standard input file (with extension .DATA). Additional arguments to the parser can be passed as key/values in a <code>NamedTuple</code> given as <code>parse_arg</code>. The optional input <code>include_data=true</code> will make the function return the parsed data in addition the case itself. Additional keyword arguments are passed on to <a href="#JutulDarcy.setup_case_from_parsed_data"><code>setup_case_from_parsed_data</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/JutulDarcy.jl/blob/e718be09d69f00c71eeb2b3d2cc861ee04170445/src/input_simulation/data_input.jl#L21-L35">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JutulDarcy.setup_case_from_parsed_data" href="#JutulDarcy.setup_case_from_parsed_data"><code>JutulDarcy.setup_case_from_parsed_data</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">setup_case_from_parsed_data(datafile; skip_wells = false, simple_well = true, use_ijk_trans = true, verbose = false, kwarg...)</code></pre><p>Set up a case from a parsed input file (in <code>Dict</code> format). Internal function, not exported. Use <a href="#JutulDarcy.setup_case_from_data_file"><code>setup_case_from_data_file</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/sintefmath/JutulDarcy.jl/blob/e718be09d69f00c71eeb2b3d2cc861ee04170445/src/input_simulation/data_input.jl#L57-L62">source</a></section></article><p>Reservoir simulator input files are highly complex and contain a great number of different keywords. JutulDarcy and GeoEnergyIO has extensive support for this format, but many keywords are missing or only partially supported. Sometimes cases can be made to run by removing keywords that do not impact simulation outcomes, or have very little impact. If you want a turnkey open source solution for simulation reservoir models you should also have a look at <a href="https://opm-project.org/">OPM Flow</a>.</p><p>If you can share your input file or the missing keywords <a href="https://github.com/sintefmath/JutulDarcy.jl/issues">in the issues section</a> it may be easier to figure out if a case can be supported.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../highlevel/">« High-level API</a><a class="docs-footer-nextpage" href="../forces/">Driving forces »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.6.0 on <span class="colophon-date" title="Saturday 31 August 2024 21:05">Saturday 31 August 2024</span>. Using Julia version 1.10.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
